try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4da8ea40-5e87-4f69-938d-2c0fbaa33140",e._sentryDebugIdIdentifier="sentry-dbid-4da8ea40-5e87-4f69-938d-2c0fbaa33140")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=Object.assign({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:3f1b0c2a4d5e4f7a8c6e9b2d3e4f5a6b":!0})}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"c0bc34fa4f02b0086f9563cc4693e1c5c5dc586d"};(()=>{var e={606:e=>{var t,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,c=[],u=!1,l=-1;function d(){u&&a&&(u=!1,a.length?c=a.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||i(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{debug:()=>Au,error:()=>Nu,fatal:()=>Fu,fmt:()=>Mu,info:()=>Lu,trace:()=>Pu,warn:()=>Du});var t={};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{BrowserClient:()=>vo,OpenFeatureIntegrationHook:()=>dw,SDK_VERSION:()=>R,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>Wt,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>zt,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>Ht,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>Bt,Scope:()=>Ne,WINDOW:()=>mo,addBreadcrumb:()=>Do,addEventProcessor:()=>dr,addIntegration:()=>et,breadcrumbsIntegration:()=>Ds,browserApiErrorsIntegration:()=>Fs,browserProfilingIntegration:()=>nw,browserSessionIntegration:()=>Hs,browserTracingIntegration:()=>yS,buildLaunchDarklyFlagUsedHandler:()=>uw,captureConsoleIntegration:()=>ju,captureEvent:()=>er,captureException:()=>Zn,captureFeedback:()=>$u,captureMessage:()=>Qn,captureSession:()=>mr,chromeStackLineParser:()=>ci,close:()=>ur,consoleLoggingIntegration:()=>Bu,contextLinesIntegration:()=>Ql,continueTrace:()=>el,createTransport:()=>Ti,createUserFeedbackEnvelope:()=>$l,dedupeIntegration:()=>vt,defaultRequestInstrumentationOptions:()=>Db,defaultStackLineParsers:()=>yi,defaultStackParser:()=>vi,diagnoseSdkConnectivity:()=>mw,endSession:()=>fr,eventFiltersIntegration:()=>rt,eventFromException:()=>uo,eventFromMessage:()=>lo,exceptionFromError:()=>to,extraErrorDataIntegration:()=>ll,featureFlagsIntegration:()=>aw,feedbackAsyncIntegration:()=>Cu,feedbackIntegration:()=>Iu,feedbackSyncIntegration:()=>Iu,flush:()=>cr,forceLoad:()=>Fi,functionToStringIntegration:()=>ut,geckoStackLineParser:()=>di,getActiveSpan:()=>Fn,getClient:()=>Je,getCurrentScope:()=>qe,getDefaultIntegrations:()=>Ai,getFeedback:()=>Ja,getGlobalScope:()=>ze,getIsolationScope:()=>We,getReplay:()=>xy,getRootSpan:()=>Nn,getSpanDescendants:()=>Dn,getSpanStatusFromHttpCode:()=>sn,globalHandlersIntegration:()=>Ys,graphqlClientIntegration:()=>id,httpClientIntegration:()=>zl,httpContextIntegration:()=>Zs,inboundFiltersIntegration:()=>ot,init:()=>Di,instrumentOutgoingRequests:()=>Nb,instrumentSupabaseClient:()=>Sl,isInitialized:()=>lr,lastEventId:()=>ar,launchDarklyIntegration:()=>cw,lazyLoadIntegration:()=>Tu,linkedErrorsIntegration:()=>ri,logger:()=>e,makeBrowserOfflineTransport:()=>PS,makeFetchTransport:()=>Pi,makeMultiplexedTransport:()=>El,moduleMetadataIntegration:()=>xl,onLoad:()=>ji,openFeatureIntegration:()=>lw,opera10StackLineParser:()=>mi,opera11StackLineParser:()=>_i,parameterize:()=>Ou,registerSpanErrorInstrumentation:()=>Cl,replayCanvasIntegration:()=>rv,replayIntegration:()=>wy,reportingObserverIntegration:()=>Hl,rewriteFramesIntegration:()=>Ll,sendFeedback:()=>Na,setContext:()=>tr,setCurrentClient:()=>Ct,setExtra:()=>rr,setExtras:()=>nr,setHttpStatus:()=>an,setMeasurement:()=>zu,setTag:()=>sr,setTags:()=>or,setUser:()=>ir,showReportDialog:()=>Ni,spanToBaggageHeader:()=>zn,spanToJSON:()=>On,spanToTraceHeader:()=>xn,spotlightBrowserIntegration:()=>rw,startBrowserTracingNavigationSpan:()=>bS,startBrowserTracingPageLoadSpan:()=>vS,startInactiveSpan:()=>Qu,startNewTrace:()=>rl,startSession:()=>pr,startSpan:()=>Xu,startSpanManual:()=>Zu,statsigIntegration:()=>hw,supabaseIntegration:()=>wl,suppressTracing:()=>nl,thirdPartyErrorFilterIntegration:()=>Wi,unleashIntegration:()=>pw,updateSpanName:()=>$n,winjsStackLineParser:()=>fi,withActiveSpan:()=>tl,withIsolationScope:()=>Ge,withScope:()=>Ve,zodErrorsIntegration:()=>jl});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"toggle",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.querySelector("iframe.cp-exocu-loader-iframe"),n=t.contentDocument||t.contentWindow.document,r=document.getElementById("cartpanda-loader-container"),o=n.getElementById("cartpanda-loader");r.style.display=o.style.display=e?"block":"none"}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"initIframe",value:function(e){return this.attachIframeContainer(),this.createIframe(),this.loadIframeContent(e),this}},{key:"attachIframeContainer",value:function(){document.getElementById("cartpanda-loader-container")||(document.body.insertAdjacentHTML("beforeend",'<div id="cartpanda-loader-container"></div>'),document.body.insertAdjacentHTML("beforeend","<style>#cartpanda-loader-container{ display: none; position: fixed; z-index: 999999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }</style>"))}},{key:"createIframe",value:function(){var e=document.getElementById("cartpanda-loader-container"),t=document.createElement("iframe");t.style.width="100%",t.style.height="100vh",t.style.display="block",t.style.overflowY="hidden",t.className+="cp-exocu-loader-iframe",t.setAttribute("frameBorder","0"),t.setAttribute("scrolling","no"),e.appendChild(t)}},{key:"loadIframeContent",value:function(e){var t=document.querySelector(".cp-exocu-loader-iframe");t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}]),e}();const a=i;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.debounceTimeout={},this.cartpandaParams=["x_ocu_m_token","ev","x_ocu_token","iso2","sp_url","fbtrk_d","has_declined_offer"]}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"hexToString",value:function(e){if(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}return""}},{key:"debounce",value:function(e,t,n){var r=this;return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];r.debounceTimeout[t.name]&&clearTimeout(r.debounceTimeout[t.name]),r.debounceTimeout[t.name]=setTimeout((function(){t.apply(e,s)}),n)}}},{key:"parseToNumeric",value:function(e){if(!this.isNumeric(e))return console.log("not numeric: ",{n:e}),e;try{return e=Number(parseFloat(e).toFixed(2))}catch(t){return console.log({e:t,n:e}),e}}},{key:"isNumeric",value:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},{key:"handleRedirects",value:function(e){var t=this,n=0;if(e.includes("thankyou")){n=3e3;var r=new URL(e);if("undefined"!=typeof fb_state){switch(r.searchParams.set("fb_from_checkout",fb_state.fb_from_checkout),r.searchParams.set("fb_declined_offer",fb_state.fb_declined_offer),fb_state.offer_type){case"up":r.searchParams.set("upsell",1);break;case"down":r.searchParams.set("downsell",1)}e=r.href}}setTimeout((function(){window.location.href=t.applyUserQueryStrings(e)}),n)}},{key:"applyUserQueryStrings",value:function(e){var t=this.getUserQueryStrings();if(Object.keys(t).length>0){for(var n=new URL(e),r=0,o=Object.entries(t);r<o.length;r++){var s=u(o[r],2),i=s[0],a=s[1];n.searchParams.set(i,a)}return n.toString()}return e}},{key:"getUserQueryStrings",value:function(){var e,t=window.location.search,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(new URLSearchParams(t).entries());try{for(r.s();!(e=r.n()).done;){var o=u(e.value,2),s=o[0],i=o[1];this.cartpandaParams.includes(s)||(n[s]=i)}}catch(e){r.e(e)}finally{r.f()}return n}}]),e}();const m=h;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function w(e){var t=E();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function T(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(n,e);var t=w(n);function n(e,r,o,s){var i,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),T(k(i=t.call(this)),"shopUrl",""),T(k(i),"loader",null),T(k(i),"xOcuToken",""),T(k(i),"xOcuMToken",""),T(k(i),"productResources",[]),T(k(i),"callback",null),i.shopUrl=e,i.xOcuToken=r,i.xOcuMToken=c,i.iso2Code=o,i.callback=u,i.fHash=s,i.loader=new a,i.xOcuToken||i.xOcuMToken?i.buildModalResources():alert("Failed to load product details."),i}return function(e,t,n){t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"buildModalResources",value:function(){var e=this,t=!1;this.fetchProductDetails().then((function(n){e.appendEditorModal(null==n?void 0:n.modal_html),e.productResources=null==n?void 0:n.resources,e.productResources&&e.productResources.variants.others.forEach((function(e){var t=[];e.product_variant_option_value.forEach((function(e){t.push("".concat(e.product_option_value_id,":").concat(e.product_option_id))})),e.search_key=t.join("-")})),t=!0,e.callback(t,n.skip_popup)})).catch((function(t){if(console.error("Failed to load product details.",t),e.loader.show(),null!=t&&t.redirect)if("undefined"!=typeof Swal){var n=null!=t&&t.message?null==t?void 0:t.message:"Failed to load product details.";Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,icon:"error",title:n,didOpen:function(e){e.onmouseenter=Swal.stopTimer,e.onmouseleave=Swal.resumeTimer},didClose:function(){window.location.href=null==t?void 0:t.redirect}})}else setTimeout((function(){window.location.href=null==t?void 0:t.redirect}),1e3);else null!=t&&t.message&&"undefined"!=typeof Swal&&Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"error",title:null==t?void 0:t.message,didOpen:function(e){e.onmouseenter=Swal.stopTimer,e.onmouseleave=Swal.resumeTimer}});e.callback(!0)}))}},{key:"fetchProductDetails",value:function(){var e=this;return new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e=JSON.parse(r.responseText);200!==r.status?n(e):t(e)}};var o=new URL("".concat(e.shopUrl,"/ex-ocu/product-details"));o.searchParams.append("iso2",e.iso2Code),o.searchParams.append("f_hash",e.fHash),e.xOcuMToken?o.searchParams.append("x_ocu_m_token",e.xOcuMToken):o.searchParams.append("x_ocu_token",e.xOcuToken),r.open("GET",o.href),r.send()}))}},{key:"appendEditorModal",value:function(e){var t=this;document.body.insertAdjacentHTML("beforeend",e),setTimeout((function(){var e=document.querySelector(".cartpanda-modal-close");e.firstChild&&"✕"===e.firstChild.nodeValue||e.prepend("✕");var n=document.getElementById("cartpandaModal");document.getElementsByClassName("cartpanda-modal-close")[0].onclick=function(e){t.closeModal(e)};var r=document.getElementById("cartpanda-close-modal-btn");r.onclick=t.closeModal,window.onclick=function(e){if(e.target==n&&(n.style.display="none"),e.target==r){var o=r.dataset.link;o&&(t.loader.show(),t.debounce(t,t.popupDeclined,500)(o))}},document.getElementById("cartpanda-payment-form").onsubmit=function(e){e.preventDefault(),t.loader.show(),t.debounce(t,t.submitForm,500)(e)};var o=document.getElementsByClassName("cartpanda-input");if(null!==o){var s=[];Array.from(o).forEach((function(e,n){"SELECT"===e.tagName&&(s[n]=e.value,e.addEventListener("change",(function(e){s[n]!=e.target.value&&(s[n]=e.target.value);var r=t.productResources.variants.others.find((function(e){if(e.search_key===s.join("-"))return e})),o=document.getElementById("cartpanda-variant-unavailable"),i=document.getElementById("cartpanda-payment-confirmation");void 0!==r?(o.style.display="none",i.disabled=!1,i.style.cursor="pointer",i.style.backgroundColor="#2f51f6",i.style.borderColor="#2f51f6",document.querySelector(".cartpanda-price-wrapper").innerHTML=r.display_price):(o.style.display="block",i.disabled=!0,i.style.cursor="not-allowed",i.style.backgroundColor="#8095ff",document.getElementById("cartpanda-payment-confirmation").style.borderColor="#8095ff",price.innerHTML=0)})))}))}}),100)}},{key:"openModal",value:function(){document.getElementById("cartpandaModal").style.display="block"}},{key:"closeModal",value:function(e){e.preventDefault(),document.getElementById("cartpandaModal").style.display="none"}},{key:"submitForm",value:function(e){var t=new FormData(e.target);if(t.has("cartpanda_options_selected[]")){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(t.entries());try{for(o.s();!(n=o.n()).done;){var s=_(n.value,2),i=s[0],a=s[1];"cartpanda_options_selected[]"==i&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}this.productResources.variants.others.find((function(n){n.search_key===r.join("-")&&(e.target.querySelector('input[name="cartpanda_product_variant_id"]').value=n.id,t.append("cartpanda_product_variant_id",n.id))})),t.delete("cartpanda_options_selected[]")}e.target.submit()}},{key:"popupDeclined",value:function(e){window.location.href=e}}]),n}(m);const O=I,M="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,R="9.19.0",P=globalThis;function A(){return L(P),P}function L(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||R,t[R]=t[R]||{}}function D(e,t,n=P){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[R]=r[R]||{};return o[e]||(o[e]=t())}const N=Object.prototype.toString;function F(e){switch(N.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return G(e,Error)}}function j(e,t){return N.call(e)===`[object ${t}]`}function $(e){return j(e,"ErrorEvent")}function U(e){return j(e,"DOMError")}function B(e){return j(e,"String")}function H(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function q(e){return null===e||H(e)||"object"!=typeof e&&"function"!=typeof e}function W(e){return j(e,"Object")}function z(e){return"undefined"!=typeof Event&&G(e,Event)}function V(e){return Boolean(e?.then&&"function"==typeof e.then)}function G(e,t){try{return e instanceof t}catch(e){return!1}}function J(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Y(e){return"undefined"!=typeof Request&&G(e,Request)}const K=P,X=80;function Z(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||X;for(;n&&s++<r&&(u=Q(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function Q(e,t){const n=e,r=[];if(!n?.tagName)return"";if(K.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t?.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o?.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&B(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function ee(){try{return K.document.location.href}catch(e){return""}}const te=["debug","info","warn","error","log","assert","trace"],ne={};function re(e){if(!("console"in P))return e();const t=P.console,n={},r=Object.keys(ne);r.forEach((e=>{const r=ne[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const oe=D("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return M?te.forEach((n=>{t[n]=(...t)=>{e&&re((()=>{P.console[n](`Sentry Logger [${n}]:`,...t)}))}})):te.forEach((e=>{t[e]=()=>{}})),t}));function se(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function ie(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function ae(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{J(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function ce(e,t,n=!1){return!!B(e)&&(j(t,"RegExp")?t.test(e):!!B(t)&&(n?e===t:e.includes(t)))}function ue(e,t=[],n=!1){return t.some((t=>ce(e,t,n)))}function le(e,t,n){if(!(t in e))return;const r=e[t];if("function"!=typeof r)return;const o=n(r);"function"==typeof o&&pe(o,r);try{e[t]=o}catch{M&&oe.log(`Failed to replace method "${t}" in object`,e)}}function de(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){M&&oe.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function pe(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,de(e,"__sentry_original__",t)}catch(e){}}function fe(e){return e.__sentry_original__}function he(e){if(F(e))return{message:e.message,name:e.name,stack:e.stack,...ge(e)};if(z(e)){const t={type:e.type,target:me(e.target),currentTarget:me(e.currentTarget),...ge(e)};return"undefined"!=typeof CustomEvent&&G(e,CustomEvent)&&(t.detail=e.detail),t}return e}function me(e){try{return t=e,"undefined"!=typeof Element&&G(t,Element)?Z(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function ge(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function _e(e=function(){const e=P;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}function ye(e){return e.exception?.values?.[0]}function ve(e){const{message:t,event_id:n}=e;if(t)return t;const r=ye(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function be(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function Se(e,t){const n=ye(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r?.data,...t.data};n.mechanism.data=e}}function we(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{de(e,"__sentry_captured__",!0)}catch(e){}return!1}const ke=1e3;function Ee(){return Date.now()/ke}const xe=function(){const{performance:e}=P;if(!e?.now)return Ee;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/ke}();let Te;function Ce(){return Te||(Te=function(){const{performance:e}=P;if(!e?.now)return[void 0,"none"];const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing?.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}()),Te[0]}function Ie(e){const t=xe(),n={sid:_e(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&Oe(n,e),n}function Oe(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||xe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:_e()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Me(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=Me(r[e],t[e],n-1));return r}const Re="_sentrySpan";function Pe(e,t){t?de(e,Re,t):delete e[Re]}function Ae(e){return e[Re]}function Le(){return _e()}function De(){return _e().substring(16)}class Ne{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Le(),sampleRand:Math.random()}}clone(){const e=new Ne;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Pe(e,Ae(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Oe(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Ne?t.getScopeData():W(t)?e:void 0,{tags:r,extra:o,user:s,contexts:i,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...i},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Pe(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Le(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Ee(),...e,message:e.message?se(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Ae(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Me(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||_e();if(!this._client)return oe.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||_e();if(!this._client)return oe.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||_e();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(oe.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class Fe{constructor(e,t){let n,r;n=e||new Ne,r=t||new Ne,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return V(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function je(){const e=L(A());return e.stack=e.stack||new Fe(D("defaultCurrentScope",(()=>new Ne)),D("defaultIsolationScope",(()=>new Ne)))}function $e(e){return je().withScope(e)}function Ue(e,t){const n=je();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function Be(e){return je().withScope((()=>e(je().getIsolationScope())))}function He(e){const t=L(e);return t.acs?t.acs:{withIsolationScope:Be,withScope:$e,withSetScope:Ue,withSetIsolationScope:(e,t)=>Be(t),getCurrentScope:()=>je().getScope(),getIsolationScope:()=>je().getIsolationScope()}}function qe(){return He(A()).getCurrentScope()}function We(){return He(A()).getIsolationScope()}function ze(){return D("globalScope",(()=>new Ne))}function Ve(...e){const t=He(A());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function Ge(...e){const t=He(A());if(2===e.length){const[n,r]=e;return n?t.withSetIsolationScope(n,r):t.withIsolationScope(r)}return t.withIsolationScope(e[0])}function Je(){return qe().getClient()}function Ye(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,s={trace_id:n,span_id:o||De()};return r&&(s.parent_span_id=r),s}const Ke=[];function Xe(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(r)}function Ze(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Qe(e,t,n){if(n[t.name])M&&oe.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Ke.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),Ke.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}M&&oe.log(`Integration installed: ${t.name}`)}}function et(e){const t=Je();t?t.addIntegration(e):M&&oe.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}function tt(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch(e){}return t}const nt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],rt=(e={})=>{let t;return{name:"EventFilters",setup(n){const r=n.getOptions();t=st(e,r)},processEvent(n,r,o){if(!t){const n=o.getOptions();t=st(e,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(!t?.length)return!1;const n=e.transaction;return!!n&&ue(n,t)}(e,t.ignoreTransactions))return M&&oe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${ve(e)}`),!0}else{if(function(e,t){if(!t?.length)return!1;return tt(e).some((e=>ue(e,t)))}(e,t.ignoreErrors))return M&&oe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${ve(e)}`),!0;if(function(e){if(!e.exception?.values?.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return M&&oe.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${ve(e)}`),!0;if(function(e,t){if(!t?.length)return!1;const n=it(e);return!!n&&ue(n,t)}(e,t.denyUrls))return M&&oe.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${ve(e)}.\nUrl: ${it(e)}`),!0;if(!function(e,t){if(!t?.length)return!0;const n=it(e);return!n||ue(n,t)}(e,t.allowUrls))return M&&oe.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${ve(e)}.\nUrl: ${it(e)}`),!0}return!1}(n,t)?null:n}}},ot=(e={})=>({...rt(e),name:"InboundFilters"});function st(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:nt],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function it(e){try{const t=[...e.exception?.values??[]].reverse().find((e=>void 0===e.mechanism?.parent_id&&e.stacktrace?.frames?.length)),n=t?.stacktrace?.frames;return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(t){return M&&oe.error(`Cannot extract url for event ${ve(e)}`),null}}let at;const ct=new WeakMap,ut=()=>({name:"FunctionToString",setupOnce(){at=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=fe(this),n=ct.has(Je())&&void 0!==t?t:this;return at.apply(n,e)}}catch{}},setup(e){ct.set(e,!0)}}),lt=50,dt="?",pt=/\(error: (.*)\)/,ft=/captureMessage|captureException/;function ht(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const o=[],s=e.split("\n");for(let e=n;e<s.length;e++){const n=s[e];if(n.length>1024)continue;const i=pt.test(n)?n.replace(pt,"$1"):n;if(!i.match(/\S*Error: /)){for(const e of t){const t=e(i);if(t){o.push(t);break}}if(o.length>=lt+r)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(mt(t).function||"")&&t.pop();t.reverse(),ft.test(mt(t).function||"")&&(t.pop(),ft.test(mt(t).function||"")&&t.pop());return t.slice(0,lt).map((e=>({...e,filename:e.filename||mt(t).filename,function:e.function||dt})))}(o.slice(r))}}function mt(e){return e[e.length-1]||{}}const gt="<anonymous>";function _t(e){try{return e&&"function"==typeof e&&e.name||gt}catch(e){return gt}}function yt(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}}const vt=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!St(e,t))return!1;if(!bt(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=wt(t),r=wt(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!St(e,t))return!1;if(!bt(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return M&&oe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}};function bt(e,t){let n=yt(e),r=yt(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function St(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function wt(e){return e.exception?.values&&e.exception.values[0]}const kt=P;function Et(){if(!("fetch"in kt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function xt(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Tt(){if("string"==typeof EdgeRuntime)return!0;if(!Et())return!1;if(xt(kt.fetch))return!0;let e=!1;const t=kt.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=xt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){M&&oe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e}function Ct(e){qe().setClient(e)}const It="production";var Ot;function Mt(e){return new Pt((t=>{t(e)}))}function Rt(e){return new Pt(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Ot||(Ot={}));class Pt{constructor(e){this._state=Ot.PENDING,this._handlers=[],this._runExecutor(e)}then(e,t){return new Pt(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Pt(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}_executeHandlers(){if(this._state===Ot.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ot.RESOLVED&&e[1](this._value),this._state===Ot.REJECTED&&e[2](this._value),e[0]=!0)}))}_runExecutor(e){const t=(e,t)=>{this._state===Ot.PENDING&&(V(t)?t.then(n,r):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(Ot.RESOLVED,e)},r=e=>{t(Ot.REJECTED,e)};try{e(n,r)}catch(e){r(e)}}}function At(e,t,n,r=0){return new Pt(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);M&&i.id&&null===a&&oe.log(`Event processor "${i.id}" dropped event`),V(a)?a.then((t=>At(e,t,n,r+1).then(o))).then(null,s):At(e,a,n,r+1).then(o).then(null,s)}}))}let Lt,Dt,Nt;function Ft(e){const t=P._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return Nt&&n.length===Dt||(Dt=n.length,Nt=n.reduce(((n,r)=>{Lt||(Lt={});const o=Lt[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const s=o[e],i=s?.filename,a=t[r];if(i&&a){n[i]=a,Lt[r]=[i,a];break}}}return n}),{})),Nt}function jt(e,t=100,n=1/0){try{return Ut("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function $t(e,t=3,n=102400){const r=jt(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?$t(e,t-1,n):r;var o}function Ut(e,t,n=1/0,r=1/0,o=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[s,i]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(J(t))return"[VueViewModel]";if(W(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${_t(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Ut("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=he(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=Ut(e,t,c-1,r,o),d++}return i(t),l}const Bt="sentry.source",Ht="sentry.sample_rate",qt="sentry.previous_trace_sample_rate",Wt="sentry.op",zt="sentry.origin",Vt="sentry.idle_span_finish_reason",Gt="sentry.measurement_unit",Jt="sentry.measurement_value",Yt="sentry.custom_span_name",Kt="sentry.profile_id",Xt="sentry.exclusive_time",Zt="http.request.method",Qt="url.full",en="sentry.link.type";function tn(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||Je()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}const nn=0,rn=1,on=2;function sn(e){if(e<400&&e>=100)return{code:rn};if(e>=400&&e<500)switch(e){case 401:return{code:on,message:"unauthenticated"};case 403:return{code:on,message:"permission_denied"};case 404:return{code:on,message:"not_found"};case 409:return{code:on,message:"already_exists"};case 413:return{code:on,message:"failed_precondition"};case 429:return{code:on,message:"resource_exhausted"};case 499:return{code:on,message:"cancelled"};default:return{code:on,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:on,message:"unimplemented"};case 503:return{code:on,message:"unavailable"};case 504:return{code:on,message:"deadline_exceeded"};default:return{code:on,message:"internal_error"}}return{code:on,message:"unknown_error"}}function an(e,t){e.setAttribute("http.response.status_code",t);const n=sn(t);"unknown_error"!==n.message&&e.setStatus(n)}const cn="_sentryScope",un="_sentryIsolationScope";function ln(e){return{scope:e[cn],isolationScope:e[un]}}function dn(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}const pn="sentry-",fn=/^sentry-/,hn=8192;function mn(e){const t=function(e){if(!e||!B(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=_n(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return _n(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(fn)){e[t.slice(pn.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function gn(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const o=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,s=0===r?o:`${e},${o}`;return s.length>hn?(M&&oe.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):s}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${pn}${t}`]=n),e)),{}))}function _n(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const yn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function vn(e,t){const n=function(e){if(!e)return;const t=e.match(yn);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=mn(t);if(!n?.traceId)return{traceId:Le(),sampleRand:Math.random()};const o=function(e,t){const n=dn(t?.sample_rand);if(void 0!==n)return n;const r=dn(t?.sample_rate);return r&&void 0!==e?.parentSampled?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=o.toString());const{traceId:s,parentSpanId:i,parentSampled:a}=n;return{traceId:s,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:o}}function bn(e=Le(),t=De(),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const Sn=1;let wn=!1;function kn(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a,links:c}=On(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a,links:c}}function En(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:On(e).parent_span_id,s=ln(e).scope;return{parent_span_id:o,span_id:r?s?.getPropagationContext().propagationSpanId||De():t,trace_id:n}}function xn(e){const{traceId:t,spanId:n}=e.spanContext();return bn(t,n,Mn(e))}function Tn(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:o})=>({span_id:e,trace_id:t,sampled:n===Sn,attributes:o,...r}))):void 0}function Cn(e){return"number"==typeof e?In(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?In(e.getTime()):xe()}function In(e){return e>9999999999?e/1e3:e}function On(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:s,endTime:i,status:a,links:c}=e;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Cn(o),timestamp:Cn(i)||void 0,status:Rn(a),op:r[Wt],origin:r[zt],links:Tn(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Mn(e){const{traceFlags:t}=e.spanContext();return t===Sn}function Rn(e){if(e&&e.code!==nn)return e.code===rn?"ok":e.message||"unknown_error"}const Pn="_sentryChildSpans",An="_sentryRootSpan";function Ln(e,t){const n=e[An]||e;de(t,An,n),e[Pn]?e[Pn].add(t):de(e,Pn,new Set([t]))}function Dn(e){const t=new Set;return function e(n){if(!t.has(n)&&Mn(n)){t.add(n);const r=n[Pn]?Array.from(n[Pn]):[];for(const t of r)e(t)}}(e),Array.from(t)}function Nn(e){return e[An]||e}function Fn(){const e=He(A());return e.getActiveSpan?e.getActiveSpan():Ae(qe())}function jn(){wn||(re((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")})),wn=!0)}function $n(e,t){e.updateName(t),e.setAttributes({[Bt]:"custom",[Yt]:t})}const Un="_frozenDsc";function Bn(e,t){de(e,Un,t)}function Hn(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||It,release:n.release,public_key:r,trace_id:e};return t.emit("createDsc",o),o}function qn(e,t){const n=t.getPropagationContext();return n.dsc||Hn(n.traceId,e)}function Wn(e){const t=Je();if(!t)return{};const n=Nn(e),r=On(n),o=r.data,s=n.spanContext().traceState,i=s?.get("sentry.sample_rate")??o[Ht]??o[qt];function a(e){return"number"!=typeof i&&"string"!=typeof i||(e.sample_rate=`${i}`),e}const c=n[Un];if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&mn(u);if(l)return a(l);const d=Hn(e.spanContext().traceId,t),p=o[Bt],f=r.description;return"url"!==p&&f&&(d.transaction=f),tn()&&(d.sampled=String(Mn(n)),d.sample_rand=s?.get("sentry.sample_rand")??ln(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}function zn(e){return gn(Wn(e))}function Vn(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(r).length&&(e.tags={...r,...e.tags});Object.keys(o).length&&(e.user={...o,...e.user});Object.keys(s).length&&(e.contexts={...s,...e.contexts});i&&(e.level=i);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:En(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Wn(t),...e.sdkProcessingMetadata};const n=Nn(t),r=On(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function Gn(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:f,span:h}=t;Jn(e,"extra",n),Jn(e,"tags",r),Jn(e,"user",o),Jn(e,"contexts",s),e.sdkProcessingMetadata=Me(e.sdkProcessingMetadata,a,2),i&&(e.level=i),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Jn(e,t,n){e[t]=Me(e[t],n,1)}function Yn(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||_e(),timestamp:t.timestamp||Ee()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;e.environment=e.environment||n||It,!e.release&&r&&(e.release=r);!e.dist&&o&&(e.dist=o);const i=e.request;i?.url&&(i.url=se(i.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=Ft(t);e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.filename&&(e.debug_id=n[e.filename])}))}))}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new Ne;return n.update(t),n}(r,n.captureContext);n.mechanism&&Se(c,n.mechanism);const d=o?o.getEventProcessors():[],p=ze().getScopeData();if(s){Gn(p,s.getScopeData())}if(l){Gn(p,l.getScopeData())}const f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),Vn(c,p);return At([...d,...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};if(e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))})),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:jt(e.data,t,n)}})))},...e.user&&{user:jt(e.user,t,n)},...e.contexts&&{contexts:jt(e.contexts,t,n)},...e.extra&&{extra:jt(e.extra,t,n)}};e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=jt(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:jt(e.data,t,n)}}))));e.contexts?.flags&&r.contexts&&(r.contexts.flags=jt(e.contexts.flags,3,n));return r}(e,i,a):e)))}function Kn(e){if(e)return function(e){return e instanceof Ne||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Xn.includes(e)))}(e)?{captureContext:e}:e}const Xn=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Zn(e,t){return qe().captureException(e,Kn(t))}function Qn(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return qe().captureMessage(e,n,r)}function er(e,t){return qe().captureEvent(e,t)}function tr(e,t){We().setContext(e,t)}function nr(e){We().setExtras(e)}function rr(e,t){We().setExtra(e,t)}function or(e){We().setTags(e)}function sr(e,t){We().setTag(e,t)}function ir(e){We().setUser(e)}function ar(){return We().lastEventId()}async function cr(e){const t=Je();return t?t.flush(e):(M&&oe.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ur(e){const t=Je();return t?t.close(e):(M&&oe.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function lr(){return!!Je()}function dr(e){We().addEventProcessor(e)}function pr(e){const t=We(),n=qe(),{userAgent:r}=P.navigator||{},o=Ie({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),s=t.getSession();return"ok"===s?.status&&Oe(s,{status:"exited"}),fr(),t.setSession(o),o}function fr(){const e=We(),t=qe().getSession()||e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),Oe(e,n)}(t),hr(),e.setSession()}function hr(){const e=We(),t=Je(),n=e.getSession();n&&t&&t.captureSession(n)}function mr(e=!1){e?fr():hr()}const gr=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function _r(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function yr(e){const t=gr.exec(e);if(!t)return void re((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",s="",i="",a=""]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return vr({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function vr(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function br(e){const t="string"==typeof e?yr(e):vr(e);if(t&&function(e){if(!M)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(oe.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(oe.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(oe.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(oe.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}const Sr="7";function wr(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function kr(e,t,n){return t||`${function(e){return`${wr(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const n={sentry_version:Sr};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}(e,n)}`}function Er(e,t=[]){return[e,t]}function xr(e,t){const[n,r]=e;return[n,[...r,t]]}function Tr(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function Cr(e,t){return Tr(e,((e,n)=>t.includes(n)))}function Ir(e){const t=L(P);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function Or(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[Ir(r),e]:r.push("string"==typeof e?Ir(e):e)}for(const e of n){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(jt(n))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}function Mr(e){let t="string"==typeof e?Ir(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse(function(e){const t=L(P);return t.decodePolyfill?t.decodePolyfill(e):(new TextDecoder).decode(e)}(n(e)))}const o=r(),s=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;s.push([e,t?n(t):r()])}return[o,s]}function Rr(e){return[{type:"span"},e]}function Pr(e){const t="string"==typeof e.data?Ir(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Ar={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Lr(e){return Ar[e]}function Dr(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Nr(e,t,n,r){const o=Dr(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n?.sdk);const i=function(e,t,n,r){const o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:_r(r)},...o&&{trace:o}}}(e,o,r,t);delete e.sdkProcessingMetadata;return Er(i,[[{type:s},e]])}const Fr="Not capturing exception because it's already been captured.",jr="Discarded session because of missing or non-string release",$r=Symbol.for("SentryInternalError"),Ur=Symbol.for("SentryDoNotSendEventError");function Br(e){return{message:e,[$r]:!0}}function Hr(e){return{message:e,[Ur]:!0}}function qr(e){return!!e&&"object"==typeof e&&$r in e}function Wr(e){return!!e&&"object"==typeof e&&Ur in e}class zr{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=br(e.dsn):M&&oe.warn("No DSN provided, client will not send events."),this._dsn){const t=kr(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const r=_e();if(we(e))return M&&oe.log(Fr),r;const o={event_id:r,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,r){const o={event_id:_e(),...n},s=H(e)?e:String(e),i=q(e)?this.eventFromMessage(s,t,o):this.eventFromException(e,o);return this._process(i.then((e=>this._captureEvent(e,o,r)))),o.event_id}captureEvent(e,t,n){const r=_e();if(t?.originalException&&we(t.originalException))return M&&oe.log(Fr),r;const o={event_id:r,...t},s=e.sdkProcessingMetadata||{},i=s.capturedSpanScope,a=s.capturedSpanIsolationScope;return this._process(this._captureEvent(e,o,i||n,a)),o.event_id}captureSession(e){this.sendSession(e),Oe(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Mt(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Qe(this,e,this._integrations),t||Ze(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=Nr(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=xr(n,Pr(e));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const{release:t,environment:n=It}=this._options;if("aggregates"in e){const r=e.attrs||{};if(!r.release&&!t)return void(M&&oe.warn(jr));r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return void(M&&oe.warn(jr));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const r=function(e,t,n,r){const o=Dr(n);return Er({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:_r(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t,n=1){if(this._options.sendClientReports){const r=`${e}:${t}`;M&&oe.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(M&&oe.error("Error while sending envelope:",e),e))):(M&&oe.error("Transport disabled"),Mt({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Qe(e,t,n)})),n}(this,e),Ze(this,e)}_updateSessionFromEvent(e,t){let n="fatal"===t.level,r=!1;const o=t.exception?.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(!1===t?.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(Oe(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Pt((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const o=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s?.length&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),Yn(o,e,t,n,this,r).then((e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Ye(n),...e.contexts};const r=qn(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:r,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n=qe(),r=We()){return M&&Vr(e)&&oe.log(`Captured error event \`${tt(e)[0]||"<unknown>"}\``),this._processEvent(e,t,n,r).then((e=>e.event_id),(e=>{M&&(Wr(e)?oe.log(e.message):qr(e)?oe.warn(e.message):oe.warn(e))}))}_processEvent(e,t,n,r){const o=this.getOptions(),{sampleRate:s}=o,i=Gr(e),a=Vr(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===s?void 0:dn(s);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),Rt(Hr(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));const d="replay_event"===c?"replay":c;return this._prepareEvent(e,t,n,r).then((e=>{if(null===e)throw this.recordDroppedEvent("event_processor",d),Hr("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i}=t;let a=n;if(Vr(a)&&o)return o(a,r);if(Gr(a)){if(i){const e=i(function(e){const{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:s,data:i,op:a}=e.contexts?.trace??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:i?.[Kt],exclusive_time:i?.[Xt],measurements:e.measurements,is_segment:!0}}(a));if(e?a=Me(n,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Kt]:c.profile_id},...c.exclusive_time&&{[Xt]:c.exclusive_time}}}},measurements:c.measurements}):jn(),a.spans){const e=[];for(const t of a.spans){const n=i(t);n?e.push(n):(jn(),e.push(t))}a.spans=e}}if(s){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(a,r)}}var c;return a}(0,o,e,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(V(e))return e.then((e=>{if(!W(e)&&null!==e)throw Br(n);return e}),(e=>{throw Br(`${t} rejected with ${e}`)}));if(!W(e)&&null!==e)throw Br(n);return e}(n,u)})).then((o=>{if(null===o){if(this.recordDroppedEvent("before_send",d),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw Hr(`${u} returned \`null\`, will not send event.`)}const s=n.getSession()||r.getSession();if(a&&s&&this._updateSessionFromEvent(s,o),i){const e=(o.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(o.spans?o.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=o.transaction_info;if(i&&c&&o.transaction!==e.transaction){const e="custom";o.transaction_info={...c,source:e}}return this.sendEvent(o,t),o})).then(null,(e=>{if(Wr(e)||qr(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Br(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){M&&oe.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(M&&oe.log("No outcomes to send"));if(!this._dsn)return void(M&&oe.log("No dsn provided, will not send outcomes"));M&&oe.log("Sending outcomes:",e);const t=(n=e,Er((r=this._options.tunnel&&_r(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||Ee(),discarded_events:n}]]));var n,r,o;this.sendEnvelope(t)}}function Vr(e){return void 0===e.type}function Gr(e){return"transaction"===e.type}const Jr={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};const Yr=100;function Kr(e,t=Je(),n=qe()){if(!t)return void(M&&oe.warn("No client available to capture log."));const{_experiments:r,release:o,environment:s}=t.getOptions(),{enableLogs:i=!1,beforeSendLog:a}=r??{};if(!i)return void(M&&oe.warn("logging option not enabled, log will not be captured."));const[,c]=function(e,t){if(!t)return[void 0,void 0];const n=Ae(t),r=n?En(n):Ye(t);return[n?Wn(n):qn(e,t),r]}(t,n),u={...e.attributes};o&&(u["sentry.release"]=o),s&&(u["sentry.environment"]=s);const{sdk:l}=t.getSdkMetadata()??{};l&&(u["sentry.sdk.name"]=l.name,u["sentry.sdk.version"]=l.version);const d=e.message;if(H(d)){const{__sentry_template_string__:e,__sentry_template_values__:t=[]}=d;u["sentry.message.template"]=e,t.forEach(((e,t)=>{u[`sentry.message.parameter.${t}`]=e}))}const p=Ae(n);p&&(u["sentry.trace.parent_span_id"]=p.spanContext().spanId);const f={...e,attributes:u};t.emit("beforeCaptureLog",f);const h=a?a(f):f;if(!h)return t.recordDroppedEvent("before_send","log_item",1),void(M&&oe.warn("beforeSendLog returned null, log will not be captured."));const{level:m,message:g,attributes:_={},severityNumber:y}=h,v={timestamp:xe(),level:m,body:g,trace_id:c?.trace_id,severity_number:y??Jr[m],attributes:Object.keys(_).reduce(((e,t)=>(e[t]=function(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}(_[t]),e)),{})},b=Zr(t);void 0===b?P._sentryClientToLogBufferMap?.set(t,[v]):(P._sentryClientToLogBufferMap?.set(t,[...b,v]),b.length>=Yr&&Xr(t,b)),t.emit("afterCaptureLog",h)}function Xr(e,t){const n=t??Zr(e)??[];if(0===n.length)return;const r=e.getOptions(),o=function(e,t,n,r){const o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=_r(r)),Er(o,[(s=e,[{type:"log",item_count:s.length,content_type:"application/vnd.sentry.items.log+json"},{items:s}])]);var s}(n,r._metadata,r.tunnel,e.getDsn());P._sentryClientToLogBufferMap?.set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function Zr(e){return P._sentryClientToLogBufferMap?.get(e)}function Qr(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function eo(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function to(e,t){const n=oo(e,t),r={type:ao(t),value:co(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function no(e,t,n,r){const o=Je(),s=o?.getOptions().normalizeDepth,i=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),a={__serialized__:$t(t,s)};if(i)return{exception:{values:[to(e,i)]},extra:a};const c={exception:{values:[{type:z(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ho(t,{isUnhandledRejection:r})}]},extra:a};if(n){const t=oo(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function ro(e,t){return{exception:{values:[to(e,t)]}}}function oo(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&so.test(e.message))return 1;return 0}(t),o=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch(e){}return[]}P._sentryClientToLogBufferMap=new WeakMap;const so=/Minified React error #\d+;/i;function io(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ao(e){const t=e?.name;if(!t&&io(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function co(e){const t=e?.message;return io(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function uo(e,t,n,r){const o=po(e,t,n?.syntheticException||void 0,r);return Se(o),o.level="error",n?.event_id&&(o.event_id=n.event_id),Mt(o)}function lo(e,t,n="info",r,o){const s=fo(e,t,r?.syntheticException||void 0,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),Mt(s)}function po(e,t,n,r,o){let s;if($(t)&&t.error){return ro(e,t.error)}if(U(t)||j(t,"DOMException")){const o=t;if("stack"in t)s=ro(e,t);else{const t=o.name||(U(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=fo(e,i,n,r),be(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}if(F(t))return ro(e,t);if(W(t)||z(t)){return s=no(e,t,n,o),Se(s,{synthetic:!0}),s}return s=fo(e,t,n,r),be(s,`${t}`,void 0),Se(s,{synthetic:!0}),s}function fo(e,t,n,r){const o={};if(r&&n){const r=oo(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]}),Se(o,{synthetic:!0})}if(H(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function ho(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(he(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return se(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:se(r,t)}return""}(e),r=t?"promise rejection":"exception";if($(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(z(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}const mo=P;let go=0;function _o(){return go>0}function yo(e,t={}){if(!function(e){return"function"==typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(fe(e))return e}catch(t){return e}const n=function(...n){try{const r=n.map((e=>yo(e,t)));return e.apply(this,r)}catch(e){throw go++,setTimeout((()=>{go--})),Ve((r=>{r.addEventProcessor((e=>(t.mechanism&&(be(e,void 0,void 0),Se(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),Zn(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch{}pe(n,e),de(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch{}return n}class vo extends zr{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};!function(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:R}))),version:R}),e._metadata=o}(t,"browser",["browser"],mo.SENTRY_SDK_SOURCE||"npm"),super(t);const n=this,{sendDefaultPii:r,_experiments:o}=n._options,s=o?.enableLogs;t.sendClientReports&&mo.document&&mo.document.addEventListener("visibilitychange",(()=>{"hidden"===mo.document.visibilityState&&(this._flushOutcomes(),s&&Xr(n))})),s&&(n.on("flush",(()=>{Xr(n)})),n.on("afterCaptureLog",(()=>{n._logFlushIdleTimeout&&clearTimeout(n._logFlushIdleTimeout),n._logFlushIdleTimeout=setTimeout((()=>{Xr(n)}),5e3)}))),r&&(n.on("postprocessEvent",Qr),n.on("beforeSendSession",eo))}eventFromException(e,t){return uo(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return lo(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}const bo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,So={},wo={};function ko(e,t){So[e]=So[e]||[],So[e].push(t)}function Eo(e,t){if(!wo[e]){wo[e]=!0;try{t()}catch(t){M&&oe.error(`Error while instrumenting ${e}`,t)}}}function xo(e,t){const n=e&&So[e];if(n)for(const r of n)try{r(t)}catch(t){M&&oe.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${_t(r)}\nError:`,t)}}function To(e){const t="console";ko(t,e),Eo(t,Co)}function Co(){"console"in P&&te.forEach((function(e){e in P.console&&le(P.console,e,(function(t){return ne[e]=t,function(...t){xo("console",{args:t,level:e});const n=ne[e];n?.apply(P.console,t)}}))}))}function Io(e,t){const n="fetch";ko(n,e),Eo(n,(()=>Oo(void 0,t)))}function Oo(e,t=!1){t&&!Tt()||le(P,"fetch",(function(t){return function(...n){const r=new Error,{method:o,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:Po(t),method:Ro(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Po(t),method:Ro(t,"method")?String(t.method).toUpperCase():"GET"}}(n),i={args:n,fetchData:{method:o,url:s},startTimestamp:1e3*xe(),virtualError:r,headers:Ao(n)};return e||xo("fetch",{...i}),t.apply(P,n).then((async t=>(e?e(t):xo("fetch",{...i,endTimestamp:1e3*xe(),response:t}),t)),(e=>{if(xo("fetch",{...i,endTimestamp:1e3*xe(),error:e}),F(e)&&void 0===e.stack&&(e.stack=r.stack,de(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(i.fetchData.url);e.message=`${e.message} (${t.host})`}catch{}throw e}))}}))}function Mo(e){let t;try{t=e.clone()}catch{return}!async function(e,t){if(e?.body){const n=e.body,r=n.getReader(),o=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),9e4);let s=!0;for(;s;){let e;try{e=setTimeout((()=>{n.cancel().then(null,(()=>{}))}),5e3);const{done:o}=await r.read();clearTimeout(e),o&&(t(),s=!1)}catch(e){s=!1}finally{clearTimeout(e)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,(()=>{}))}}(t,(()=>{xo("fetch-body-resolved",{endTimestamp:1e3*xe(),response:e})}))}function Ro(e,t){return!!e&&"object"==typeof e&&!!e[t]}function Po(e){return"string"==typeof e?e:e?Ro(e,"url")?e.url:e.toString?e.toString():"":""}function Ao(e){const[t,n]=e;try{if("object"==typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(Y(t))return new Headers(t.headers)}catch{}}const Lo=100;function Do(e,t){const n=Je(),r=We();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=Lo}=n.getOptions();if(s<=0)return;const i={timestamp:Ee(),...e},a=o?re((()=>o(i,t))):i;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,s))}function No(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function Fo(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}const jo="thismessage:/";function $o(e){return"isRelative"in e}function Uo(e){if($o(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Bo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Ho(e){return e.split(/[?#]/,1)[0]}const qo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Wo="9.19.0",zo=globalThis;function Vo(){return Go(zo),zo}function Go(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Wo,t[Wo]=t[Wo]||{}}function Jo(e,t,n=zo){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[Wo]=r[Wo]||{};return o[e]||(o[e]=t())}const Yo=["debug","info","warn","error","log","assert","trace"],Ko={};function Xo(e){if(!("console"in zo))return e();const t=zo.console,n={},r=Object.keys(Ko);r.forEach((e=>{const r=Ko[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Zo=Jo("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return qo?Yo.forEach((n=>{t[n]=(...t)=>{e&&Xo((()=>{zo.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Yo.forEach((e=>{t[e]=()=>{}})),t}));const Qo="<anonymous>";function es(e){try{return e&&"function"==typeof e&&e.name||Qo}catch(e){return Qo}}const ts={},ns={};function rs(e,t){ts[e]=ts[e]||[],ts[e].push(t)}function os(e,t){if(!ns[e]){ns[e]=!0;try{t()}catch(t){qo&&Zo.error(`Error while instrumenting ${e}`,t)}}}function ss(e,t){const n=e&&ts[e];if(n)for(const r of n)try{r(t)}catch(t){qo&&Zo.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${es(r)}\nError:`,t)}}function is(e,t,n){if(!(t in e))return;const r=e[t];if("function"!=typeof r)return;const o=n(r);"function"==typeof o&&function(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,as(e,"__sentry_original__",t)}catch(e){}}(o,r);try{e[t]=o}catch{qo&&Zo.log(`Failed to replace method "${t}" in object`,e)}}function as(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){qo&&Zo.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function cs(e=function(){const e=zo;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}const us=zo,ls=1e3;let ds,ps,fs;function hs(e){rs("dom",e),os("dom",ms)}function ms(){if(!us.document)return;const e=ss.bind(null,"dom"),t=gs(e,!0);us.document.addEventListener("click",t,!1),us.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=us,r=n[t]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(is(r,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},s=r[n]=r[n]||{refCount:0};if(!s.handler){const r=gs(e);s.handler=r,t.call(this,n,r,o)}s.refCount++}catch(e){}return t.call(this,n,r,o)}})),is(r,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},o=n[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function gs(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t?.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;as(n,"_sentryCaptured",!0),r&&!r._sentryId&&as(r,"_sentryId",cs());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==ps)return!1;try{if(!e.target||e.target._sentryId!==fs)return!1}catch(e){}return!0}(n)){e({event:n,name:o,global:t}),ps=n.type,fs=r?r._sentryId:void 0}clearTimeout(ds),ds=us.setTimeout((()=>{fs=void 0,ps=void 0}),ls)}}const _s=1e3;function ys(){return Date.now()/_s}const vs=function(){const{performance:e}=zo;if(!e?.now)return ys;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/_s}();let bs;function Ss(){return bs||(bs=function(){const{performance:e}=zo;if(!e?.now)return[void 0,"none"];const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing?.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}()),bs[0]}const ws=Object.prototype.toString;function ks(e,t){return ws.call(e)===`[object ${t}]`}function Es(e){return ks(e,"String")}function xs(e){return ks(e,"Object")}const Ts="__sentry_xhr_v3__";function Cs(e){rs("xhr",e),os("xhr",Is)}function Is(){if(!us.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,o=1e3*vs(),s=Es(n[0])?n[0].toUpperCase():void 0,i=function(e){if(Es(e))return e;try{return e.toString()}catch{}return}(n[1]);if(!s||!i)return e.apply(t,n);t[Ts]={method:s,url:i,request_headers:{}},"POST"===s&&i.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[Ts];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}ss("xhr",{endTimestamp:1e3*vs(),startTimestamp:o,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,s=t[Ts];return s&&Es(r)&&Es(o)&&(s.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[Ts];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return ss("xhr",{startTimestamp:1e3*vs(),xhr:t}),e.apply(t,n)}})}const Os=zo;function Ms(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}let Rs;function Ps(e){const t="history";rs(t,e),os(t,As)}function As(){function e(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const r=Rs,o=String(n);if(Rs=o,r===o)return e.apply(this,t);ss("history",{from:r,to:o})}return e.apply(this,t)}}us.addEventListener("popstate",(()=>{const e=us.location.href,t=Rs;if(Rs=e,t===e)return;ss("history",{from:t,to:e})})),"history"in Os&&Os.history&&(is(us.history,"pushState",e),is(us.history,"replaceState",e))}const Ls=1024,Ds=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&To(function(e){return function(t){if(Je()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:No(t.level),message:ae(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${ae(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Do(n,{input:t.args,level:t.level})}}(e)),t.dom&&hs(function(e,t){return function(n){if(Je()!==e)return;let r,o,s="object"==typeof t?t.serializeAttribute:void 0,i="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;i&&i>Ls&&(bo&&oe.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=Ls),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Z(t,{keyAttrs:s,maxStringLength:i}),o=function(e){if(!K.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}(t)}catch(e){r="<unknown>"}if(0===r.length)return;const a={category:`ui.${n.name}`,message:r};o&&(a.data={"ui.component_name":o}),Do(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Cs(function(e){return function(t){if(Je()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[Ts];if(!n||!r||!o)return;const{method:s,url:i,status_code:a,body:c}=o,u={method:s,url:i,status_code:a},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:u,type:"http",level:Fo(a)};e.emit("beforeOutgoingRequestBreadcrumb",d,l),Do(d,l)}}(e)),t.fetch&&Io(function(e){return function(t){if(Je()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const o=t.fetchData,s={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},i={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",i,s),Do(i,s)}else{const o=t.response,s={...t.fetchData,status_code:o?.status};t.fetchData.request_body_size,t.fetchData.response_body_size;const i={input:t.args,response:o,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:s,type:"http",level:Fo(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",a,i),Do(a,i)}}}(e)),t.history&&Ps(function(e){return function(t){if(Je()!==e)return;let n=t.from,r=t.to;const o=Bo(mo.location.href);let s=n?Bo(n):void 0;const i=Bo(r);s?.path||(s=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),Do({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){Je()===e&&Do({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ve(t)},{event:t})}}(e))}}};const Ns=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Fs=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&le(mo,"setTimeout",js),t.setInterval&&le(mo,"setInterval",js),t.requestAnimationFrame&&le(mo,"requestAnimationFrame",$s),t.XMLHttpRequest&&"XMLHttpRequest"in mo&&le(XMLHttpRequest.prototype,"send",Us);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Ns).forEach(Bs)}}}};function js(e){return function(...t){const n=t[0];return t[0]=yo(n,{mechanism:{data:{function:_t(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function $s(e){return function(t){return e.apply(this,[yo(t,{mechanism:{data:{function:"requestAnimationFrame",handler:_t(e)},handled:!1,type:"instrument"}})])}}function Us(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&le(n,e,(function(t){const n={mechanism:{data:{function:e,handler:_t(t)},handled:!1,type:"instrument"}},r=fe(t);return r&&(n.mechanism.data.handler=_t(r)),yo(t,n)}))})),e.apply(this,t)}}function Bs(e){const t=mo,n=t[e]?.prototype;n?.hasOwnProperty?.("addEventListener")&&(le(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=yo(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:_t(r),target:e},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[n,yo(r,{mechanism:{data:{function:"addEventListener",handler:_t(r),target:e},handled:!1,type:"instrument"}}),o])}})),le(n,"removeEventListener",(function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(e){}return e.call(this,t,n,r)}})))}const Hs=()=>({name:"BrowserSession",setupOnce(){void 0!==mo.document?(pr({ignoreDuration:!0}),mr(),Ps((({from:e,to:t})=>{void 0!==e&&e!==t&&(pr({ignoreDuration:!0}),mr())}))):bo&&oe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}});let qs=null;function Ws(e){const t="error";ko(t,e),Eo(t,zs)}function zs(){qs=P.onerror,P.onerror=function(e,t,n,r,o){return xo("error",{column:r,error:o,line:n,msg:e,url:t}),!!qs&&qs.apply(this,arguments)},P.onerror.__SENTRY_INSTRUMENTED__=!0}let Vs=null;function Gs(e){const t="unhandledrejection";ko(t,e),Eo(t,Js)}function Js(){Vs=P.onunhandledrejection,P.onunhandledrejection=function(e){return xo("unhandledrejection",e),!Vs||Vs.apply(this,arguments)},P.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ys=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Ws((t=>{const{stackParser:n,attachStacktrace:r}=Xs();if(Je()!==e||_o())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=B(t)&&t.length>0?t:ee();0===c.length&&c.push({colno:u,filename:d,function:dt,in_app:!0,lineno:l});return e}(po(n,c||o,void 0,r,!1),s,i,a);u.level="error",er(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),Ks("onerror")),t.onunhandledrejection&&(!function(e){Gs((t=>{const{stackParser:n,attachStacktrace:r}=Xs();if(Je()!==e||_o())return;const o=function(e){if(q(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),s=q(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:po(n,o,void 0,r,!0);s.level="error",er(s,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Ks("onunhandledrejection"))}}};function Ks(e){bo&&oe.log(`Global Handler attached: ${e}`)}function Xs(){const e=Je();return e?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Zs=()=>({name:"HttpContext",preprocessEvent(e){if(!mo.navigator&&!mo.location&&!mo.document)return;const t=e.request?.url||ee(),{referrer:n}=mo.document||{},{userAgent:r}=mo.navigator||{},o={...e.request?.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}});function Qs(e,t,n,r,o,s){if(!o.exception?.values||!s||!G(s.originalException,Error))return;const i=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;i&&(o.exception.values=ei(e,t,r,s.originalException,n,o.exception.values,i,0))}function ei(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(G(r[o],Error)){ti(i,a);const s=e(t,r[o]),u=c.length;ni(s,o,u,a),c=ei(e,t,n,r[o],o,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(G(r,Error)){ti(i,a);const u=e(t,r),l=c.length;ni(u,`errors[${s}]`,l,a),c=ei(e,t,n,r,o,[u,...c],u,l)}})),c}function ti(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function ni(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const ri=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){Qs(to,o.getOptions().stackParser,n,t,e,r)}}};function oi(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?dt:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const si=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ii=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ai=/\((\S*)(?::(\d+))(?::(\d+))\)/,ci=[30,e=>{const t=si.exec(e);if(t){const[,e,n,r]=t;return oi(e,dt,+n,+r)}const n=ii.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=ai.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=bi(n[1]||dt,n[2]);return oi(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],ui=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,li=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,di=[50,e=>{const t=ui.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=li.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||dt;return[n,e]=bi(n,e),oi(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],pi=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,fi=[40,e=>{const t=pi.exec(e);return t?oi(t[2],t[1]||dt,+t[3],t[4]?+t[4]:void 0):void 0}],hi=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,mi=[10,e=>{const t=hi.exec(e);return t?oi(t[2],t[3]||dt,+t[1]):void 0}],gi=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,_i=[20,e=>{const t=gi.exec(e);return t?oi(t[5],t[3]||t[4]||dt,+t[1],+t[2]):void 0}],yi=[ci,di],vi=ht(...yi),bi=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:dt,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Si=Symbol.for("SentryBufferFullError");function wi(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return Rt(Si);const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Pt(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Mt(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}const ki=6e4;function Ei(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?ki:r-t}const xi=64;function Ti(e,t,n=wi(e.bufferSize||xi)){let r={};return{send:function(o){const s=[];if(Tr(o,((t,n)=>{const o=Lr(n);!function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,o)?s.push(t):e.recordDroppedEvent("ratelimit_backoff",o)})),0===s.length)return Mt({});const i=Er(o[0],s),a=t=>{Tr(i,((n,r)=>{e.recordDroppedEvent(t,Lr(r))}))};return n.add((()=>t({body:Or(i)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&M&&oe.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+Ei(i,r):429===t&&(o.all=r+6e4);return o}(r,e),e)),(e=>{throw a("network_error"),M&&oe.error("Encountered error running transport request:",e),e})))).then((e=>e),(e=>{if(e===Si)return M&&oe.error("Skipped sending event because buffer is full."),a("queue_overflow"),Mt({});throw e}))},flush:e=>n.drain(e)}}const Ci="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ii={};function Oi(e){const t=Ii[e];if(t)return t;let n=us[e];if(Ms(n))return Ii[e]=n.bind(us);const r=us.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;o?.[e]&&(n=o[e]),r.head.removeChild(t)}catch(t){Ci&&Zo.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?Ii[e]=n.bind(us):n}function Mi(e){Ii[e]=void 0}function Ri(...e){return Oi("setTimeout")(...e)}function Pi(e,t=Oi("fetch")){let n=0,r=0;return Ti(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Mi("fetch"),Rt("No fetch implementation available");try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Mi("fetch"),n-=s,r--,Rt(e)}}))}function Ai(e){return[ot(),ut(),Fs(),Ds(),Ys(),ri(),vt(),Zs(),Hs()]}function Li(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const r=n;void 0!==e[r]&&(t[r]=e[r])}return t}function Di(e={}){const t=function(e={}){return{defaultIntegrations:Ai(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:mo.SENTRY_RELEASE?.id,sendClientReports:!0,...Li(e)}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==mo.window&&mo;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t?.runtime?.id,r=ee()||"",o=!!n&&mo===mo.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),s=void 0!==e.nw;return!!n&&!o&&!s}())return void(bo&&re((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")})));bo&&!Et()&&oe.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...t,stackParser:(r=t.stackParser||vi,Array.isArray(r)?ht(...r):r),integrations:Xe(t),transport:t.transport||Pi};var r;return function(e,t){!0===t.debug&&(M?oe.enable():re((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),qe().update(t.initialScope);const n=new e(t);return Ct(n),n.init(),n}(vo,n)}function Ni(e={}){if(!mo.document)return void(bo&&oe.error("Global document not defined in showReportDialog call"));const t=qe(),n=t.getClient(),r=n?.getDsn();if(!r)return void(bo&&oe.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=ar();t&&(e.eventId=t)}const o=mo.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=function(e,t){const n=br(e);if(!n)return"";const r=`${wr(n)}embed/error-page/`;let o=`dsn=${_r(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(o+=`&name=${encodeURIComponent(e.name)}`),e.email&&(o+=`&email=${encodeURIComponent(e.email)}`)}else o+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${o}`}(r,e),e.onLoad&&(o.onload=e.onLoad);const{onClose:s}=e;if(s){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{s()}finally{mo.removeEventListener("message",e)}};mo.addEventListener("message",e)}const i=mo.document.head||mo.document.body;i?i.appendChild(o):bo&&oe.error("Not injecting report dialog. No injection point found in HTML")}function Fi(){}function ji(e){e()}const $i=new Map,Ui=new Set;function Bi(e,t){return function(e){if(P._sentryModuleMetadata)for(const t of Object.keys(P._sentryModuleMetadata)){const n=P._sentryModuleMetadata[t];if(Ui.has(t))continue;Ui.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){$i.set(e.filename,n);break}}}(e),$i.get(t)}function Hi(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=Bi(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}function qi(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}const Wi=e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{Tr(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(qi(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;Hi(e.getOptions().stackParser,t)}))},processEvent(t){const n=function(e){const t=yt(e);if(!t)return;return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(zi))).map((e=>e.slice(zi.length))):[]))}(t);if(n){const r=n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))));if(r){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}});const zi="_sentryBundlerPluginAppKey:",Vi=globalThis,Gi="9.19.0";function Ji(){return Yi(Vi),Vi}function Yi(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Gi,t[Gi]=t[Gi]||{}}function Ki(e,t,n=Vi){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[Gi]=r[Gi]||{};return o[e]||(o[e]=t())}function Xi(e=function(){const e=Vi;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}const Zi=1e3;function Qi(){return Date.now()/Zi}const ea=function(){const{performance:e}=Vi;if(!e?.now)return Qi;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Zi}();function ta(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ea(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Xi()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function na(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=na(r[e],t[e],n-1));return r}const ra="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,oa=["debug","info","warn","error","log","assert","trace"],sa={};const ia=Ki("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return ra?oa.forEach((n=>{t[n]=(...t)=>{e&&function(e){if(!("console"in Vi))return e();const t=Vi.console,n={},r=Object.keys(sa);r.forEach((e=>{const r=sa[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}((()=>{Vi.console[n](`Sentry Logger [${n}]:`,...t)}))}})):oa.forEach((e=>{t[e]=()=>{}})),t}));function aa(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){ra&&ia.log(`Failed to add non-enumerable property "${t}" to object`,e)}}const ca="_sentrySpan";function ua(e,t){t?aa(e,ca,t):delete e[ca]}function la(e){return e[ca]}const da=Object.prototype.toString;function pa(e,t){return da.call(e)===`[object ${t}]`}function fa(e){return pa(e,"Object")}function ha(){return Xi()}function ma(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}class ga{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ha(),sampleRand:Math.random()}}clone(){const e=new ga;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ua(e,la(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ta(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof ga?t.getScopeData():fa(t)?e:void 0,{tags:r,extra:o,user:s,contexts:i,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...i},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ua(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ha(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Qi(),...e,message:e.message?ma(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:la(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=na(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||Xi();if(!this._client)return ia.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||Xi();if(!this._client)return ia.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||Xi();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(ia.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class _a{constructor(e,t){let n,r;n=e||new ga,r=t||new ga,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return r=n,Boolean(r?.then&&"function"==typeof r.then)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n);var r}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ya(){const e=Yi(Ji());return e.stack=e.stack||new _a(Ki("defaultCurrentScope",(()=>new ga)),Ki("defaultIsolationScope",(()=>new ga)))}function va(e){return ya().withScope(e)}function ba(e,t){const n=ya();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function Sa(e){return ya().withScope((()=>e(ya().getIsolationScope())))}function wa(e){const t=Yi(e);return t.acs?t.acs:{withIsolationScope:Sa,withScope:va,withSetScope:ba,withSetIsolationScope:(e,t)=>Sa(t),getCurrentScope:()=>ya().getScope(),getIsolationScope:()=>ya().getIsolationScope()}}function ka(){return wa(Ji()).getCurrentScope()}function Ea(){return ka().getClient()}const xa=Vi;function Ta(){try{return xa.document.location.href}catch(e){return""}}function Ca(e){const t=Ea();t?t.addIntegration(e):ra&&ia.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)}var Ia=n(606);function Oa(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call(void 0!==Ia?Ia:0)}function Ma(){return"undefined"!=typeof window&&(!Oa()||function(){const e=Vi.process;return"renderer"===e?.type}())}const Ra=Vi,Pa=Ra.document,Aa=Ra.navigator,La="Report a Bug",Da="widget",Na=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=Ea();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&ka().setTags(e.tags);const r=function(e,t={},n=ka()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,l={contexts:{feedback:{contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},d=n?.getClient()||Ea();return d&&d.emit("beforeSendFeedback",l,t),n.captureEvent(l,t)}({source:"api",url:Ta(),...e},t);return new Promise(((e,t)=>{const o=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3),s=n.on("afterSendEvent",((n,i)=>{if(n.event_id===r)return clearTimeout(o),s(),i&&"number"==typeof i.statusCode&&i.statusCode>=200&&i.statusCode<300?e(r):i&&"number"==typeof i.statusCode&&0===i.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):i&&"number"==typeof i.statusCode&&403===i.statusCode?t("Unable to send Feedback. This could be because this domain is not in your list of allowed domains."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},Fa="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function ja(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:n=>{t.onSubmitSuccess?.(n),e.onSubmitSuccess?.(n)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function $a(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const Ua=20,Ba="http://www.w3.org/2000/svg";function Ha({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=Pa.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||La,o.appendChild(function(){const e=e=>Ra.document.createElementNS(Ba,e),t=$a(e("svg"),{width:`${Ua}`,height:`${Ua}`,viewBox:`0 0 ${Ua} ${Ua}`,fill:"var(--actor-color, var(--foreground))"}),n=$a(e("g"),{clipPath:"url(#clip0_57_80)"}),r=$a(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=$a(e("clipPath"),{id:"clip0_57_80"}),i=$a(e("rect"),{width:`${Ua}`,height:`${Ua}`,fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),t}()),e){const t=Pa.createElement("span");t.appendChild(Pa.createTextNode(e)),o.appendChild(t)}const s=function(e){const t=Pa.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}(r);return{el:o,appendToDom(){n.appendChild(s),n.appendChild(o)},removeFromDom(){o.remove(),s.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const qa="rgba(88, 74, 192, 1)",Wa={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:qa,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},za={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:qa,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Va(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}const Ga=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:r="sentry-feedback",autoInject:o=!0,showBranding:s=!0,isEmailRequired:i=!1,isNameRequired:a=!1,showEmail:c=!0,showName:u=!0,enableScreenshot:l=!0,useSentryUser:d={email:"email",name:"username"},tags:p,styleNonce:f,scriptNonce:h,colorScheme:m="system",themeLight:g={},themeDark:_={},addScreenshotButtonLabel:y="Add a screenshot",cancelButtonLabel:v="Cancel",confirmButtonLabel:b="Confirm",emailLabel:S="Email",emailPlaceholder:w="your.email@example.org",formTitle:k="Report a Bug",isRequiredLabel:E="(required)",messageLabel:x="Description",messagePlaceholder:T="What's the bug? What did you expect?",nameLabel:C="Name",namePlaceholder:I="Your Name",removeScreenshotButtonLabel:O="Remove screenshot",submitButtonLabel:M="Send Bug Report",successMessageText:R="Thank you for your report!",triggerLabel:P=La,triggerAriaLabel:A="",onFormOpen:L,onFormClose:D,onSubmitSuccess:N,onSubmitError:F,onFormSubmitted:j}={})=>{const $={id:r,autoInject:o,showBranding:s,isEmailRequired:i,isNameRequired:a,showEmail:c,showName:u,enableScreenshot:l,useSentryUser:d,tags:p,styleNonce:f,scriptNonce:h,colorScheme:m,themeDark:_,themeLight:g,triggerLabel:P,triggerAriaLabel:A,cancelButtonLabel:v,submitButtonLabel:M,confirmButtonLabel:b,formTitle:k,emailLabel:S,emailPlaceholder:w,messageLabel:x,messagePlaceholder:T,nameLabel:C,namePlaceholder:I,successMessageText:R,isRequiredLabel:E,addScreenshotButtonLabel:y,removeScreenshotButtonLabel:O,onFormClose:D,onFormOpen:L,onSubmitError:F,onSubmitSuccess:N,onFormSubmitted:j};let U=null,B=[];const H=e=>{if(!U){const t=Pa.createElement("div");t.id=String(e.id),Pa.body.appendChild(t),U=t.attachShadow({mode:"open"}),U.appendChild(function({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=Pa.createElement("style");return o.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${Va("dark"===e?{...za,...t}:{...Wa,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${Va({...za,...t})}\n  }\n}`:""}\n}\n`,r&&o.setAttribute("nonce",r),o}(e))}return U},q=async r=>{const o=r.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Aa.userAgent)||/Macintosh/i.test(Aa.userAgent)&&Aa.maxTouchPoints&&Aa.maxTouchPoints>1||!isSecureContext);let s,i;try{s=(t?t():await e("feedbackModalIntegration",h))(),Ca(s)}catch{throw Fa&&ia.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const t=o?n?n():await e("feedbackScreenshotIntegration",h):void 0;t&&(i=t(),Ca(i))}catch{Fa&&ia.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const a=s.createDialog({options:{...r,onFormClose:()=>{a?.close(),r.onFormClose?.()},onFormSubmitted:()=>{a?.close(),r.onFormSubmitted?.()}},screenshotIntegration:i,sendFeedback:Na,shadow:H(r)});return a},W=(e,t={})=>{const n=ja($,t),r="string"==typeof e?Pa.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)throw Fa&&ia.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let o=null;const s=async()=>{o||(o=await q({...n,onFormSubmitted:()=>{o?.removeFromDom(),n.onFormSubmitted?.()}})),o.appendToDom(),o.open()};r.addEventListener("click",s);const i=()=>{B=B.filter((e=>e!==i)),o?.removeFromDom(),o=null,r.removeEventListener("click",s)};return B.push(i),i},z=(e={})=>{const t=ja($,e),n=H(t),r=Ha({triggerLabel:t.triggerLabel,triggerAriaLabel:t.triggerAriaLabel,shadow:n,styleNonce:f});return W(r.el,{...t,onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}}),r};return{name:"Feedback",setupOnce(){Ma()&&$.autoInject&&("loading"===Pa.readyState?Pa.addEventListener("DOMContentLoaded",(()=>z().appendToDom())):z().appendToDom())},attachTo:W,createWidget(e={}){const t=z(ja($,e));return t.appendToDom(),t},createForm:async(e={})=>q(ja($,e)),remove(){U&&(U.parentElement?.remove(),U=null),B.forEach((e=>e())),B=[]}}};function Ja(){const e=Ea();return e?.getIntegrationByName("Feedback")}var Ya,Ka,Xa,Za,Qa,ec,tc,nc={},rc=[],oc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,sc=Array.isArray;function ic(e,t){for(var n in t)e[n]=t[n];return e}function ac(e){var t=e.parentNode;t&&t.removeChild(e)}function cc(e,t,n){var r,o,s,i={};for(s in t)"key"==s?r=t[s]:"ref"==s?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?Ya.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===i[s]&&(i[s]=e.defaultProps[s]);return uc(e,i,r,o,null)}function uc(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++Xa:o,__i:-1,__u:0};return null==o&&null!=Ka.vnode&&Ka.vnode(s),s}function lc(e){return e.children}function dc(e,t){this.props=e,this.context=t}function pc(e,t){if(null==t)return e.__?pc(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?pc(e):null}function fc(e,t,n){var r,o=e.__v,s=o.__e,i=e.__P;if(i)return(r=ic({},o)).__v=o.__v+1,Ka.vnode&&Ka.vnode(r),Ec(i,r,o,e.__n,void 0!==i.ownerSVGElement,32&o.__u?[s]:null,t,null==s?pc(o):s,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&hc(r),r}function hc(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return hc(e)}}function mc(e){(!e.__d&&(e.__d=!0)&&Za.push(e)&&!gc.__r++||Qa!==Ka.debounceRendering)&&((Qa=Ka.debounceRendering)||ec)(gc)}function gc(){var e,t,n,r=[],o=[];for(Za.sort(tc);e=Za.shift();)e.__d&&(n=Za.length,t=fc(e,r,o)||t,0===n||Za.length>n?(xc(r,t,o),o.length=r.length=0,t=void 0,Za.sort(tc)):t&&Ka.__c&&Ka.__c(t,rc));t&&xc(r,t,o),gc.__r=0}function _c(e,t,n,r,o,s,i,a,c,u,l){var d,p,f,h,m,g=r&&r.__k||rc,_=t.length;for(n.__d=c,function(e,t,n){var r,o,s,i,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(o=e.__k[r]=null==(o=t[r])||"boolean"==typeof o||"function"==typeof o?null:"string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?uc(null,o,null,null,o):sc(o)?uc(lc,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?uc(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)?(o.__=e,o.__b=e.__b+1,a=vc(o,n,i=r+d,l),o.__i=a,s=null,-1!==a&&(l--,(s=n[a])&&(s.__u|=131072)),null==s||null===s.__v?(-1==a&&d--,"function"!=typeof o.type&&(o.__u|=65536)):a!==i&&(a===i+1?d++:a>i?l>c-i?d+=a-i:d--:d=a<i&&a==i-1?a-i:0,a!==r+d&&(o.__u|=65536))):(s=n[r])&&null==s.key&&s.__e&&(s.__e==e.__d&&(e.__d=pc(s)),Ic(s,s,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(s=n[r])&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=pc(s)),Ic(s,s))}(n,t,g),c=n.__d,d=0;d<_;d++)null!=(f=n.__k[d])&&"boolean"!=typeof f&&"function"!=typeof f&&(p=-1===f.__i?nc:g[f.__i]||nc,f.__i=d,Ec(e,f,p,o,s,i,a,c,u,l),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Cc(p.ref,null,f),l.push(f.ref,f.__c||h,f)),null==m&&null!=h&&(m=h),65536&f.__u||p.__k===f.__k?c=yc(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=m}function yc(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=yc(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function vc(e,t,n,r){var o=e.key,s=e.type,i=n-1,a=n+1,c=t[n];if(null===c||c&&o==c.key&&s===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&!(131072&c.__u)&&o==c.key&&s===c.type)return i;i--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&o==c.key&&s===c.type)return a;a++}}return-1}function bc(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||oc.test(t)?n:n+"px"}function Sc(e,t,n,r,o){var s;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||bc(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||bc(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?kc:wc,s)):e.removeEventListener(t,s?kc:wc,s);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function wc(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Ka.event?Ka.event(e):e)}}function kc(e){if(this.l)return this.l[e.type+!0](Ka.event?Ka.event(e):e)}function Ec(e,t,n,r,o,s,i,a,c,u){var l,d,p,f,h,m,g,_,y,v,b,S,w,k,E,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(l=Ka.__b)&&l(t);e:if("function"==typeof x)try{if(_=t.props,y=(l=x.contextType)&&r[l.__c],v=l?y?y.props.value:l.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,v):(t.__c=d=new dc(_,v),d.constructor=x,d.render=Oc),y&&y.sub(d),d.props=_,d.state||(d.state={}),d.context=v,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=ic({},d.__s)),ic(d.__s,x.getDerivedStateFromProps(_,d.__s))),f=d.props,h=d.state,d.__v=t,p)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,v)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),b=0;b<d._sb.length;b++)d.__h.push(d._sb[b]);d._sb=[],d.__h.length&&i.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,v),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,h,m)}))}if(d.context=v,d.props=_,d.__P=e,d.__e=!1,S=Ka.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do{d.__d=!1,S&&S(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=ic(ic({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(m=d.getSnapshotBeforeUpdate(f,h)),_c(e,sc(E=null!=l&&l.type===lc&&null==l.key?l.props.children:l)?E:[E],t,n,r,o,s,i,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&i.push(d),g&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=s?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),Ka.__e(e,t,n)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Tc(n.__e,t,n,r,o,s,i,c,u);(l=Ka.diffed)&&l(t)}function xc(e,t,n){for(var r=0;r<n.length;r++)Cc(n[r],n[++r],n[++r]);Ka.__c&&Ka.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Ka.__e(e,t.__v)}}))}function Tc(e,t,n,r,o,s,i,a,c){var u,l,d,p,f,h,m,g=n.props,_=t.props,y=t.type;if("svg"===y&&(o=!0),null!=s)for(u=0;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!y&&(y?f.localName===y:3===f.nodeType)){e=f,s[u]=null;break}if(null==e){if(null===y)return document.createTextNode(_);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,_.is&&_),s=null,a=!1}if(null===y)g===_||a&&e.data===_||(e.data=_);else{if(s=s&&Ya.call(e.childNodes),g=n.props||nc,!a&&null!=s)for(g={},u=0;u<e.attributes.length;u++)g[(f=e.attributes[u]).name]=f.value;for(u in g)f=g[u],"children"==u||("dangerouslySetInnerHTML"==u?d=f:"key"===u||u in _||Sc(e,u,null,f,o));for(u in _)f=_[u],"children"==u?p=f:"dangerouslySetInnerHTML"==u?l=f:"value"==u?h=f:"checked"==u?m=f:"key"===u||a&&"function"!=typeof f||g[u]===f||Sc(e,u,f,g[u],o);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),_c(e,sc(p)?p:[p],t,n,r,o&&"foreignObject"!==y,s,i,s?s[0]:n.__k&&pc(n,0),a,c),null!=s)for(u=s.length;u--;)null!=s[u]&&ac(s[u]);a||(u="value",void 0!==h&&(h!==e[u]||"progress"===y&&!h||"option"===y&&h!==g[u])&&Sc(e,u,h,g[u],!1),u="checked",void 0!==m&&m!==e[u]&&Sc(e,u,m,g[u],!1))}return e}function Cc(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){Ka.__e(e,n)}}function Ic(e,t,n){var r,o;if(Ka.unmount&&Ka.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Cc(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){Ka.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ic(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||ac(e.__e),e.__=e.__e=e.__d=void 0}function Oc(e,t,n){return this.constructor(e,n)}Ya=rc.slice,Ka={__e:function(e,t,n,r){for(var o,s,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&null!=s.getDerivedStateFromError&&(o.setState(s.getDerivedStateFromError(e)),i=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),i=o.__d),i)return o.__E=o}catch(t){e=t}throw e}},Xa=0,dc.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=ic({},this.state),"function"==typeof e&&(e=e(ic({},n),this.props)),e&&ic(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),mc(this))},dc.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),mc(this))},dc.prototype.render=lc,Za=[],ec="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tc=function(e,t){return e.__v.__b-t.__v.__b},gc.__r=0;var Mc,Rc,Pc,Ac,Lc=0,Dc=[],Nc=[],Fc=Ka,jc=Fc.__b,$c=Fc.__r,Uc=Fc.diffed,Bc=Fc.__c,Hc=Fc.unmount,qc=Fc.__;function Wc(e,t){Fc.__h&&Fc.__h(Rc,e,Lc||t),Lc=0;var n=Rc.__H||(Rc.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Nc}),n.__[e]}function zc(e){return Lc=1,Vc(nu,e)}function Vc(e,t,n){var r=Wc(Mc++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):nu(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Rc,!Rc.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var i=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),!(!i&&r.__c.props===e)&&(!s||s.call(this,e,t,n))};Rc.u=!0;var s=Rc.shouldComponentUpdate,i=Rc.componentWillUpdate;Rc.componentWillUpdate=function(e,t,n){if(this.__e){var r=s;s=void 0,o(e,t,n),s=r}i&&i.call(this,e,t,n)},Rc.shouldComponentUpdate=o}return r.__N||r.__}function Gc(e,t){var n=Wc(Mc++,4);!Fc.__s&&tu(n.__H,t)&&(n.__=e,n.i=t,Rc.__h.push(n))}function Jc(e,t){var n=Wc(Mc++,7);return tu(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Yc(e,t){return Lc=8,Jc((function(){return e}),t)}function Kc(){for(var e;e=Dc.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Qc),e.__H.__h.forEach(eu),e.__H.__h=[]}catch(t){e.__H.__h=[],Fc.__e(t,e.__v)}}Fc.__b=function(e){Rc=null,jc&&jc(e)},Fc.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),qc&&qc(e,t)},Fc.__r=function(e){$c&&$c(e),Mc=0;var t=(Rc=e.__c).__H;t&&(Pc===Rc?(t.__h=[],Rc.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Nc,e.__N=e.i=void 0}))):(t.__h.forEach(Qc),t.__h.forEach(eu),t.__h=[],Mc=0)),Pc=Rc},Fc.diffed=function(e){Uc&&Uc(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Dc.push(t)&&Ac===Fc.requestAnimationFrame||((Ac=Fc.requestAnimationFrame)||Zc)(Kc)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Nc&&(e.__=e.__V),e.i=void 0,e.__V=Nc}))),Pc=Rc=null},Fc.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Qc),e.__h=e.__h.filter((function(e){return!e.__||eu(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Fc.__e(n,e.__v)}})),Bc&&Bc(e,t)},Fc.unmount=function(e){Hc&&Hc(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Qc(e)}catch(e){t=e}})),n.__H=void 0,t&&Fc.__e(t,n.__v))};var Xc="function"==typeof requestAnimationFrame;function Zc(e){var t,n=function(){clearTimeout(r),Xc&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Xc&&(t=requestAnimationFrame(n))}function Qc(e){var t=Rc,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Rc=t}function eu(e){var t=Rc;e.__c=e.__(),Rc=t}function tu(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function nu(e,t){return"function"==typeof t?t(e):t}const ru=Object.defineProperty({__proto__:null,useCallback:Yc,useContext:function(e){var t=Rc.context[e.__c],n=Wc(Mc++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Rc)),t.props.value):e.__},useDebugValue:function(e,t){Fc.useDebugValue&&Fc.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=Wc(Mc++,3);!Fc.__s&&tu(n.__H,t)&&(n.__=e,n.i=t,Rc.__H.__h.push(n))},useErrorBoundary:function(e){var t=Wc(Mc++,10),n=zc();return t.__=e,Rc.componentDidCatch||(Rc.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=Wc(Mc++,11);if(!e.__){for(var t=Rc.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){Lc=6,Gc((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:Gc,useMemo:Jc,useReducer:Vc,useRef:function(e){return Lc=5,Jc((function(){return{current:e}}),[])},useState:zc},Symbol.toStringTag,{value:"Module"}),ou="http://www.w3.org/2000/svg";function su(){const e=e=>Pa.createElementNS(ou,e),t=$a(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=$a(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function iu({options:e}){const t=Jc((()=>({__html:su().outerHTML})),[]);return cc("h2",{class:"dialog__header"},cc("span",{class:"dialog__title"},e.formTitle),e.showBranding?cc("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function au(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function cu({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:l,addScreenshotButtonLabel:d,removeScreenshotButtonLabel:p,cancelButtonLabel:f,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:_,messageLabel:y,messagePlaceholder:v,nameLabel:b,namePlaceholder:S,submitButtonLabel:w,isRequiredLabel:k}=e,[E,x]=zc(!1),[T,C]=zc(null),[I,O]=zc(!1),M=u?.input,[R,P]=zc(null),A=Yc((e=>{P(e),O(!1)}),[]),L=Yc((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:h,isEmailRequired:g,isNameRequired:_,messageLabel:y,nameLabel:b});return t.length>0?C(`Please enter in the following required fields: ${t.join(", ")}`):C(null),0===t.length}),[h,g,_,y,b]),D=Yc((async e=>{x(!0);try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(u&&I?u.value():void 0),r={name:au(t,"name"),email:au(t,"email"),message:au(t,"message"),attachments:n?[n]:void 0};if(!L(r))return;try{await o({name:r.name,email:r.email,message:r.message,source:Da,tags:l},{attachments:r.attachments}),s(r)}catch(e){Fa&&ia.error(e),C(e),i(e)}}finally{x(!1)}}),[u&&I,s,i]);return cc("form",{class:"form",onSubmit:D},M&&I?cc(M,{onError:A}):null,cc("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:E},cc("div",{class:"form__top"},T?cc("div",{class:"form__error-container"},T):null,c?cc("label",{for:"name",class:"form__label"},cc(uu,{label:b,isRequiredLabel:k,isRequired:_}),cc("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:S,required:_,type:"text"})):cc("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?cc("label",{for:"email",class:"form__label"},cc(uu,{label:h,isRequiredLabel:k,isRequired:g}),cc("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):cc("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),cc("label",{for:"message",class:"form__label"},cc(uu,{label:y,isRequiredLabel:k,isRequired:!0}),cc("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:v,required:!0,rows:5})),M?cc("label",{for:"screenshot",class:"form__label"},cc("button",{class:"btn btn--default",disabled:E,type:"button",onClick:()=>{P(null),O((e=>!e))}},I?p:d),R?cc("div",{class:"form__error-container"},R.message):null):null),cc("div",{class:"btn-group"},cc("button",{class:"btn btn--primary",disabled:E,type:"submit"},w),cc("button",{class:"btn btn--default",disabled:E,type:"button",onClick:r},f))))}function uu({label:e,isRequired:t,isRequiredLabel:n}){return cc("span",{class:"form__label__text"},e,t&&cc("span",{class:"form__label__text--required"},n))}const lu=16,du=17,pu="http://www.w3.org/2000/svg";function fu(){const e=e=>Ra.document.createElementNS(pu,e),t=$a(e("svg"),{width:`${lu}`,height:`${du}`,viewBox:`0 0 ${lu} ${du}`,fill:"inherit"}),n=$a(e("g"),{clipPath:"url(#clip0_57_156)"}),r=$a(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=$a(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=$a(e("clipPath"),{id:"clip0_57_156"}),a=$a(e("rect"),{width:`${lu}`,height:`${lu}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),t}function hu({open:e,onFormSubmitted:t,...n}){const r=n.options,o=Jc((()=>({__html:fu().outerHTML})),[]),[s,i]=zc(null),a=Yc((()=>{s&&(clearTimeout(s),i(null)),t()}),[s]),c=Yc((e=>{n.onSubmitSuccess(e),i(setTimeout((()=>{t(),i(null)}),5e3))}),[t]);return cc(lc,null,s?cc("div",{class:"success__position",onClick:a},cc("div",{class:"success__content"},r.successMessageText,cc("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):cc("dialog",{class:"dialog",onClick:r.onFormClose,open:e},cc("div",{class:"dialog__position"},cc("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()}},cc(iu,{options:r}),cc(cu,{...n,onSubmitSuccess:c})))))}function mu(){const e=ka().getUser(),t=wa(Ji()).getIsolationScope().getUser(),n=Ki("globalScope",(()=>new ga)).getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const gu=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,s=e.useSentryUser,i=mu(),a=Pa.createElement("div"),c=function(e){const t=Pa.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n  width: var(--form-width, 272px);\n}\n\n@media (max-width: 600px) {\n  .dialog__title {\n    width: auto;\n  }\n}\n\n.dialog__position:has(.editor) .dialog__title {\n  width: auto;\n}\n\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form fieldset {\n  border: none;\n  margin: 0;\n  padding: 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: var(--form-width, 100%);\n}\n\n.dialog__position:has(.editor) .form__right {\n  width: var(--form-width, 272px);\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e&&t.setAttribute("nonce",e),t}(e.styleNonce);let u="";const l={get el(){return a},appendToDom(){o.contains(c)||o.contains(a)||(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),Pa.body.style.overflow=u},open(){p(!0),e.onFormOpen?.(),Ea()?.emit("openFeedbackWidget"),u=Pa.body.style.overflow,Pa.body.style.overflow="hidden"},close(){p(!1),Pa.body.style.overflow=u}},d=t?.createInput({h:cc,hooks:ru,dialog:l,options:e}),p=t=>{!function(e,t,n){var r,o,s;Ka.__&&Ka.__(e,t),r=t.__k,o=[],s=[],Ec(t,e=t.__k=cc(lc,null,[e]),r||nc,nc,void 0!==t.ownerSVGElement,r?null:t.firstChild?Ya.call(t.childNodes):null,o,r?r.__e:t.firstChild,!1,s),e.__d=void 0,xc(o,e,s)}(cc(hu,{options:e,screenshotInput:d,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:s&&i&&i[s.name]||"",defaultEmail:s&&i&&i[s.email]||"",onFormClose:()=>{p(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:t=>{p(!1),e.onSubmitSuccess?.(t)},onSubmitError:t=>{e.onSubmitError?.(t)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:t}),a)};return l}});function _u(e){const t=Pa.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`\n.editor {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n}\n\n.editor__image-container {\n  justify-items: center;\n  padding: 15px;\n  position: relative;\n  height: 100%;\n  border-radius: var(--menu-border-radius, 6px);\n\n  background-color: ${n};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${n} 8px,\n      ${n} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${r} 15px,\n      ${r} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container > * {\n  object-fit: contain;\n  position: absolute;\n}\n\n.editor__tool-container {\n  padding-top: 8px;\n  display: flex;\n  justify-content: center;\n}\n\n.editor__tool-bar {\n  display: flex;\n  gap: 8px;\n}\n\n.editor__tool {\n  display: flex;\n  padding: 8px 12px;\n  justify-content: center;\n  align-items: center;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  background: var(--button-background, var(--background));\n  color: var(--button-color, var(--foreground));\n}\n\n.editor__tool--active {\n  background: var(--button-primary-background, var(--accent-background));\n  color: var(--button-primary-color, var(--accent-foreground));\n}\n\n.editor__rect {\n  position: absolute;\n  z-index: 2;\n}\n\n.editor__rect button {\n  opacity: 0;\n  position: absolute;\n  top: -12px;\n  right: -12px;\n  cursor: pointer;\n  padding: 0;\n  z-index: 3;\n  border: none;\n  background: none;\n}\n\n.editor__rect:hover button {\n  opacity: 1;\n}\n`,e&&t.setAttribute("nonce",e),t}function yu({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:o}){const s=function(){const[t,n]=e.useState(Ra.devicePixelRatio??1);return e.useEffect((()=>{const e=()=>{n(Ra.devicePixelRatio)},t=matchMedia(`(resolution: ${Ra.devicePixelRatio}dppx)`);return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}),[]),t}();e.useEffect((()=>{(async()=>{t();const e=await Aa.mediaDevices.getDisplayMedia({video:{width:Ra.innerWidth*s,height:Ra.innerHeight*s},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),o=Pa.createElement("video");await new Promise(((t,r)=>{o.srcObject=e,o.onloadedmetadata=()=>{n(o,s),e.getTracks().forEach((e=>e.stop())),t()},o.play().catch(r)})),r()})().catch(o)}),[])}}function vu(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function bu(e,t){vu(e,{alpha:!0},((e,n)=>{n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height)}))}function Su(e,t,n){vu(e,{alpha:!0},((e,r)=>{n.length&&(r.fillStyle="rgba(0, 0, 0, 0.25)",r.fillRect(0,0,e.width,e.height)),n.forEach((e=>{!function(e,t,n){switch(e.type){case"highlight":t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break;case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h)}}(e,r,t)}))}))}function wu({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){const s=yu({hooks:t}),i=function({h:e}){return function({action:t,setAction:n}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:"editor__tool "+("highlight"===t?"editor__tool--active":""),onClick:()=>{n("highlight"===t?"":"highlight")}},"Highlight"),e("button",{type:"button",class:"editor__tool "+("hide"===t?"editor__tool--active":""),onClick:()=>{n("hide"===t?"":"hide")}},"Hide")))}}({h:e}),a=function({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}({h:e}),c={__html:_u(o.styleNonce).innerText},u=r.el.style,l=({screenshot:r})=>{const[s,u]=t.useState("highlight"),[l,d]=t.useState([]),p=t.useRef(null),f=t.useRef(null),h=t.useRef(null),m=t.useRef(null),[g,_]=t.useState(1),y=t.useMemo((()=>{const e=Pa.getElementById(o.id);if(!e)return"white";const t=getComputedStyle(e);return t.getPropertyValue("--button-primary-background")||t.getPropertyValue("--accent-background")}),[o.id]);t.useLayoutEffect((()=>{const e=()=>{const e=p.current;e&&vu(r.canvas,{alpha:!1},(t=>{const n=Math.min(e.clientWidth/t.width,e.clientHeight/t.height);_(n)}))};return e(),Ra.addEventListener("resize",e),()=>{Ra.removeEventListener("resize",e)}}),[r]);const v=t.useCallback(((e,t)=>{vu(e,{alpha:!0},((e,n)=>{n.scale(t,t),e.width=r.canvas.width,e.height=r.canvas.height}))}),[r]);t.useEffect((()=>{v(f.current,r.dpi),bu(f.current,r.canvas)}),[r]),t.useEffect((()=>{v(h.current,r.dpi),vu(h.current,{alpha:!0},((e,t)=>{t.clearRect(0,0,e.width,e.height)})),Su(h.current,y,l)}),[l,y]),t.useEffect((()=>{v(n,r.dpi),bu(n,r.canvas),vu(Pa.createElement("canvas"),{alpha:!0},((e,t)=>{t.scale(r.dpi,r.dpi),e.width=r.canvas.width,e.height=r.canvas.height,Su(e,y,l),bu(n,e)}))}),[l,r,y]);const b=t.useCallback((e=>t=>{t.preventDefault(),t.stopPropagation(),d((t=>{const n=[...t];return n.splice(e,1),n}))}),[]),S={width:r.canvas.width*g+"px",height:r.canvas.height*g+"px"},w=e=>{e.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:p},e("canvas",{ref:f,id:"background",style:S}),e("canvas",{ref:h,id:"foreground",style:S}),e("div",{ref:m,onMouseDown:e=>{if(!s||!m.current)return;const t=m.current.getBoundingClientRect(),n={type:s,x:e.offsetX/g,y:e.offsetY/g},r=(e,n)=>{const r=(n.clientX-t.x)/g,o=(n.clientY-t.y)/g;return{type:e.type,x:Math.min(e.x,r),y:Math.min(e.y,o),w:Math.abs(r-e.x),h:Math.abs(o-e.y)}},o=e=>{vu(h.current,{alpha:!0},((e,t)=>{t.clearRect(0,0,e.width,e.height)})),Su(h.current,y,[...l,r(n,e)])},i=e=>{const t=r(n,e);t.w*g>=1&&t.h*g>=1&&d((e=>[...e,t])),Pa.removeEventListener("mousemove",o),Pa.removeEventListener("mouseup",i)};Pa.addEventListener("mousemove",o),Pa.addEventListener("mouseup",i)},style:S},l.map(((t,n)=>e("div",{key:n,class:"editor__rect",style:{top:t.y*g+"px",left:t.x*g+"px",width:t.w*g+"px",height:t.h*g+"px"}},e("button",{"aria-label":"Remove",onClick:b(n),onMouseDown:w,onMouseUp:w,type:"button"},e(a,null)))))))),e(i,{action:s,setAction:u}))};return function({onError:r}){const[o,i]=t.useState();return s({onBeforeScreenshot:t.useCallback((()=>{u.display="none"}),[]),onScreenshot:t.useCallback(((e,t)=>{vu(Pa.createElement("canvas"),{alpha:!1},((n,r)=>{r.scale(t,t),n.width=e.videoWidth,n.height=e.videoHeight,r.drawImage(e,0,0,n.width,n.height),i({canvas:n,dpi:t})})),n.width=e.videoWidth,n.height=e.videoHeight}),[]),onAfterScreenshot:t.useCallback((()=>{u.display="block"}),[]),onError:t.useCallback((e=>{u.display="block",r(e)}),[])}),o?e(l,{screenshot:o}):e("div",null)}}const ku=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=Pa.createElement("canvas");return{input:wu({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{const e=await new Promise((e=>{o.toBlob(e,"image/png")}));if(e){return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}}),Eu={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},xu=mo;async function Tu(e,t){const n=Eu[e],r=xu.Sentry=xu.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const o=r[e];if("function"==typeof o&&!("_isShim"in o))return o;const s=function(e){const t=Je(),n=t?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${R}/${e}.min.js`,n).toString()}(n),i=mo.document.createElement("script");i.src=s,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise(((e,t)=>{i.addEventListener("load",(()=>e())),i.addEventListener("error",t)})),c=mo.document.currentScript,u=mo.document.body||mo.document.head||c?.parentElement;if(!u)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);u.appendChild(i);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const l=r[e];if("function"!=typeof l)throw new Error(`Could not load integration: ${e}`);return l}const Cu=Ga({lazyLoadIntegration:Tu}),Iu=Ga({getModalIntegration:()=>gu,getScreenshotIntegration:()=>ku});function Ou(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const Mu=Ou;function Ru(e,t,n,r){Kr({level:e,message:t,attributes:n,severityNumber:r})}function Pu(e,t){Ru("trace",e,t)}function Au(e,t){Ru("debug",e,t)}function Lu(e,t){Ru("info",e,t)}function Du(e,t){Ru("warn",e,t)}function Nu(e,t){Ru("error",e,t)}function Fu(e,t){Ru("fatal",e,t)}const ju=(e={})=>{const t=e.levels||te,n=e.handled??!0;return{name:"CaptureConsole",setup(e){"console"in P&&To((({args:r,level:o})=>{Je()===e&&t.includes(o)&&function(e,t,n){const r={level:No(t),extra:{arguments:e}};Ve((o=>{if(o.addEventProcessor((e=>(e.logger="console",Se(e,{handled:n,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${ae(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),Qn(t,r)}return}const s=e.find((e=>e instanceof Error));if(s)return void Zn(s,r);Qn(ae(e," "),r)}))}(r,o,n)}))}}};function $u(e,t={},n=qe()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,l={contexts:{feedback:{contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},d=n?.getClient()||Je();d&&d.emit("beforeSendFeedback",l,t);return n.captureEvent(l,t)}const Uu={[zt]:"auto.console.logging"},Bu=(e={})=>{const t=e.levels||te;return{name:"ConsoleLogs",setup(e){e.getOptions()._experiments?.enableLogs?To((({args:n,level:r})=>{if(Je()!==e||!t.includes(r))return;if("assert"===r){if(!n[0]){const e=n.slice(1);Kr({level:"error",message:e.length>0?`Assertion failed: ${Hu(e)}`:"Assertion failed",attributes:Uu})}return}const o="log"===r;Kr({level:o?"info":r,message:Hu(n),severityNumber:o?10:void 0,attributes:Uu})})):M&&oe.warn("`_experiments.enableLogs` is not enabled, ConsoleLogs integration disabled")}}};function Hu(e){return"util"in P&&"function"==typeof P.util.format?P.util.format(...e):ae(e," ")}function qu(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(V(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}class Wu{constructor(e={}){this._traceId=e.traceId||Le(),this._spanId=e.spanId||De()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function zu(e,t,n,r=Fn()){const o=r&&Nn(r);o&&(M&&oe.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Jt]:t,[Gt]:n}))}function Vu(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},r=n[Gt],o=n[Jt];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})})),t}class Gu{constructor(e={}){this._traceId=e.traceId||Le(),this._spanId=e.spanId||De(),this._startTime=e.startTimestamp||xe(),this._links=e.links,this._attributes={},this.setAttributes({[zt]:"manual",[Wt]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Sn:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=Cn(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Bt,"custom"),this}end(e){this._endTime||(this._endTime=Cn(e),function(e){if(!M)return;const{description:t="< unknown name >",op:n="< unknown op >"}=On(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${Nn(e)===e?"root ":""}span "${t}" with ID ${r}`;oe.log(o)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Wt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Rn(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[zt],profile_id:this._attributes[Kt],exclusive_time:this._attributes[Xt],measurements:Vu(this._events),is_segment:this._isStandaloneSpan&&Nn(this)===this||void 0,segment_id:this._isStandaloneSpan?Nn(this).spanContext().spanId:void 0,links:Tn(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){M&&oe.log("[Tracing] Adding an event to span:",e);const r=Ju(t)?t:n||xe(),o=Ju(t)?{}:t||{},s={name:e,time:Cn(r),attributes:o};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Je();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Nn(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=Je();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(function(e,t){const n=Wn(e[0]),r=t?.getDsn(),o=t?.getOptions().tunnel,s={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!o&&r&&{dsn:_r(r)}},i=t?.getOptions().beforeSendSpan,a=i?e=>{const t=On(e);return i(t)||(jn(),t)}:On,c=[];for(const t of e){const e=a(t);e&&c.push(Rr(e))}return Er(s,c)}([this],e)):(M&&oe.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(ln(this).scope||qe()).captureEvent(t)}}_convertSpanToTransaction(){if(!Yu(On(this)))return;this._name||(M&&oe.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=ln(this);if(!0!==this._sampled)return;const n=Dn(this).filter((e=>e!==this&&!function(e){return e instanceof Gu&&e.isStandaloneSpan()}(e))).map((e=>On(e))).filter(Yu),r=this._attributes[Bt];delete this._attributes[Yt],n.forEach((e=>{delete e.data[Yt]}));const o={contexts:{trace:kn(this)},spans:n.length>1e3?n.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):n,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:Wn(this)},...r&&{transaction_info:{source:r}}},s=Vu(this._events);return s&&Object.keys(s).length&&(M&&oe.log("[Measurements] Adding measurements to transaction event",JSON.stringify(s,void 0,2)),o.measurements=s),o}}function Ju(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function Yu(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}const Ku="__SENTRY_SUPPRESS_TRACING__";function Xu(e,t){const n=il();if(n.startSpan)return n.startSpan(e,t);const r=sl(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i?.clone();return Ve(a,(()=>ul(s)((()=>{const n=qe(),s=cl(n),i=e.onlyIfParent&&!s?new Wu:ol({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});return Pe(n,i),qu((()=>t(i)),(()=>{const{status:e}=On(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:on,message:"internal_error"})}),(()=>{i.end()}))}))))}function Zu(e,t){const n=il();if(n.startSpanManual)return n.startSpanManual(e,t);const r=sl(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i?.clone();return Ve(a,(()=>ul(s)((()=>{const n=qe(),s=cl(n),i=e.onlyIfParent&&!s?new Wu:ol({parentSpan:s,spanArguments:r,forceTransaction:o,scope:n});return Pe(n,i),qu((()=>t(i,(()=>i.end()))),(()=>{const{status:e}=On(i);!i.isRecording()||e&&"ok"!==e||i.setStatus({code:on,message:"internal_error"})}))}))))}function Qu(e){const t=il();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=sl(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>Ve(e.scope,t):void 0!==o?e=>tl(o,e):e=>e())((()=>{const t=qe(),o=cl(t);return e.onlyIfParent&&!o?new Wu:ol({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))}const el=(e,t)=>{const n=He(A());if(n.continueTrace)return n.continueTrace(e,t);const{sentryTrace:r,baggage:o}=e;return Ve((e=>{const n=vn(r,o);return e.setPropagationContext(n),t()}))};function tl(e,t){const n=il();return n.withActiveSpan?n.withActiveSpan(e,t):Ve((n=>(Pe(n,e||void 0),t(n))))}function nl(e){const t=il();return t.suppressTracing?t.suppressTracing(e):Ve((t=>(t.setSDKProcessingMetadata({[Ku]:!0}),e())))}function rl(e){return Ve((t=>(t.setPropagationContext({traceId:Le(),sampleRand:Math.random()}),M&&oe.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),tl(null,e))))}function ol({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!tn()){const r=new Wu;if(n||!e){Bn(r,{sampled:"false",sample_rate:"0",transaction:t.name,...Wn(r)})}return r}const o=We();let s;if(e&&!n)s=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[Ku]&&Mn(e),i=s?new Gu({...n,parentSpanId:r,traceId:o,sampled:s}):new Wu({traceId:o});Ln(e,i);const a=Je();a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i));return i}(e,r,t),Ln(e,s);else if(e){const n=Wn(e),{traceId:o,spanId:i}=e.spanContext(),a=Mn(e);s=al({traceId:o,parentSpanId:i,...t},r,a),Bn(s,n)}else{const{traceId:e,dsc:n,parentSpanId:i,sampled:a}={...o.getPropagationContext(),...r.getPropagationContext()};s=al({traceId:e,parentSpanId:i,...t},r,a),n&&Bn(s,n)}return function(e){if(!M)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=On(e),{spanId:o}=e.spanContext(),s=Mn(e),i=Nn(e),a=i===e,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:e,description:t}=On(i);u.push(`root ID: ${i.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}oe.log(`${c}\n  ${u.join("\n  ")}`)}(s),function(e,t,n){e&&(de(e,un,n),de(e,cn,t))}(s,r,o),s}function sl(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=Cn(e.startTime),delete n.startTime,n}return t}function il(){return He(A())}function al(e,t,n){const r=Je(),o=r?.getOptions()||{},{name:s=""}=e,i={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[l,d,p]=t.getScopeData().sdkProcessingMetadata[Ku]?[!1]:function(e,t,n){if(!tn(e))return[!1];let r,o;"function"==typeof e.tracesSampler?(o=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e}),r=!0):void 0!==t.parentSampled?o=t.parentSampled:void 0!==e.tracesSampleRate&&(o=e.tracesSampleRate,r=!0);const s=dn(o);if(void 0===s)return M&&oe.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!s)return M&&oe.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,s,r];const i=n<s;return i||M&&oe.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[i,s,r]}(o,{name:s,parentSampled:a,attributes:c,parentSampleRate:dn(u.dsc?.sample_rate)},u.sampleRand),f=new Gu({...e,attributes:{[Bt]:"custom",[Ht]:void 0!==d&&p?d:void 0,...c},sampled:l});return!l&&r&&(M&&oe.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function cl(e){const t=Ae(e);if(!t)return;const n=Je();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Nn(t):t}function ul(e){return void 0!==e?t=>tl(e,t):e=>e()}const ll=(e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,r,o){const{maxValueLength:s=250}=o.getOptions();return function(e,t={},n,r,o){if(!t.originalException||!F(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=function(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==r.indexOf(t))continue;const s=e[t];o[t]=F(s)||"string"==typeof s?se(`${s}`,n):s}if(t&&void 0!==e.cause&&(o.cause=F(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=F(n)?n.toString():n}}return o}catch(e){M&&oe.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,r,o);if(i){const t={...e.contexts},r=jt(i,n);return W(r)&&(de(r,"__sentry_skip_normalization__",!0),t[s]=r),{...e,contexts:t}}return e}(e,r,t,n,s)}}};const dl=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],pl=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],fl={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},hl=["select","insert","upsert","update","delete"];function ml(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function gl(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function _l(e,t){if(""===t||"*"===t)return"select(*)";if("select"===e)return`select(${t})`;if("or"===e||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let o;return o=n?.startsWith("fts")?"textSearch":n?.startsWith("plfts")?"textSearch[plain]":n?.startsWith("phfts")?"textSearch[phrase]":n?.startsWith("wfts")?"textSearch[websearch]":n&&fl[n]||"filter",`${o}(${e}, ${r.join(".")})`}function yl(e,t=!1){return new Proxy(e,{apply:(n,r,o)=>Xu({name:e.name,attributes:{[zt]:"auto.db.supabase",[Wt]:`db.auth.${t?"admin.":""}${e.name}`}},(e=>Reflect.apply(n,r,o).then((t=>(t&&"object"==typeof t&&"error"in t&&t.error?(e.setStatus({code:on}),Zn(t.error,{mechanism:{handled:!1}})):e.setStatus({code:rn}),e.end(),t))).catch((t=>{throw e.setStatus({code:on}),e.end(),Zn(t,{mechanism:{handled:!1}}),t})).then(...o)))})}function vl(e){gl(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(e,t,n){const r=Reflect.apply(e,t,n);return function(e){for(const t of hl)gl(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(e,n,r){const o=Reflect.apply(e,n,r),s=o.constructor;return M&&oe.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),bl(s),o}}),ml(e.prototype[t]))}(r.constructor),r}}),ml(e.prototype.from))}function bl(e){gl(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(e,t,n){const r=hl,o=t,s=function(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}(o.method,o.headers);if(!r.includes(s))return Reflect.apply(e,t,n);if(!o?.url?.pathname||"string"!=typeof o.url.pathname)return Reflect.apply(e,t,n);const i=o.url.pathname.split("/"),a=i.length>0?i[i.length-1]:"",c=`from(${a})`,u=[];for(const[e,t]of o.url.searchParams.entries())u.push(_l(e,t));const l=Object.create(null);if(W(o.body))for(const[e,t]of Object.entries(o.body))l[e]=t;const d={"db.table":a,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql",[zt]:"auto.db.supabase",[Wt]:`db.${s}`};return u.length&&(d["db.query"]=u),Object.keys(l).length&&(d["db.body"]=l),Xu({name:c,attributes:d},(r=>Reflect.apply(e,t,[]).then((e=>{if(r&&(e&&"object"==typeof e&&"status"in e&&an(r,e.status||500),r.end()),e.error){const t=new Error(e.error.message);e.error.code&&(t.code=e.error.code),e.error.details&&(t.details=e.error.details);const n={};u.length&&(n.query=u),Object.keys(l).length&&(n.body=l),Zn(t,{contexts:{supabase:n}})}const t={type:"supabase",category:`db.${s}`,message:c},n={};return u.length&&(n.query=u),Object.keys(l).length&&(n.body=l),Object.keys(n).length&&(t.data=n),Do(t),e}),(e=>{throw r&&(an(r,500),r.end()),e})).then(...n)))}}),ml(e.prototype.then))}const Sl=e=>{if(!e)return void(M&&oe.warn("Supabase integration was not installed because no Supabase client was provided."));vl(e.constructor===Function?e:e.constructor),function(e){const t=e.auth;if(t&&!gl(e.auth)){for(const n of dl){const r=t[n];r&&"function"==typeof e.auth[n]&&(e.auth[n]=yl(r))}for(const n of pl){const r=t.admin[n];r&&"function"==typeof e.auth.admin[n]&&(e.auth.admin[n]=yl(r,!0))}ml(e.auth)}}(e)},wl=e=>{return t=e.supabaseClient,{setupOnce(){Sl(t)},name:"Supabase"};var t};function kl(e,t){let n;return Tr(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function El(e,t){return n=>{const r=e(n),o=new Map;function s(t,r){const s=r?`${t}:${r}`:t;let i=o.get(s);if(!i){const a=yr(t);if(!a)return;const c=kr(a,n.tunnel);i=r?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=kl(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,r)({...n,url:c}):e({...n,url:c}),o.set(s,i)}return[t,i]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){return kl(e,t?.length?t:["event"])}}).map((e=>"string"==typeof e?s(e,void 0):s(e.dsn,e.release))).filter((e=>!!e)),o=n.length?n:[["",r]];return(await Promise.all(o.map((([t,n])=>n.send(function(e,t){return Er(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...o.values(),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}const xl=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{Tr(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(qi(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(t.type)return;Hi(e.getOptions().stackParser,t)}))}});let Tl=!1;function Cl(){Tl||(Tl=!0,Ws(Il),Gs(Il))}function Il(){const e=Fn(),t=e&&Nn(e);if(t){const e="internal_error";M&&oe.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:on,message:e})}}function Ol(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Il.tag="sentry_tracingErrorCallback";const Ml=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Rl(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=Ml.exec(t);return n?n.slice(1):[]}function Pl(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n="/"===o.charAt(0))}return t=Ol(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."}function Al(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}const Ll=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in P&&!!P.window,o=e.iteratee||function({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){const e=r.filename;0===e.indexOf(t)&&(r.filename=e.replace(t,n))}}else if(o||s){const e=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,s=t?function(e,t){e=Pl(e).slice(1),t=Pl(t).slice(1);const n=Al(e.split("/")),r=Al(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let e=0;e<o;e++)if(n[e]!==r[e]){s=e;break}let i=[];for(let e=s;e<n.length;e++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}(t,e):function(e,t){let n=Rl(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n}(e);r.filename=`${n}${s}`}return r}}({isBrowser:r,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t?.frames&&t.frames.map((e=>o(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}};function Dl(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Nl(e){const t=new Set;for(const n of e.issues){const e=n.path.map((e=>"number"==typeof e?"<array>":e)).join(".");e.length>0&&t.add(e)}const n=Array.from(t);if(0===n.length){let t="variable";if(e.issues.length>0){const n=e.issues[0];void 0!==n&&"expected"in n&&"string"==typeof n.expected&&(t=n.expected)}return`Failed to validate ${t}`}return`Failed to validate keys: ${se(n.join(", "),100)}`}function Fl(e,t=!1,n,r){if(!(n.exception?.values&&r.originalException&&(o=r.originalException,F(o)&&"ZodError"===o.name&&Array.isArray(o.issues))&&0!==r.originalException.issues.length))return n;var o;try{const o=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Dl);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:Nl(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":o.slice(0,e)}}}catch(e){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:"unknown"}}}}}const jl=(e={})=>{const t=e.limit??10;return{name:"ZodErrors",processEvent:(n,r)=>Fl(t,e.saveZodIssuesAsAttachment,n,r)}};function $l(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:_r(r)}},s=function(e){return[{type:"user_report"},e]}(e);return Er(o,[s])}const Ul=P,Bl=new WeakMap,Hl=(e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(Bl.has(Je()))for(const t of e)Ve((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}Qn(`${n}: ${r}`)}))}return{name:"ReportingObserver",setupOnce(){if(!("ReportingObserver"in kt))return;new Ul.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){Bl.set(e,!0)}}};function ql(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){if(!t)return!1;return Wl(e)===Wl(t)}(e,r)}function Wl(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const zl=(e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:"HttpClient",setup(e){!function(e,t){if(!Tt())return;Io((n=>{if(Je()!==e)return;const{response:r,args:o,error:s,virtualError:i}=n,[a,c]=o;r&&function(e,t,n,r,o){if(Yl(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let s,i,a,c;Xl()&&([s,a]=Vl("Cookie",e),[i,c]=Vl("Set-Cookie",n));er(Kl({url:e.url,method:e.method,status:n.status,requestHeaders:s,responseHeaders:i,requestCookies:a,responseCookies:c,error:o}))}}(t,a,r,c,s||i)}),!1)}(e,t),function(e,t){if(!("XMLHttpRequest"in P))return;Cs((n=>{if(Je()!==e)return;const{error:r,virtualError:o}=n,s=n.xhr,i=s[Ts];if(!i)return;const{method:a,request_headers:c}=i;try{!function(e,t,n,r,o){if(Yl(e,t.status,t.responseURL)){let e,s,i;if(Xl()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(s=Jl(e))}catch{}try{i=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{})}(t)}catch{}e=r}er(Kl({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:i,responseCookies:s,error:o}))}}(t,s,a,c,r||o)}catch(e){bo&&oe.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}};function Vl(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Jl(t))}catch{}return[n,r]}function Gl(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Jl(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function Yl(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!ql(n,Je());var r,o}function Kl(e){const t=Je(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,s={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Gl(e.responseHeaders)}}};return Se(s,{type:"http.client",handled:!1}),s}function Xl(){const e=Je();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const Zl=P,Ql=(e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){const n=Zl.document,r=Zl.location&&Ho(Zl.location.href);if(!n||!r)return e;const o=e.exception?.values;if(!o?.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n?.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>ie(e,0)));const s=Math.min(r-1,o);t.context_line=ie(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>ie(e,0)))}(t,e,r),e}(e,i,r,t))))})),e}(e,t)}};function ed(e){return new URLSearchParams(e).toString()}function td(e,t=Zo){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[ed(e)];if(!e)return[void 0]}catch(n){return Ci&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ci&&t.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function nd(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function rd(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=function(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const o=e.match(n);if(o)return{operationType:o[1],operationName:void 0};return{operationType:void 0,operationName:void 0}}(t);return r?`${o} ${r}`:`${o}`}function od(e){let t;if("xhr"in e){const n=e.xhr[Ts];t=n&&td(n.body)[0]}else{t=td(nd(e.input))[0]}return t}function sd(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const id=e=>({name:"GraphQLClient",setup(t){!function(e,t){e.on("beforeOutgoingRequestSpan",((e,n)=>{const r=On(e).data||{};if(!("http.client"===r[Wt]))return;const o=r[Qt]||r["http.url"],s=r[Zt]||r["http.method"];if(!B(o)||!B(s))return;const{endpoints:i}=t,a=ue(o,i),c=od(n);if(a&&c){const t=sd(c);if(t){const n=rd(t);e.updateName(`${s} ${o} (${n})`),e.setAttribute("graphql.document",c)}}}))}(t,e),function(e,t){e.on("beforeOutgoingRequestBreadcrumb",((e,n)=>{const{category:r,type:o,data:s}=e;if("http"===o&&("fetch"===r||"xhr"===r)){const e=s?.url,{endpoints:r}=t,o=ue(e,r),i=od(n);if(o&&s&&i){const e=sd(i);if(!s.graphql&&e){const t=rd(e);s["graphql.document"]=e.query,s["graphql.operation"]=t}}}}))}(t,e)}}),ad=globalThis,cd=Object.prototype.toString;function ud(e,t){return cd.call(e)===`[object ${t}]`}function ld(e){return ud(e,"String")}function dd(e){return ud(e,"Object")}function pd(e){return Boolean(e?.then&&"function"==typeof e.then)}function fd(e,t){try{return e instanceof t}catch(e){return!1}}const hd="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,md=ad,gd=80;function _d(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||gd;for(;n&&s++<r&&(u=yd(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function yd(e,t){const n=e,r=[];if(!n?.tagName)return"";if(md.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t?.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o?.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&ld(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function vd(){try{return md.document.location.href}catch(e){return""}}const bd="9.19.0";function Sd(){return wd(ad),ad}function wd(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||bd,t[bd]=t[bd]||{}}function kd(e,t,n=ad){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[bd]=r[bd]||{};return o[e]||(o[e]=t())}const Ed=["debug","info","warn","error","log","assert","trace"],xd={};function Td(e){if(!("console"in ad))return e();const t=ad.console,n={},r=Object.keys(xd);r.forEach((e=>{const r=xd[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Cd=kd("logger",(function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return hd?Ed.forEach((n=>{t[n]=(...t)=>{e&&Td((()=>{ad.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Ed.forEach((e=>{t[e]=()=>{}})),t}));function Id(e,t,n){if(!(t in e))return;const r=e[t];if("function"!=typeof r)return;const o=n(r);"function"==typeof o&&function(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Od(e,"__sentry_original__",t)}catch(e){}}(o,r);try{e[t]=o}catch{hd&&Cd.log(`Failed to replace method "${t}" in object`,e)}}function Od(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){hd&&Cd.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Md(e){if(function(e){switch(cd.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return fd(e,Error)}}(e))return{message:e.message,name:e.name,stack:e.stack,...Pd(e)};if(t=e,"undefined"!=typeof Event&&fd(t,Event)){const t={type:e.type,target:Rd(e.target),currentTarget:Rd(e.currentTarget),...Pd(e)};return"undefined"!=typeof CustomEvent&&fd(e,CustomEvent)&&(t.detail=e.detail),t}return e;var t}function Rd(e){try{return t=e,"undefined"!=typeof Element&&fd(t,Element)?_d(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Pd(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}const Ad="<anonymous>";function Ld(e,t=100,n=1/0){try{return Dd("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Dd(e,t,n=1/0,r=1/0,o=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}()){const[s,i]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if("object"==typeof(n=t)&&null!==n&&(n.__isVue||n._isVue))return"[VueViewModel]";if(function(e){return dd(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${function(e){try{return e&&"function"==typeof e&&e.name||Ad}catch(e){return Ad}}(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Dd("",u.toJSON(),c-1,r,o)}catch(e){}const l=Array.isArray(t)?[]:{};let d=0;const p=Md(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=Dd(e,t,c-1,r,o),d++}return i(t),l}const Nd=1e3;function Fd(){return Date.now()/Nd}const jd=function(){const{performance:e}=ad;if(!e?.now)return Fd;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/Nd}();let $d;function Ud(){return $d||($d=function(){const{performance:e}=ad;if(!e?.now)return[void 0,"none"];const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing?.navigationStart,a="number"==typeof i?Math.abs(i+n-r):t;return s||a<t?o<=a?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}()),$d[0]}function Bd(e=function(){const e=ad;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&t())>>e/4).toString(16)))}function Hd(e){return e.exception?.values?.[0]}function qd(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||jd(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Bd()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Wd(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=Wd(r[e],t[e],n-1));return r}const zd="_sentrySpan";function Vd(e,t){t?Od(e,zd,t):delete e[zd]}function Gd(e){return e[zd]}function Jd(){return Bd()}function Yd(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Kd(e,t,n=!1){return!!ld(e)&&(ud(t,"RegExp")?t.test(e):!!ld(t)&&(n?e===t:e.includes(t)))}class Xd{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Jd(),sampleRand:Math.random()}}clone(){const e=new Xd;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Vd(e,Gd(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&qd(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof Xd?t.getScopeData():dd(t)?e:void 0,{tags:r,extra:o,user:s,contexts:i,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...i},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Vd(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Jd(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:Fd(),...e,message:e.message?Yd(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Gd(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Wd(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||Bd();if(!this._client)return Cd.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||Bd();if(!this._client)return Cd.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||Bd();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Cd.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class Zd{constructor(e,t){let n,r;n=e||new Xd,r=t||new Xd,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return pd(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function Qd(){const e=wd(Sd());return e.stack=e.stack||new Zd(kd("defaultCurrentScope",(()=>new Xd)),kd("defaultIsolationScope",(()=>new Xd)))}function ep(e){return Qd().withScope(e)}function tp(e,t){const n=Qd();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function np(e){return Qd().withScope((()=>e(Qd().getIsolationScope())))}function rp(e){const t=wd(e);return t.acs?t.acs:{withIsolationScope:np,withScope:ep,withSetScope:tp,withSetIsolationScope:(e,t)=>np(t),getCurrentScope:()=>Qd().getScope(),getIsolationScope:()=>Qd().getIsolationScope()}}function op(){return rp(Sd()).getCurrentScope()}function sp(){return rp(Sd()).getIsolationScope()}function ip(){return op().getClient()}const ap=100;const cp="production";var up;function lp(e){return new dp((t=>{t(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(up||(up={}));class dp{constructor(e){this._state=up.PENDING,this._handlers=[],this._runExecutor(e)}then(e,t){return new dp(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new dp(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}_executeHandlers(){if(this._state===up.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===up.RESOLVED&&e[1](this._value),this._state===up.REJECTED&&e[2](this._value),e[0]=!0)}))}_runExecutor(e){const t=(e,t)=>{this._state===up.PENDING&&(pd(t)?t.then(n,r):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(up.RESOLVED,e)},r=e=>{t(up.REJECTED,e)};try{e(n,r)}catch(e){r(e)}}}function pp(e,t,n,r=0){return new dp(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);hd&&i.id&&null===a&&Cd.log(`Event processor "${i.id}" dropped event`),pd(a)?a.then((t=>pp(e,t,n,r+1).then(o))).then(null,s):pp(e,a,n,r+1).then(o).then(null,s)}}))}let fp,hp,mp;function gp(e){const t=ad._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return mp&&n.length===hp||(hp=n.length,mp=n.reduce(((n,r)=>{fp||(fp={});const o=fp[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const s=o[e],i=s?.filename,a=t[r];if(i&&a){n[i]=a,fp[r]=[i,a];break}}}return n}),{})),mp}const _p="sentry.source",yp="sentry.sample_rate",vp="sentry.previous_trace_sample_rate",bp="sentry.op",Sp="sentry.origin";function wp(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||ip()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}const kp=0,Ep=1;const xp="_sentryScope",Tp="_sentryIsolationScope";function Cp(e){return{scope:e[xp],isolationScope:e[Tp]}}const Ip=1;function Op(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:Ap(e).parent_span_id,s=Cp(e).scope;return{parent_span_id:o,span_id:r?s?.getPropagationContext().propagationSpanId||Bd().substring(16):t,trace_id:n}}function Mp(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:o})=>({span_id:e,trace_id:t,sampled:n===Ip,attributes:o,...r}))):void 0}function Rp(e){return"number"==typeof e?Pp(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Pp(e.getTime()):jd()}function Pp(e){return e>9999999999?e/1e3:e}function Ap(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:s,endTime:i,status:a,links:c}=e;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Rp(o),timestamp:Rp(i)||void 0,status:Dp(a),op:r[bp],origin:r[Sp],links:Mp(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Lp(e){const{traceFlags:t}=e.spanContext();return t===Ip}function Dp(e){if(e&&e.code!==kp)return e.code===Ep?"ok":e.message||"unknown_error"}const Np="_sentryRootSpan";function Fp(e){return e[Np]||e}function jp(){const e=rp(Sd());return e.getActiveSpan?e.getActiveSpan():Gd(op())}const $p="sentry-",Up=/^sentry-/;function Bp(e){const t=function(e){if(!e||!ld(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=Hp(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return Hp(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(Up)){e[t.slice($p.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function Hp(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const qp="_frozenDsc";function Wp(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||cp,release:n.release,public_key:r,trace_id:e};return t.emit("createDsc",o),o}function zp(e){const t=ip();if(!t)return{};const n=Fp(e),r=Ap(n),o=r.data,s=n.spanContext().traceState,i=s?.get("sentry.sample_rate")??o[yp]??o[vp];function a(e){return"number"!=typeof i&&"string"!=typeof i||(e.sample_rate=`${i}`),e}const c=n[qp];if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&Bp(u);if(l)return a(l);const d=Wp(e.spanContext().traceId,t),p=o[_p],f=r.description;return"url"!==p&&f&&(d.transaction=f),wp()&&(d.sampled=String(Lp(n)),d.sample_rand=s?.get("sentry.sample_rand")??Cp(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}function Vp(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra});Object.keys(r).length&&(e.tags={...r,...e.tags});Object.keys(o).length&&(e.user={...o,...e.user});Object.keys(s).length&&(e.contexts={...s,...e.contexts});i&&(e.level=i);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),r&&function(e,t){e.contexts={trace:Op(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:zp(t),...e.sdkProcessingMetadata};const n=Fp(t),r=Ap(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function Gp(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:f,span:h}=t;Jp(e,"extra",n),Jp(e,"tags",r),Jp(e,"user",o),Jp(e,"contexts",s),e.sdkProcessingMetadata=Wd(e.sdkProcessingMetadata,a,2),i&&(e.level=i),f&&(e.transactionName=f),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Jp(e,t,n){e[t]=Wd(e[t],n,1)}function Yp(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Bd(),timestamp:t.timestamp||Fd()},u=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;e.environment=e.environment||n||cp,!e.release&&r&&(e.release=r);!e.dist&&o&&(e.dist=o);const i=e.request;i?.url&&(i.url=Yd(i.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const n=gp(t);e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.filename&&(e.debug_id=n[e.filename])}))}))}(c,e.stackParser);const l=function(e,t){if(!t)return e;const n=e?e.clone():new Xd;return n.update(t),n}(r,n.captureContext);n.mechanism&&function(e,t){const n=Hd(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r?.data,...t.data};n.mechanism.data=e}}(c,n.mechanism);const d=o?o.getEventProcessors():[],p=kd("globalScope",(()=>new Xd)).getScopeData();if(s){Gp(p,s.getScopeData())}if(l){Gp(p,l.getScopeData())}const f=[...n.attachments||[],...p.attachments];f.length&&(n.attachments=f),Vp(c,p);return pp([...d,...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};if(e.exception?.values?.forEach((e=>{e.stacktrace?.frames?.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))})),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}(e),"number"==typeof i&&i>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Ld(e.data,t,n)}})))},...e.user&&{user:Ld(e.user,t,n)},...e.contexts&&{contexts:Ld(e.contexts,t,n)},...e.extra&&{extra:Ld(e.extra,t,n)}};e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ld(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:Ld(e.data,t,n)}}))));e.contexts?.flags&&r.contexts&&(r.contexts.flags=Ld(e.contexts.flags,3,n));return r}(e,i,a):e)))}function Kp(e){if(e)return function(e){return e instanceof Xd||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Xp.includes(e)))}(e)?{captureContext:e}:e}const Xp=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Zp(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,n)||function(e,t){if(!t)return!1;return Qp(e)===Qp(t)}(e,r)}function Qp(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function ef(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}const tf=6e4;function nf(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,s]=e.split(":",5),i=parseInt(t,10),a=1e3*(isNaN(i)?60:i);if(n)for(const e of n.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(o[e]=r+a);else o.all=r+a}else i?o.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?tf:r-t}(i,r):429===t&&(o.all=r+6e4);return o}var rf=n(606);function of(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call(void 0!==rf?rf:0)}function sf(){return"undefined"!=typeof window&&(!of()||function(){const e=ad.process;return"renderer"===e?.type}())}function af(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}const cf=(e,t,n,r)=>{let o,s;return i=>{t.value>=0&&(i||r)&&(s=t.value-(o||0),(s||void 0===o)&&(o=t.value,t.delta=s,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},uf=(e=!0)=>{const t=us.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},lf=()=>{const e=uf();return e?.activationStart||0},df=(e,t)=>{const n=uf();let r="navigate";n&&(us.document?.prerendering||lf()>0?r="prerender":us.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},pf=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ff=e=>{const t=t=>{"pagehide"!==t.type&&"hidden"!==us.document?.visibilityState||e(t)};us.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},hf=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let mf=-1;const gf=e=>{"hidden"===us.document.visibilityState&&mf>-1&&(mf="visibilitychange"===e.type?e.timeStamp:0,_f())},_f=()=>{removeEventListener("visibilitychange",gf,!0),removeEventListener("prerenderingchange",gf,!0)},yf=()=>(us.document&&mf<0&&(mf="hidden"!==us.document.visibilityState||us.document.prerendering?1/0:0,addEventListener("visibilitychange",gf,!0),addEventListener("prerenderingchange",gf,!0)),{get firstHiddenTime(){return mf}}),vf=e=>{us.document?.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},bf=[1800,3e3],Sf=[.1,.25],wf=(e,t={})=>{((e,t={})=>{vf((()=>{const n=yf(),r=df("FCP");let o;const s=pf("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-lf(),0),r.entries.push(e),o(!0)))}))}));s&&(o=cf(e,r,bf,t.reportAllChanges))}))})(hf((()=>{const n=df("CLS",0);let r,o=0,s=[];const i=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=s[0],n=s[s.length-1];o&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,s.push(e)):(o=e.value,s=[e])}})),o>n.value&&(n.value=o,n.entries=s,r())},a=pf("layout-shift",i);a&&(r=cf(e,n,Sf,t.reportAllChanges),ff((()=>{i(a.takeRecords()),r(!0)})),setTimeout(r,0))})))},kf=[100,300],Ef=(e,t={})=>{vf((()=>{const n=yf(),r=df("FID");let o;const s=e=>{e.startTime<n.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),o(!0))},i=e=>{e.forEach(s)},a=pf("first-input",i);o=cf(e,r,kf,t.reportAllChanges),a&&ff(hf((()=>{i(a.takeRecords()),a.disconnect()})))}))};let xf=0,Tf=1/0,Cf=0;const If=e=>{e.forEach((e=>{e.interactionId&&(Tf=Math.min(Tf,e.interactionId),Cf=Math.max(Cf,e.interactionId),xf=Cf?(Cf-Tf)/7+1:0)}))};let Of;const Mf=()=>{"interactionCount"in performance||Of||(Of=pf("event",If,{type:"event",buffered:!0,durationThreshold:0}))},Rf=[],Pf=new Map;const Af=()=>(Of?xf:performance.interactionCount||0)-0,Lf=[],Df=e=>{if(Lf.forEach((t=>t(e))),!e.interactionId&&"first-input"!==e.entryType)return;const t=Rf[Rf.length-1],n=Pf.get(e.interactionId);if(n||Rf.length<10||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0]?.startTime&&n.entries.push(e);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Pf.set(t.id,t),Rf.push(t)}Rf.sort(((e,t)=>t.latency-e.latency)),Rf.length>10&&Rf.splice(10).forEach((e=>Pf.delete(e.id)))}},Nf=e=>{const t=us.requestIdleCallback||us.setTimeout;let n=-1;return e=hf(e),"hidden"===us.document?.visibilityState?e():(n=t(e),ff(e)),n},Ff=[200,500],jf=(e,t={})=>{"PerformanceEventTiming"in us&&"interactionId"in PerformanceEventTiming.prototype&&vf((()=>{Mf();const n=df("INP");let r;const o=e=>{Nf((()=>{e.forEach(Df);const t=(()=>{const e=Math.min(Rf.length-1,Math.floor(Af()/50));return Rf[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())}))},s=pf("event",o,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});r=cf(e,n,Ff,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ff((()=>{o(s.takeRecords()),r(!0)})))}))},$f=[2500,4e3],Uf={},Bf=(e,t={})=>{vf((()=>{const n=yf(),r=df("LCP");let o;const s=e=>{t.reportAllChanges||(e=e.slice(-1)),e.forEach((e=>{e.startTime<n.firstHiddenTime&&(r.value=Math.max(e.startTime-lf(),0),r.entries=[e],o())}))},i=pf("largest-contentful-paint",s);if(i){o=cf(e,r,$f,t.reportAllChanges);const n=hf((()=>{Uf[r.id]||(s(i.takeRecords()),i.disconnect(),Uf[r.id]=!0,o(!0))}));["keydown","click"].forEach((e=>{us.document&&addEventListener(e,(()=>Nf(n)),{once:!0,capture:!0})})),ff(n)}}))},Hf=[800,1800],qf=e=>{us.document?.prerendering?vf((()=>qf(e))):"complete"!==us.document?.readyState?addEventListener("load",(()=>qf(e)),!0):setTimeout(e,0)},Wf=(e,t={})=>{const n=df("TTFB"),r=cf(e,n,Hf,t.reportAllChanges);qf((()=>{const e=uf();e&&(n.value=Math.max(e.responseStart-lf(),0),n.entries=[e],r(!0))}))},zf={},Vf={};let Gf,Jf,Yf,Kf,Xf;function Zf(e,t=!1){return uh("cls",e,oh,Gf,t)}function Qf(e,t=!1){return uh("lcp",e,ih,Yf,t)}function eh(e){return uh("fid",e,sh,Jf)}function th(e){return uh("inp",e,ch,Xf)}function nh(e,t){return lh(e,t),Vf[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);pf(e,(t=>{rh(e,{entries:t})}),t)}(e),Vf[e]=!0),dh(e,t)}function rh(e,t){const n=zf[e];if(n?.length)for(const r of n)try{r(t)}catch(t){Ci&&Zo.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${es(r)}\nError:`,t)}}function oh(){return wf((e=>{rh("cls",{metric:e}),Gf=e}),{reportAllChanges:!0})}function sh(){return Ef((e=>{rh("fid",{metric:e}),Jf=e}))}function ih(){return Bf((e=>{rh("lcp",{metric:e}),Yf=e}),{reportAllChanges:!0})}function ah(){return Wf((e=>{rh("ttfb",{metric:e}),Kf=e}))}function ch(){return jf((e=>{rh("inp",{metric:e}),Xf=e}))}function uh(e,t,n,r,o=!1){let s;return lh(e,t),Vf[e]||(s=n(),Vf[e]=!0),r&&t({metric:r}),dh(e,t,o?s:void 0)}function lh(e,t){zf[e]=zf[e]||[],zf[e].push(t)}function dh(e,t,n){return()=>{n&&n();const r=zf[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}const ph=ad,fh="sentryReplaySession",hh="replay_event",mh="Unable to send Replay",gh=15e4,_h=5e3,yh=2e7,vh=36e5;var bh=Object.defineProperty,Sh=(e,t,n)=>((e,t,n)=>t in e?bh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),wh=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(wh||{});function kh(e){const t=e?.host;return Boolean(t?.shadowRoot===e)}function Eh(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function xh(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Th).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function Th(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=xh(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"==typeof e.style.all&&e.style.all;if(r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],s=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${s?" !important":""};`}return`${e.selectorText} { ${t} }`}(e)),n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t)),n||r)return t}return t||e.cssText}class Ch{constructor(){Sh(this,"idNodeMap",new Map),Sh(this,"nodeMetaMap",new WeakMap)}getId(e){if(!e)return-1;const t=this.getMeta(e)?.id;return t??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Ih({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function Oh({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Mh(e){return e.toLowerCase()}function Rh(e){return e.toUpperCase()}const Ph="__rrweb_original__";function Ah(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Mh(t):null}function Lh(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function Dh(e,t){let n;try{n=new URL(e,t??window.location.href)}catch(e){return null}const r=n.pathname.match(/\.([0-9a-z]+)(?:$)/i);return r?.[1]??null}const Nh={};function Fh(e){const t=Nh[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Nh[e]=r.bind(window)}function jh(...e){return Fh("setTimeout")(...e)}function $h(...e){return Fh("clearTimeout")(...e)}function Uh(e){try{return e.contentDocument}catch(e){}}let Bh=1;const Hh=new RegExp("[^a-z0-9-_:]"),qh=-2;function Wh(){return Bh++}let zh,Vh;const Gh=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Jh=/^(?:[a-z+]+:)?\/\//i,Yh=/^www\..*/i,Kh=/^(data:)([^,]*),(.*)/i;function Xh(e,t){return(e||"").replace(Gh,((e,n,r,o,s,i)=>{const a=r||s||i,c=n||o||"";if(!a)return e;if(Jh.test(a)||Yh.test(a))return`url(${c}${a}${c})`;if(Kh.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const Zh=/^[^ \t\n\r\u000c]+/,Qh=/^[, \t\n\r\u000c]+/;const em=new WeakMap;function tm(e,t){return t&&""!==t.trim()?rm(e,t):t}function nm(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function rm(e,t){let n=em.get(e);if(n||(n=e.createElement("a"),em.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function om(e,t,n,r,o,s){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?tm(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(Qh),!(n>=t.length);){let s=r(Zh);if(","===s.slice(-1))s=tm(e,s.substring(0,s.length-1)),o.push(s);else{let r="";s=tm(e,s);let i=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((s+r).trim());break}if(i)")"===e&&(i=!1);else{if(","===e){n+=1,o.push((s+r).trim());break}"("===e&&(i=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?Xh(r,rm(e)):"object"===t&&"data"===n?tm(e,r):"function"==typeof s?s(n,r,o):r:tm(e,r):r}function sm(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function im(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}function am(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:am(e.parentNode,t,n,r+1):-1}function cm(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch{return!1}}}function um(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===i)return!1;if("INPUT"===i.tagName){const e=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(s){if(c=am(i,cm(r,o)),c<0)return!0;a=am(i,cm(t,n),c>=0?c:1/0)}else{if(a=am(i,cm(t,n)),a<0)return!1;c=am(i,cm(r,o),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!s}catch(e){}return!!s}function lm(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:_={},inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:wh.Document,childNodes:[],compatMode:e.compatMode}:{type:wh.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:wh.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:_,maskTextSelector:y,unmaskTextSelector:v}=t,b=im(e,r,o,s),S=function(e){if(e instanceof HTMLFormElement)return"form";const t=Mh(e.tagName);return Hh.test(t)?"div":t}(e);let w={};const k=e.attributes.length;for(let t=0;t<k;t++){const r=e.attributes[t];r.name&&!sm(S,r.name,r.value)&&(w[r.name]=om(n,S,Mh(r.name),r.value,e,c))}if("link"===S&&i){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=xh(t)),r&&(w.rel=null,w.href=null,w.crossorigin=null,w._cssText=Xh(r,t.href))}if("style"===S&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=xh(e.sheet);t&&(w._cssText=Xh(t,rm(n)))}if("input"===S||"textarea"===S||"select"===S||"option"===S){const t=e,n=Ah(t),r=Lh(t,Rh(S),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=um(t,g,y,_,v,Ih({type:n,tagName:Rh(S),maskInputOptions:a}));w.value=Oh({isMasked:e,element:t,value:r,maskInputFn:u})}o&&(w.checked=o)}"option"===S&&(e.selected&&!a.select?w.selected=!0:delete w.selected);if("canvas"===S&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,s=Ph in o?o[Ph]:o;if(new Uint32Array(s.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(w.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(l.type,l.quality)&&(w.rr_dataURL=t)}if("img"===S&&d){zh||(zh=n.createElement("canvas"),Vh=zh.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,s=()=>{t.removeEventListener("load",s);try{zh.width=t.naturalWidth,zh.height=t.naturalHeight,Vh.drawImage(t,0,0),w.rr_dataURL=zh.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s));console.warn(`Cannot inline img src=${r}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(o?w.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s)}"audio"!==S&&"video"!==S||(w.rr_mediaState=e.paused?"paused":"played",w.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(w.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(w.rr_scrollTop=e.scrollTop));if(b){const{width:t,height:n}=e.getBoundingClientRect();w={class:w.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==S||f(w.src)||(b||Uh(e)||(w.rr_src=w.src),delete w.src);let E;try{customElements.get(S)&&(E=!0)}catch(e){}return{type:wh.Element,tagName:S,attributes:w,childNodes:[],isSVG:nm(e)||void 0,needBlock:b,rootId:m,isCustom:E}}(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:_,inlineImages:y,recordCanvas:v,keepIframeSrcFn:b,newlyAddedElement:S,rootId:w,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const f="STYLE"===d||void 0,h="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(f&&p){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(p=xh(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Xh(p,rm(t.doc))}h&&(p="SCRIPT_PLACEHOLDER");const g=um(e,r,s,o,i,n);f||h||m||!p||!g||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||g)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=Oh({isMasked:um(e,r,s,o,i,Ih({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:wh.Text,textContent:p||"",isStyle:f,rootId:l}}(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:wh.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:wh.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function dm(e){return null==e?"":e.toLowerCase()}function pm(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v={},inlineImages:b=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:T=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:I=!1}=t;let{preserveWhiteSpace:O=!0}=t;const M=lm(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,dataURLOptions:v,inlineImages:b,recordCanvas:S,keepIframeSrcFn:C,newlyAddedElement:I});if(!M)return console.warn(e,"not serialized"),null;let R;R=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===wh.Comment)return!0;if(e.type===wh.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===Dh(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(dm(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===dm(e.attributes.name)||"icon"===dm(e.attributes.rel)||"apple-touch-icon"===dm(e.attributes.rel)||"shortcut icon"===dm(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&dm(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(dm(e.attributes.property).match(/^(og|twitter|fb):/)||dm(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===dm(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===dm(e.attributes.name)||"googlebot"===dm(e.attributes.name)||"bingbot"===dm(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===dm(e.attributes.name)||"generator"===dm(e.attributes.name)||"framework"===dm(e.attributes.name)||"publisher"===dm(e.attributes.name)||"progid"===dm(e.attributes.name)||dm(e.attributes.property).match(/^article:/)||dm(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===dm(e.attributes.name)||"yandex-verification"===dm(e.attributes.name)||"csrf-token"===dm(e.attributes.name)||"p:domain_verify"===dm(e.attributes.name)||"verify-v1"===dm(e.attributes.name)||"verification"===dm(e.attributes.name)||"shopify-checkout-api-token"===dm(e.attributes.name)))return!0}}return!1}(M,y)&&(O||M.type!==wh.Text||M.isStyle||M.textContent.replace(/^\s+|\s+$/gm,"").length)?Wh():qh;const P=Object.assign(M,{id:R});if(r.add(e,P),R===qh)return null;w&&w(e);let A=!p;if(P.type===wh.Element){A=A&&!P.needBlock,delete P.needBlock;const t=e.shadowRoot;t&&Eh(t)&&(P.isShadowHost=!0)}if((P.type===wh.Document||P.type===wh.Element)&&A){y.headWhitespace&&P.type===wh.Element&&"head"===P.tagName&&(O=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:O,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=pm(n,t);e&&P.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=pm(n,t);r&&(Eh(e.shadowRoot)&&(r.isShadow=!0),P.childNodes.push(r))}}return e.parentNode&&kh(e.parentNode)&&Eh(e.parentNode)&&(P.isShadow=!0),P.type!==wh.Element||"iframe"!==P.tagName||im(e,o,s,i)||function(e,t,n){const r=e.contentWindow;if(!r)return;let o,s=!1;try{o=r.document.readyState}catch(e){return}if("complete"!==o){const r=jh((()=>{s||(t(),s=!0)}),n);return void e.addEventListener("load",(()=>{$h(r),s=!0,t()}))}const i="about:blank";if(r.location.href!==i||e.src===i||""===e.src)return jh(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=Uh(e);if(t&&k){const n=pm(t,{doc:t,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:O,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C});n&&k(e,n)}}),E),P.type===wh.Element&&"link"===P.tagName&&"string"==typeof P.attributes.rel&&("stylesheet"===P.attributes.rel||"preload"===P.attributes.rel&&"string"==typeof P.attributes.href&&"css"===Dh(P.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(e){return}if(r)return;const s=jh((()=>{o||(t(),o=!0)}),n);e.addEventListener("load",(()=>{$h(s),o=!0,t()}))}(e,(()=>{if(x){const t=pm(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:y,dataURLOptions:v,inlineImages:b,recordCanvas:S,preserveWhiteSpace:O,onSerialize:w,onIframeLoad:k,iframeLoadTimeout:E,onStylesheetLoad:x,stylesheetLoadTimeout:T,keepIframeSrcFn:C});t&&x(e,t)}}),T),P}function fm(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const hm="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let mm={map:{},getId:()=>(console.error(hm),-1),getNode:()=>(console.error(hm),null),removeNodeFromMap(){console.error(hm)},has:()=>(console.error(hm),!1),reset(){console.error(hm)}};function gm(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();o||!1!==n.leading||(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(!function(...e){Nm("clearTimeout")(...e)}(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=Fm((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)}),a))}}function _m(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Fm((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>_m(e,t,s||{},!0)}function ym(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(mm=new Proxy(mm,{get:(e,t,n)=>("map"===t&&console.error(hm),Reflect.get(e,t,n))}));let vm=Date.now;function bm(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Sm(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function wm(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function km(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}function Em(e,t,n,r,o){if(!e)return!1;const s=km(e);if(!s)return!1;const i=cm(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=am(s,i);let c=-1;return!(a<0)&&(r&&(c=am(s,cm(null,r))),a>-1&&c<0||a<c)}function xm(e,t){return t.getId(e)===qh}function Tm(e,t){if(kh(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Tm(e.parentNode,t))}function Cm(e){return Boolean(e.changedTouches)}function Im(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Om(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Mm(e){return Boolean(e?.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(vm=()=>(new Date).getTime());class Rm{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Pm(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Am(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Pm(n);)n=t;return n}(e);return t.contains(n)}function Lm(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Am(e))}const Dm={};function Nm(e){const t=Dm[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Dm[e]=r.bind(window)}function Fm(...e){return Nm("setTimeout")(...e)}var jm=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(jm||{}),$m=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))($m||{}),Um=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Um||{}),Bm=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Bm||{}),Hm=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Hm||{});function qm(e){try{return e.contentDocument}catch(e){}}function Wm(e){return"__ln"in e}class zm{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=t?.next||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Wm(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Wm(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Vm=(e,t)=>`${e}@${t}`;class Gm{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new zm,r=e=>{let t=e,n=qh;for(;n===qh;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Lm(o))return;const s=kh(o.parentNode)?this.mirror.getId(Pm(o)):this.mirror.getId(o.parentNode),i=r(o);if(-1===s||-1===i)return n.addNode(o);const a=pm(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Im(e,this.mirror)&&!Em(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Om(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Mm(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{Em(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:s,nextId:i,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Ym(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)Km(this.droppedSet,e)||Ym(this.removes,e,this.mirror)?Km(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let s=null;for(;n.length;){let e=null;if(s){const t=this.mirror.getId(s.value.parentNode),n=r(s.value);-1!==t&&-1!==n&&(e=s)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}s=e.previous,n.removeNode(e.value),o(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!xm(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Em(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:um(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,km(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=Ah(t),o=t.tagName;r=Lh(t,o,n);const s=Ih({maskInputOptions:this.maskInputOptions,tagName:o,type:n});r=Oh({isMasked:um(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,s),element:t,value:r,maskInputFn:this.maskInputFn})}if(Em(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let o=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(qm(t))return;n="rr_src"}if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!sm(t.tagName,n)&&(o.attributes[n]=om(this.doc,Mh(t.tagName),Mh(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),s=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||s!==n.style.getPropertyPriority(e)?o.styleDiff[e]=""===s?r:[r,s]:o._unchangedStyles[e]=[r,s]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o.styleDiff[e]=!1)}break}case"childList":if(Em(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=kh(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Em(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||xm(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Jm(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Tm(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Vm(n,r)]?Jm(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!kh(e.target)||!Eh(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(xm(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Vm(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Em(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Mm(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Jm(e,t){e.delete(t),t.childNodes.forEach((t=>Jm(e,t)))}function Ym(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some((e=>e.id===t)))return!0;r=r.parentNode}return!1}(e,t,n)}function Km(e,t){return 0!==e.size&&Xm(e,t)}function Xm(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Xm(e,n))}let Zm;const Qm=e=>{if(!Zm)return e;return(...t)=>{try{return e(...t)}catch(e){if(Zm&&!0===Zm(e))return()=>{};throw e}}},eg=[];function tg(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function ng(e,t){const n=new Gm;eg.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);const s=new r(Qm((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function rg({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,c=[];let u=null;return Object.keys(Um).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Mh(i);const l=(t=>i=>{const a=tg(i);if(Em(a,r,o,s,!0))return;let c=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":c=Bm.Mouse;break;case"touch":c=Bm.Touch;break;case"pen":c=Bm.Pen}c===Bm.Touch?Um[t]===Um.MouseDown?l="TouchStart":Um[t]===Um.MouseUp&&(l="TouchEnd"):Bm.Pen}else Cm(i)&&(c=Bm.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===Bm.Touch||l.startsWith("Mouse")&&c===Bm.Mouse)&&(c=null)):Um[t]===Um.Click&&(c=u,u=null);const d=Cm(i)?i.changedTouches[0]:i;if(!d)return;const p=n.getId(a),{clientX:f,clientY:h}=d;Qm(e)({type:Um[l],id:p,x:f,y:h,...null!==c&&{pointerType:c}})})(i);if(window.PointerEvent)switch(Um[i]){case Um.MouseDown:case Um.MouseUp:a=a.replace("mouse","pointer");break;case Um.TouchStart:case Um.TouchEnd:return}c.push(fm(a,l,t))})),Qm((()=>{c.forEach((e=>e()))}))}function og({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){return fm("scroll",Qm(gm(Qm((i=>{const a=tg(i);if(!a||Em(a,r,o,s,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=bm(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}const sg=["INPUT","TEXTAREA","SELECT"],ig=new WeakMap;function ag({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:m}){function g(e){let n=tg(e);const l=e.isTrusted,g=n&&Rh(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||sg.indexOf(g)<0||Em(n,r,o,s,!0))return;const y=n;if(y.classList.contains(i)||a&&y.matches(a))return;const v=Ah(n);let b=Lh(y,g,v),S=!1;const w=Ih({maskInputOptions:c,tagName:g,type:v}),k=um(n,p,h,f,m,w);"radio"!==v&&"checkbox"!==v||(S=n.checked),b=Oh({isMasked:k,element:n,value:b,maskInputFn:u}),_(n,d?{text:b,isChecked:S,userTriggered:l}:{text:b,isChecked:S});const E=n.name;"radio"===v&&E&&S&&t.querySelectorAll(`input[type="radio"][name="${E}"]`).forEach((e=>{if(e!==n){const t=Oh({isMasked:k,element:e,value:Lh(e,g,v),maskInputFn:u});_(e,d?{text:t,isChecked:!S,userTriggered:!1}:{text:t,isChecked:!S})}}))}function _(t,r){const o=ig.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){ig.set(t,r);const o=n.getId(t);Qm(e)({...r,id:o})}}const y=("last"===l.input?["change"]:["input","change"]).map((e=>fm(e,Qm(g),t))),v=t.defaultView;if(!v)return()=>{y.forEach((e=>e()))};const b=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),S=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return b&&b.set&&y.push(...S.map((e=>_m(e[0],e[1],{set(){Qm(g)({target:this,isTrusted:!1})}},!1,v)))),Qm((()=>{y.forEach((e=>e()))}))}function cg(e){return function(e,t){if(pg("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||pg("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||pg("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||pg("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function ug(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function lg({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const o="#document"===n.nodeName?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,s=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&o&&s?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return s.get?.call(this)},set(e){const n=s.set?.call(this,e);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Qm((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))):()=>{}}function dg(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=ng(e,e.doc));const o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,s="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let i,a=[];const c=gm(Qm((t=>{const n=Date.now()-i;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],i=null})),s),u=Qm(gm(Qm((e=>{const t=tg(e),{clientX:n,clientY:o}=Cm(e)?e.changedTouches[0]:e;i||(i=vm()),a.push({x:n,y:o,id:r.getId(t),timeOffset:vm()-i}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?$m.Drag:e instanceof MouseEvent?$m.MouseMove:$m.TouchMove)})),o,{trailing:!1})),l=[fm("mousemove",u,n),fm("touchmove",u,n),fm("drag",u,n)];return Qm((()=>{l.forEach((e=>e()))}))}(e),s=rg(e),i=og(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return fm("resize",Qm(gm(Qm((()=>{const t=Sm(),o=wm();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=ag(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=Qm((i=>gm(Qm((s=>{const a=tg(s);if(!a||Em(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:i,id:o.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),s.media||500))),c=[fm("play",a(Hm.Play),i),fm("pause",a(Hm.Pause),i),fm("seeked",a(Hm.Seeked),i),fm("volumechange",a(Hm.VolumeChange),i),fm("ratechange",a(Hm.RateChange),i)];return Qm((()=>{c.forEach((e=>e()))}))}(e);let l=()=>{},d=()=>{},p=()=>{},f=()=>{};e.recordDOM&&(l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Qm(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=ug(o,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:a}]}),r.apply(o,s)}))});const s=r.CSSStyleSheet.prototype.deleteRule;let i,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Qm(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=ug(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:i}]}),r.apply(o,s)}))}),r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:Qm(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=ug(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:i}),r.apply(o,s)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Qm(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=ug(o,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:i}),r.apply(o,s)}))}));const c={};fg("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(fg("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),fg("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),fg("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,o])=>{u[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(u[r].insertRule,{apply:Qm(((r,o,s)=>{const[i,a]=s,{id:c,styleId:u}=ug(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:i,index:[...cg(o),a||0]}]}),r.apply(o,s)}))}),o.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:Qm(((r,o,s)=>{const[i]=s,{id:a,styleId:c}=ug(o.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...cg(o),i]}]}),r.apply(o,s)}))})})),Qm((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=lg(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Qm(((o,i,a)=>{const[c,u,l]=a;if(n.has(c))return s.apply(i,[c,u,l]);const{id:d,styleId:p}=ug(i.parentRule?.parentStyleSheet,t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:cg(i.parentRule)}),o.apply(i,a)}))});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:Qm(((o,s,a)=>{const[c]=a;if(n.has(c))return i.apply(s,[c]);const{id:u,styleId:l}=ug(s.parentRule?.parentStyleSheet,t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:cg(s.parentRule)}),o.apply(s,a)}))}),Qm((()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i}))}(e,{win:n}),e.collectFonts&&(f=function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,n){const r=new s(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const i=ym(t.fonts,"add",(function(t){return function(n){return Fm(Qm((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=s})),r.push(i),Qm((()=>{r.forEach((e=>e()))}))}(e)));const h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=Qm((()=>{const e=t.getSelection();if(!e||a&&e?.isCollapsed)return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=i;Em(a,r,o,s,!0)||Em(l,r,o,s,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}i({ranges:c})}));return c(),fm("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?ym(n.customElements,"define",(function(e){return function(n,r,o){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,o])}})):()=>{}}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return Qm((()=>{eg.forEach((e=>e.reset())),r?.disconnect(),o(),s(),i(),a(),c(),u(),l(),d(),p(),f(),h(),m(),g.forEach((e=>e()))}))}function pg(e){return void 0!==window[e]}function fg(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class hg{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),s=r||this.getRemoteIdToIdMap(e);let i=o.get(t);return i||(i=this.generateIdFn(),o.set(t,i),s.set(i,t)),i}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class mg{constructor(){this.crossOriginIframeMirror=new hg(Wh),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class gg{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new hg(Wh),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new hg(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&e.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(e);const n=qm(e);n&&n.adoptedStyleSheets&&n.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(n.adoptedStyleSheets,this.mirror.getId(n))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case jm.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:jm.IncrementalSnapshot,data:{source:$m.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case jm.Meta:case jm.Load:case jm.DomContentLoaded:return!1;case jm.Plugin:return t;case jm.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case jm.IncrementalSnapshot:switch(t.data.source){case $m.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case $m.Drag:case $m.TouchMove:case $m.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case $m.ViewportResize:return!1;case $m.MediaInteraction:case $m.MouseInteraction:case $m.Scroll:case $m.CanvasMutation:case $m.Input:return this.replaceIds(t.data,e,["id"]),t;case $m.StyleSheetRule:case $m.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case $m.Font:return t;case $m.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case $m.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),t.data.styles?.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===wh.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class _g{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class yg{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Eh(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=ng({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(og({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Fm((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(lg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){const t=qm(e),n=function(e){try{return e.contentWindow}catch(e){}}(e);t&&n&&this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ym(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Lm(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var vg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bg="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Sg=0;Sg<64;Sg++)bg[vg.charCodeAt(Sg)]=Sg;class wg{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class kg{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Rm,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:Th(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Eg{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,function(...e){Nm("requestAnimationFrame")(...e)}((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let xg,Tg;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Cg=new Ch;function Ig(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:l="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:_,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,maxCanvasSize:S=null,packFn:w,sampling:k={},dataURLOptions:E={},mousemoveWait:x,recordDOM:T=!0,recordCanvas:C=!1,recordCrossOriginIframes:I=!1,recordAfter:O=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:M=!1,collectFonts:R=!1,inlineImages:P=!1,plugins:A,keepIframeSrcFn:L=(()=>!1),ignoreCSSAttributes:D=new Set([]),errorHandler:N,onMutation:F,getCanvasManager:j}=e;Zm=N;const $=!I||window.parent===window;let U=!1;if(!$)try{window.parent.document&&(U=!1)}catch(e){U=!0}if($&&!t)throw new Error("emit function is required");if(!$&&!U)return()=>{};void 0!==x&&void 0===k.mousemove&&(k.mousemove=x),Cg.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},H=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let q;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let W=0;const z=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!U&&(e=w(e)),e};xg=(e,o)=>{const s=e;if(s.timestamp=vm(),!eg[0]?.isFrozen()||s.type===jm.FullSnapshot||s.type===jm.IncrementalSnapshot&&s.data.source===$m.Mutation||eg.forEach((e=>e.unfreeze())),$)t?.(z(s),o);else if(U){const e={type:"rrweb",event:z(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===jm.FullSnapshot)q=s,W=0;else if(s.type===jm.IncrementalSnapshot){if(s.data.source===$m.Mutation&&s.data.isAttachIframe)return;W++;const e=r&&W>=r,t=n&&q&&s.timestamp-q.timestamp>n;(e||t)&&ee(!0)}};const V=e=>{xg({type:jm.IncrementalSnapshot,data:{source:$m.Mutation,...e}})},G=e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.Scroll,...e}}),J=e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.CanvasMutation,...e}}),Y=new kg({mutationCb:V,adoptedStyleSheetCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.AdoptedStyleSheet,...e}})}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new mg:new gg({mirror:Cg,mutationCb:V,stylesheetManager:Y,recordCrossOriginIframes:I,wrappedEmit:xg});for(const e of A||[])e.getMirror&&e.getMirror({nodeMirror:Cg,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const X=new Eg,Z=function(e,t){try{return e?e(t):new wg}catch{return console.warn("Unable to initialize CanvasManager"),new wg}}(j,{mirror:Cg,win:window,mutationCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.CanvasMutation,...e}}),recordCanvas:C,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:k.canvas,dataURLOptions:E,errorHandler:N}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new _g:new yg({mutationCb:V,scrollCb:G,bypassOptions:{onMutation:F,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:B,dataURLOptions:E,maskAttributeFn:y,maskTextFn:b,maskInputFn:v,recordCanvas:C,inlineImages:P,sampling:k,slimDOMOptions:H,iframeManager:K,stylesheetManager:Y,canvasManager:Z,keepIframeSrcFn:L,processedNodeManager:X},mirror:Cg}),ee=(e=!1)=>{if(!T)return;xg({type:jm.Meta,data:{href:window.location.href,width:wm(),height:Sm()}},e),Y.reset(),Q.init(),eg.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Ch,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOM:y=!1,dataURLOptions:v,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T=(()=>!1)}=t||{};return pm(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:_,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:v,inlineImages:p,recordCanvas:f,preserveWhiteSpace:b,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:k,onStylesheetLoad:E,stylesheetLoadTimeout:x,keepIframeSrcFn:T,newlyAddedElement:!1})}(document,{mirror:Cg,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:h,maskAllInputs:B,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,slimDOM:H,dataURLOptions:E,recordCanvas:C,inlineImages:P,onSerialize:e=>{Im(e,Cg)&&K.addIframe(e),Om(e,Cg)&&Y.trackLinkElement(e),Mm(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),e.contentWindow&&Z.addWindow(e.contentWindow),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:L});if(!t)return console.warn("Failed to snapshot the document");xg({type:jm.FullSnapshot,data:{node:t,initialOffset:bm(window)}}),eg.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,Cg.getId(document))};Tg=ee;try{const e=[],t=e=>Qm(dg)({onMutation:F,mutationCb:V,mousemoveCb:(e,t)=>xg({type:jm.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.ViewportResize,...e}}),inputCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.Input,...e}}),mediaInteractionCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.MediaInteraction,...e}}),styleSheetRuleCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.StyleSheetRule,...e}}),styleDeclarationCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>xg({type:jm.IncrementalSnapshot,data:{source:$m.Font,...e}}),selectionCb:e=>{xg({type:jm.IncrementalSnapshot,data:{source:$m.Selection,...e}})},customElementCb:e=>{xg({type:jm.IncrementalSnapshot,data:{source:$m.CustomElement,...e}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:l,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:B,inlineStylesheet:h,sampling:k,recordDOM:T,recordCanvas:C,inlineImages:P,userTriggeredOnInput:M,collectFonts:R,doc:e,maskAttributeFn:y,maskInputFn:v,maskTextFn:b,keepIframeSrcFn:L,blockSelector:s,unblockSelector:i,slimDOMOptions:H,dataURLOptions:E,mirror:Cg,iframeManager:K,stylesheetManager:Y,shadowDomManager:Q,processedNodeManager:X,canvasManager:Z,ignoreCSSAttributes:D,plugins:A?.filter((e=>e.observer))?.map((e=>({observer:e.observer,options:e.options,callback:t=>xg({type:jm.Plugin,data:{plugin:e.name,payload:t}})})))||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ee(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(fm("DOMContentLoaded",(()=>{xg({type:jm.DomContentLoaded,data:{}}),"DOMContentLoaded"===O&&n()}))),e.push(fm("load",(()=>{xg({type:jm.Load,data:{}}),"load"===O&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),Tg=void 0,Zm=void 0}}catch(e){console.warn(e)}}var Og,Mg;Ig.mirror=Cg,Ig.takeFullSnapshot=function(e){if(!Tg)throw new Error("please take full snapshot after start recording");Tg(e)},(Mg=Og||(Og={}))[Mg.NotStarted=0]="NotStarted",Mg[Mg.Running=1]="Running",Mg[Mg.Stopped=2]="Stopped";const Rg=3;function Pg(e){return e>9999999999?e:1e3*e}function Ag(e){return e>9999999999?e/1e3:e}function Lg(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:jm.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Ld(t,10,1e3)}}),"console"===t.category))))}const Dg="button,a";function Ng(e){return e.closest(Dg)||e}function Fg(e){const t=jg(e);return t&&t instanceof Element?Ng(t):t}function jg(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let $g;function Ug(e){return $g||($g=[],Id(ph,"open",(function(e){return function(...t){if($g)try{$g.forEach((e=>e()))}catch(e){}return e.apply(ph,t)}}))),$g.push(e),()=>{const t=$g?$g.indexOf(e):-1;t>-1&&$g.splice(t,1)}}const Bg=new Set([$m.Mutation,$m.StyleSheetRule,$m.StyleDeclaration,$m.AdoptedStyleSheet,$m.CanvasMutation,$m.Selection,$m.MediaInteraction]);class Hg{constructor(e,t,n=Lg){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=Ug((()=>{this._lastMutation=Wg()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!qg.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Ag(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Ag(e)}registerScroll(e=Date.now()){this._lastScroll=Ag(e)}registerClick(e){const t=Ng(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=Wg();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:s,clickBreadcrumb:i}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.slowClickDetected",data:{...i.data,url:ph.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:s||1}};this._addBreadcrumbEvent(t,o)}else if(s>1){const e={type:"default",message:i.message,timestamp:i.timestamp,category:"ui.multiClick",data:{...i.data,url:ph.location.href,route:t.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Ri((()=>this._checkClicks()),1e3)}}const qg=["A","BUTTON","INPUT"];function Wg(){return Date.now()/1e3}function zg(e,t){try{if(!function(e){return e.type===Rg}(t))return;const{source:n}=t.data;if(Bg.has(n)&&e.registerMutation(t.timestamp),n===$m.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===$m.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Ig.mirror.getNode(r);o instanceof HTMLElement&&n===Um.Click&&e.registerClick(o)}}catch{}}function Vg(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Gg=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Gg||{});const Jg=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Yg(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(Jg.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Kg=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Fg(e.event):jg(e.event),n=_d(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Vg({category:`ui.${e.name}`,...Xg(t,n)})}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var s,i,a;!(r&&e.clickDetector&&o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(s=e.clickDetector,i=n,a=Fg(t.event),s.handleClick(i,a)),Lg(e,n)};function Xg(e,t){const n=Ig.mirror.getId(e),r=n&&Ig.mirror.getNode(n),o=r&&Ig.mirror.getMeta(r),s=o&&function(e){return e.type===Gg.Element}(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map((e=>e.type===Gg.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Yg(s.attributes)}}:{}}}function Zg(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(i)||!s)return null;const a=t||r||o,c=1===s.length;if(!a&&c)return null;const u=_d(i,{maxStringLength:200})||"<unknown>",l=Xg(i,u);return Vg({category:"ui.keyDown",message:u,data:{...l.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}(t);n&&Lg(e,n)}const Qg={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:n_(s),end:n_(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=n_(o);return{type:n,name:r,start:s,end:s+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:f,transferSize:h,type:m}=e;if(0===o)return null;return{type:`${t}.${m}`,start:n_(f),end:n_(s),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:s,redirectCount:p}}}};function e_(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function t_(e){const t=Qg[e.entryType];return t?t(e):null}function n_(e){return((Ud()||ph.performance.timeOrigin)+e)/1e3}function r_(e){const t=e.entries[e.entries.length-1];return c_(e,"largest-contentful-paint",t?.element?[t.element]:void 0)}function o_(e){return void 0!==e.sources}function s_(e){const t=[],n=[];for(const r of e.entries)if(o_(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=Ig.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return c_(e,"cumulative-layout-shift",n,t)}function i_(e){const t=e.entries[e.entries.length-1];return c_(e,"first-input-delay",t?.target?[t.target]:void 0)}function a_(e){const t=e.entries[e.entries.length-1];return c_(e,"interaction-to-next-paint",t?.target?[t.target]:void 0)}function c_(e,t,n,r){const o=e.value,s=e.rating,i=n_(o);return{type:"web-vital",name:t,start:i,end:i,data:{value:o,size:o,rating:s,nodeIds:n?n.map((e=>Ig.mirror.getId(e))):void 0,attributions:r}}}const u_="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,l_='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort((function(t,n){return p[n.s]-p[t.s]||t.f-n.f}));s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){G.prototype.flush.call(this)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),s=i.length;return q(i,n),j(i,s-8,r.d()),j(i,s-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';const d_=["info","warn","error","log"],p_="[Replay] ";function f_(e,t="info"){!function(e,t){const n=ip(),r=sp();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=ap}=n.getOptions();if(s<=0)return;const i={timestamp:Fd(),...e},a=o?Td((()=>o(i,t))):i;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,s))}({category:"console",data:{logger:"replay"},level:t,message:`${p_}${e}`},{level:t})}const h_=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=!!n.captureExceptions,t=!!n.traceInternals}};return u_?(d_.forEach((e=>{n[e]=(...n)=>{var r;Cd[e](p_,...n),t&&f_(n.join(""),"warn"===(r=e)?"warning":["fatal","error","warning","log","info","debug"].includes(r)?r:"log")}})),n.exception=(r,...o)=>{var s,i;o.length&&n.error&&n.error(...o),Cd.error(p_,r),e?(s=r,op().captureException(s,Kp(i))):t&&f_(r,"error")},n.infoTick=(...e)=>{Cd.info(p_,...e),t&&setTimeout((()=>f_(e[0])),0)}):d_.forEach((e=>{n[e]=()=>{}})),n}();class m_ extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class g_{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>yh)throw new m_;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?Pg(e):null}}class __{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){u_&&h_.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,o)=>{const s=({data:t})=>{const i=t;if(i.method===e&&i.id===n){if(this._worker.removeEventListener("message",s),!i.success)return u_&&h_.error("Error in compression worker: ",i.response),void o(new Error("Error in compression worker"));r(i.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class y_{constructor(e){this._worker=new __(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Pg(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>yh?Promise.reject(new m_):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{u_&&h_.exception(e,'Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class v_{constructor(e){this._fallback=new g_,this._compression=new y_(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(u_&&h_.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const t of e)r.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(e){u_&&h_.exception(e,"Failed to add events when switching buffers.")}}}function b_({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([l_]);return URL.createObjectURL(e)}();return""}();if(!t)return;u_&&h_.info("Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new v_(n)}catch(e){u_&&h_.exception(e,"Failed to create compression worker")}}(t);if(e)return e}return u_&&h_.info("Using simple buffer"),new g_}function S_(){try{return"sessionStorage"in ph&&!!ph.sessionStorage}catch{return!1}}function w_(e){!function(){if(!S_())return;try{ph.sessionStorage.removeItem(fh)}catch{}}(),e.session=void 0}function k_(e){return void 0!==e&&Math.random()<e}function E_(e){if(S_())try{ph.sessionStorage.setItem(fh,JSON.stringify(e))}catch{}}function x_(e){const t=Date.now();return{id:e.id||Bd(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function T_({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=function(e,t){return k_(e)?"session":!!t&&"buffer"}(e,t),s=x_({sampled:o,previousSessionId:r});return n&&E_(s),s}function C_(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function I_(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return C_(e.started,t,r)||C_(e.lastActivity,n,r)}function O_(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!I_(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function M_({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&function(){if(!S_())return null;try{const e=ph.sessionStorage.getItem(fh);if(!e)return null;const t=JSON.parse(e);return u_&&h_.infoTick("Loading existing session"),x_(t)}catch{return null}}();return o?O_(o,{sessionIdleExpire:e,maxReplayDuration:t})?(u_&&h_.infoTick("Session in sessionStorage is expired, creating new one..."),T_(r,{previousSessionId:o.id})):o:(u_&&h_.infoTick("Creating new session"),T_(r,{previousSessionId:n}))}function R_(e,t,n){return!!A_(e,t)&&(P_(e,t,n),!0)}async function P_(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o="buffer"===e.recordingMode;try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=function(e,t){try{if("function"==typeof t&&function(e){return e.type===jm.Custom}(e))return t(e)}catch(e){return u_&&h_.exception(e,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!s)return;return await r.addEvent(s)}catch(t){const n=t&&t instanceof m_,s=n?"addEventSizeExceeded":"addEvent";if(n&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(t),await e.stop({reason:s});const i=ip();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function A_(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Pg(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(u_&&h_.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1))}function L_(e){return!e.type}function D_(e){return"transaction"===e.type}function N_(e){return"feedback"===e.type}function F_(e){return(t,n)=>{if(!e.isEnabled()||!L_(t)&&!D_(t))return;const r=n?.statusCode;!r||r<200||r>=300||(D_(t)?function(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;Ri((async()=>{try{await e.sendBufferedReplayOrFlush()}catch(t){e.handleException(t)}}))}(e,t))}}function j_(e){return t=>{e.isEnabled()&&L_(t)&&function(e,t){const n=t.exception?.values?.[0]?.value;if("string"!=typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Lg(e,Vg({category:"replay.hydrate-error",data:{url:vd()}}))}}(e,t)}}function $_(e){const t=ip();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!U_(t))return;const n=function(e){if(!U_(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data?.arguments;if(!Array.isArray(t)||0===t.length)return Vg(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>_h?(n=!0,`${e.slice(0,_h)}…`):e;if("object"==typeof e)try{const t=Ld(e,7);return JSON.stringify(t).length>_h?(n=!0,`${JSON.stringify(t,null,2).slice(0,_h)}…`):t}catch{}return e}));return Vg({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return Vg(e)}(t);n&&Lg(e,n)}(e,t)))}function U_(e){return!!e.category}function B_(){const e=op().getPropagationContext().dsc;e&&delete e.replay_id;const t=jp();if(t){delete zp(t).replay_id}}function H_(e){return Object.assign(((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!L_(t)&&!D_(t)&&!N_(t))return t;if(!e.checkAndHandleExpiredSession())return B_(),t;if(N_(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:jm.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException?.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return u_&&h_.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==mh&&!(!t.exception||t.type)&&k_(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}function q_(e,t){return t.map((({type:t,start:n,end:r,name:o,data:s})=>{const i=e.throttledAddEvent({type:jm.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:o,startTimestamp:n,endTimestamp:r,data:s}}});return"string"==typeof i?Promise.resolve(null):i}))}function W_(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(q_(e,[n]),!1))))}}function z_(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!u_||!e.getOptions()._experiments.traceInternals)&&Zp(t,ip())}(e,t.name)||e.addUpdate((()=>(q_(e,[t]),!0))))}function V_(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=ed(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function G_(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function J_(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Y_(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:s,statusCode:i,request:a,response:c}}}function K_(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function X_(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>gh,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,gh);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}(n);return r.body=o,s?.length&&(r._meta={warnings:s}),r}function Z_(e,t){return Object.entries(e).reduce(((n,[r,o])=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=o),n}),{})}function Q_(e,t){const n=function(e,t=ph.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(ph.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return function(e,t=[],n=!1){return t.some((t=>Kd(e,t,n)))}(n,t)}async function ey(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:l}=e.data,d=Q_(i,n.networkDetailAllowUrls)&&!Q_(i,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return ny(e[0],t);if(2===e.length)return ny(e[1],t);return{}}(n,t):{};if(!e)return X_(o,r,void 0);const s=nd(n),[i,a]=td(s,h_),c=X_(o,r,i);if(a)return J_(c,a);return c}(n,t.input,u):K_(u),f=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&void 0!==o)return K_(o);const s=r?ty(r.headers,n):{};if(!r||!t&&void 0!==o)return X_(s,o,void 0);const[i,a]=await async function(e){const t=function(e){try{return e.clone()}catch(e){u_&&h_.exception(e,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=Ri((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return e instanceof Error&&e.message.indexOf("Timeout")>-1?(u_&&h_.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(u_&&h_.exception(e,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(r),c=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const s=e?.length&&void 0===n?V_(e):n;return r?X_(o,s,t?e:void 0):K_(s)}catch(e){return u_&&h_.exception(e,"Failed to serialize response body"),X_(o,n,void 0)}}(i,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:s});if(a)return J_(c,a);return c}(d,n,t.response,l);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:p,response:f}}(e,t,n),o=Y_("resource.fetch",r);z_(n.replay,o)}catch(e){u_&&h_.exception(e,"Failed to capture fetch breadcrumb")}}function ty(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function ny(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?ty(n,t):Array.isArray(n)?{}:Z_(n,t):{}}async function ry(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!a||!Q_(c,n.networkDetailAllowUrls)||Q_(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:K_(d),response:K_(p)}}const f=a[Ts],h=f?Z_(f.request_headers,n.networkRequestHeaders):{},m=Z_(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e}),{})}(a),n.networkResponseHeaders),[g,_]=n.networkCaptureBodies?td(i,h_):[void 0],[y,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return u_&&h_.exception(t,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return u_&&h_.info("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return u_&&h_.warn("Failed to get xhr response body",...t),[void 0]}(a):[void 0],b=X_(h,d,g),S=X_(m,p,y);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:l,request:_?J_(b,_):b,response:v?J_(S,v):S}}(e,t,n),o=Y_("resource.xhr",r);z_(n.replay,o)}catch(e){u_&&h_.exception(e,"Failed to capture xhr breadcrumb")}}function oy(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=V_(r),s=n.getResponseHeader("content-length")?G_(n.getResponseHeader("content-length")):function(e,t){try{return V_("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch{return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}function sy(e){const t=ip();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e?.xhr}(n)&&(oy(t,n),ry(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e?.response}(n)&&(!function(e,t){const{input:n,response:r}=t,o=V_(n?nd(n):void 0),s=r?G_(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==s&&(e.data.response_body_size=s)}(t,n),ey(t,n,e))}catch(e){u_&&h_.exception(e,"Error when enriching network breadcrumb")}}(a,e,t)))}catch{}}function iy(e,{autoFlushOnFeedback:t}){const n=ip();hs(Kg(e)),Ps(W_(e)),$_(e),sy(e);const r=H_(e);var o;o=r,sp().addEventProcessor(o),n&&(n.on("beforeSendEvent",j_(e)),n.on("afterSendEvent",F_(e)),n.on("createDsc",(t=>{const n=e.getSessionId();if(n&&e.isEnabled()&&"session"===e.recordingMode){e.checkAndHandleExpiredSession()&&(t.replay_id=n)}})),n.on("spanStart",(t=>{e.lastActiveSpan=t})),n.on("spanEnd",(t=>{e.lastActiveSpan=t})),n.on("beforeSendFeedback",(async(n,r)=>{const o=e.getSessionId();r?.includeReplay&&e.isEnabled()&&o&&n.contexts?.feedback&&("api"===n.contexts.feedback.source&&t&&await e.flush(),n.contexts.feedback.replay_id=o)})),t&&n.on("openFeedbackWidget",(async()=>{await e.flush()})))}function ay(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}const cy=ad.navigator;function uy(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(u_&&h_.warn("Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&zg(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!R_(e,n,o))return!0;if(!o)return!1;const t=e.session;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;R_(e,function(e){const t=e.getOptions();return{type:jm.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(u_&&h_.info(`Updating session start time to earliest event in buffer to ${new Date(n)}`),t.started=n,e.getOptions().stickySession&&E_(t))}return t?.previousSessionId||"session"===e.recordingMode&&e.flush(),!0}))}}function ly(e,t,n,r){return function(e,t=[]){return[e,t]}(function(e,t,n,r){const o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:ef(r)},...o&&{trace:o}}}(e,function(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}async function dy({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:l}=r,d=ip(),p=op(),f=d?.getTransport(),h=d?.getDsn();if(!(d&&f&&h&&s.sampled))return lp({});const m={type:hh,replay_start_timestamp:l/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await async function({client:e,scope:t,replayId:n,event:r}){const o={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,o);const s=await Yp(e.getOptions(),r,o,t,e,sp());if(!s)return null;e.emit("postprocessEvent",s,o),s.platform=s.platform||"javascript";const i=e.getSdkMetadata(),{name:a,version:c}=i?.sdk||{};return s.sdk={...s.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},s}({scope:p,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay"),u_&&h_.info("An event processor returned `null`, will not send event."),lp({});delete g.sdkProcessingMetadata;const _=ly(g,i,h,d.getOptions().tunnel);let y;try{y=await f.send(_)}catch(e){const t=new Error(mh);try{t.cause=e}catch{}throw t}if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new py(y.statusCode);const v=nf({},y);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(v,"replay"))throw new fy(v);return y}class py extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class fy extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function hy(e,t={count:0,interval:5e3}){const{recordingData:n,onError:r}=e;var o,s;if(n.length)try{return await dy(e),!0}catch(n){if(n instanceof py||n instanceof fy)throw n;if(o="Replays",s={_retryCount:t.count},sp().setContext(o,s),r&&r(n),t.count>=3){const e=new Error(`${mh} - max retries exceeded`);try{e.cause=n}catch{}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{Ri((async()=>{try{await hy(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const my="__THROTTLED";function gy(e,t,n){const r=new Map;let o=!1;return(...s)=>{const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(i),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=o;return o=!0,e?"__SKIPPED":my}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...s)}}class _y{constructor({options:e,recordingOptions:t}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,o,s;const i=n?.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){void 0!==o&&clearTimeout(o),void 0!==s&&clearTimeout(s),o=s=void 0}function u(){return o&&clearTimeout(o),o=Ri(a,t),i&&void 0===s&&(s=Ri(a,i)),r}return u.cancel=c,u.flush=function(){return void 0!==o||void 0!==s?a():r},u}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=gy(((e,t)=>function(e,t,n){return A_(e,t)?P_(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),o=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;if(o&&(this.clickDetector=new Hg(this,o)),u_){const t=e._experiments;h_.setConfig({captureExceptions:!!t.captureExceptions,traceInternals:!!t.traceInternals})}this._handleVisibilityChange=()=>{"visible"===ph.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const e=Vg({category:"ui.blur"});this._doChangeToBackgroundTasks(e)},this._handleWindowFocus=()=>{const e=Vg({category:"ui.focus"});this._doChangeToForegroundTasks(e)},this._handleKeyboardEvent=e=>{Zg(this,e)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){u_&&h_.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",u_&&h_.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording()):u_&&h_.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(u_&&h_.info("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(u_&&h_.info("Buffering is in progress, call `flush()` to save the replay"));u_&&h_.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=M_({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(u_&&h_.info("Buffering is in progress, call `flush()` to save the replay"));u_&&h_.infoTick("Starting replay in buffer mode");const e=M_({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Ig({...this._recordingOptions,..."buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:uy(this),.../iPhone|iPad|iPod/i.test(cy?.userAgent??"")||/Macintosh/i.test(cy?.userAgent??"")&&cy?.maxTouchPoints&&cy?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{},onMutation:this._onMutationHandler.bind(this),...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{u_&&h_.info("Stopping Replay"+(t?` triggered by ${t}`:"")),B_(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,w_(this)}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),u_&&h_.info("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),u_&&h_.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();u_&&h_.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session?.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&C_(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${ph.location.pathname}${ph.location.hash}${ph.location.search}`,t=`${ph.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===my){const e=Vg({category:"replay.throttled"});this.addUpdate((()=>!R_(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||jp(),t=e&&Fp(e),n=(t&&Ap(t).data||{})[_p];if(t&&n&&["route","custom"].includes(n))return Ap(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=b_({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=M_({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!O_(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{ph.document.addEventListener("visibilitychange",this._handleVisibilityChange),ph.addEventListener("blur",this._handleWindowBlur),ph.addEventListener("focus",this._handleWindowFocus),ph.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(iy(this,{autoFlushOnFeedback:this._options._experiments.autoFlushOnFeedback}),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(nh(e,n))})),r.push(Qf(e_(r_,e)),Zf(e_(s_,e)),eh(e_(i_,e)),th(e_(a_,e))),()=>{r.forEach((e=>e()))}}(this)}_removeListeners(){try{ph.document.removeEventListener("visibilitychange",this._handleVisibilityChange),ph.removeEventListener("blur",this._handleWindowBlur),ph.removeEventListener("focus",this._handleWindowFocus),ph.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;I_(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):u_&&h_.info("Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:jm.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(t_).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter((e=>e.start>=t))}return Promise.all(q_(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer?.hasEvents&&(await async function(e){try{return Promise.all(q_(e,[ay(ph.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await hy({replayId:e,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:t,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});const t=ip();if(t){const n=e instanceof fy?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else u_&&h_.error("No session or eventBuffer found to flush.")}async _flush({force:e=!1}={}){if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(u_&&h_.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return u_&&h_.info(`Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`),void(r&&this._debouncedFlush());const s=this.eventBuffer;s&&0===this.session.segmentId&&!s.hasCheckout&&u_&&h_.info("Flushing initial segment without checkout.");const i=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,i&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&E_(this.session)}_onMutationHandler(e){const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Vg({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}function yy(e,t){return[...e,...t].join(",")}const vy='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',by=["content-length","content-type","accept"];let Sy=!1;const wy=e=>new ky(e);class ky{constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:o=!0,useCompression:s=!0,workerUrl:i,_experiments:a={},maskAllText:c=!0,maskAllInputs:u=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:d=750,mutationLimit:p=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:h=[],networkDetailAllowUrls:m=[],networkDetailDenyUrls:g=[],networkCaptureBodies:_=!0,networkRequestHeaders:y=[],networkResponseHeaders:v=[],mask:b=[],maskAttributes:S=["title","placeholder"],unmask:w=[],block:k=[],unblock:E=[],ignore:x=[],maskFn:T,beforeAddRecordingEvent:C,beforeErrorSampling:I,onError:O}={}){this.name="Replay";const M=function({mask:e,unmask:t,block:n,unblock:r,ignore:o}){return{maskTextSelector:yy(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:yy(t,[]),blockSelector:yy(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:yy(r,[]),ignoreSelector:yy(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:b,unmask:w,block:k,unblock:E,ignore:x});if(this._recordingOptions={maskAllInputs:u,maskAllText:c,maskInputOptions:{password:!0},maskTextFn:T,maskInputFn:T,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return r?o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s:s}({maskAttributes:S,maskAllText:c,privacyOptions:M,key:e,value:t,el:n}),...M,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}},recordCrossOriginIframes:Boolean(a.recordCrossOriginIframes)},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,vh),stickySession:o,useCompression:s,workerUrl:i,blockAllMedia:l,maskAllInputs:u,maskAllText:c,mutationBreadcrumbLimit:d,mutationLimit:p,slowClickTimeout:f,slowClickIgnoreSelectors:h,networkDetailAllowUrls:m,networkDetailDenyUrls:g,networkCaptureBodies:_,networkRequestHeaders:Ey(y),networkResponseHeaders:Ey(v),beforeAddRecordingEvent:C,beforeErrorSampling:I,onError:O,_experiments:a},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${vy}`:vy),this._isInitialized&&sf())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Sy}set _isInitialized(e){Sy=e}afterAllSetup(e){sf()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(this._replay?.isEnabled())return this._replay.getSessionId()}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=af(n.replaysSessionSampleRate),s=af(n.replaysOnErrorSampleRate);null==o&&null==s&&Td((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));null!=o&&(r.sessionSampleRate=o);null!=s&&(r.errorSampleRate=s);return r}(this._initialOptions,e);this._replay=new _y({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch{}}}function Ey(e){return[...by,...e.map((e=>e.toLowerCase()))]}function xy(){const e=ip();return e?.getIntegrationByName("Replay")}var Ty=Object.defineProperty,Cy=(e,t,n)=>((e,t,n)=>t in e?Ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Iy{constructor(){Cy(this,"idNodeMap",new Map),Cy(this,"nodeMetaMap",new WeakMap)}getId(e){if(!e)return-1;const t=this.getMeta(e)?.id;return t??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Oy(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Oy(e.parentNode,t,n,r+1):-1}function My(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch{return!1}}}const Ry="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Py={map:{},getId:()=>(console.error(Ry),-1),getNode:()=>(console.error(Ry),null),removeNodeFromMap(){console.error(Ry)},has:()=>(console.error(Ry),!1),reset(){console.error(Ry)}};function Ay(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){$y((()=>{n.set.call(this,e)}),0),s&&s.set&&s.set.call(this,e)}}),()=>Ay(e,t,s||{},!0)}function Ly(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}function Dy(e,t,n,r,o){if(!e)return!1;const s=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}(e);if(!s)return!1;const i=My(t,n);if(!o){const e=r&&s.matches(r);return i(s)&&!e}const a=Oy(s,i);let c=-1;return!(a<0)&&(r&&(c=Oy(s,My(null,r))),a>-1&&c<0||a<c)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Py=new Proxy(Py,{get:(e,t,n)=>("map"===t&&console.error(Ry),Reflect.get(e,t,n))})),Date.now().toString();const Ny={};function Fy(e){const t=Ny[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(e){}return Ny[e]=r.bind(window)}function jy(...e){return Fy("requestAnimationFrame")(...e)}function $y(...e){return Fy("setTimeout")(...e)}var Uy=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Uy||{});let By;const Hy=e=>{if(!By)return e;return(...t)=>{try{return e(...t)}catch(e){if(By&&!0===By(e))return()=>{};throw e}}};for(var qy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wy="undefined"==typeof Uint8Array?[]:new Uint8Array(256),zy=0;zy<64;zy++)Wy[qy.charCodeAt(zy)]=zy;const Vy=new Map;const Gy=(e,t,n)=>{if(!e||!Ky(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Vy.get(e);return n||(n=new Map,Vy.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Jy(e,t,n){if(e instanceof Array)return e.map((e=>Jy(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=qy[n[t]>>2],o+=qy[(3&n[t])<<4|n[t+1]>>4],o+=qy[(15&n[t+1])<<2|n[t+2]>>6],o+=qy[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Jy(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Jy(e.data,t,n),e.width,e.height]}}if(Ky(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Gy(e,t,n)}}return e}const Yy=(e,t,n)=>e.map((e=>Jy(e,t,n))),Ky=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Xy(e,t,n,r,o){const s=[];try{const i=Ly(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(s,...i){if(!Dy(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(s);if("__context"in this||(this.__context=e),o&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[s,...i])}}));s.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach((e=>e()))}}function Zy(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const i of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const u=Ly(e,i,(function(e){return function(...c){const u=e.apply(this,c);if(Gy(u,a,this),"tagName"in this.canvas&&!Dy(this.canvas,r,o,s,!0)){const e=Yy(c,a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch{const r=Ay(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});c.push(r)}return c}class Qy{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,unblockSelector:s,maxCanvasSize:i,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&(By=u),(a&&"number"==typeof t||e.enableManualSnapshot)&&(this.worker=this.initFPSWorker()),this.addWindow(n),e.enableManualSnapshot||Hy((()=>{a&&"all"===t&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,o,s,i,{dataURLOptions:c})}))()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(e){const{sampling:t="all",blockClass:n,blockSelector:r,unblockSelector:o,recordCanvas:s,enableManualSnapshot:i}=this.options;if(!this.windowsSet.has(e)){if(i)return this.windowsSet.add(e),void this.windows.push(new WeakRef(e));Hy((()=>{if(s&&"all"===t&&this.initCanvasMutationObserver(e,n,r,o),s&&"number"==typeof t){const t=Xy(e,n,r,o,!0);this.restoreHandlers.push((()=>{t()}))}}))(),this.windowsSet.add(e),this.windows.push(new WeakRef(e))}}addShadowRoot(e){this.shadowDoms.add(new WeakRef(e))}resetShadowRoots(){this.shadowDoms=new Set}initFPSWorker(){const e=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());return e.onmessage=e=>{const t=e.data,{id:n}=t;if(this.snapshotInProgressMap.set(n,!1),!("base64"in t))return;const{base64:r,type:o,width:s,height:i}=t;this.mutationCb({id:n,type:Uy["2D"],commands:[{property:"clearRect",args:[0,0,s,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:o}]},0,0,s,i]}]})},e}initCanvasFPSObserver(e,t,n,r,o,s){const i=this.takeSnapshot(!1,e,t,n,r,o,s.dataURLOptions);this.restoreHandlers.push((()=>{cancelAnimationFrame(i)}))}initCanvasMutationObserver(e,t,n,r){const o=Xy(e,t,n,r,!1),s=function(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=Ly(t.CanvasRenderingContext2D.prototype,a,(function(s){return function(...i){return Dy(this.canvas,n,r,o,!0)||$y((()=>{const n=Yy(i,t,this);e(this.canvas,{type:Uy["2D"],property:a,args:n})}),0),s.apply(this,i)}}));s.push(i)}catch{const n=Ay(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:Uy["2D"],property:a,args:[t],setter:!0})}});s.push(n)}return()=>{s.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),i=function(e,t,n,r,o,s){const i=[];return i.push(...Zy(t.WebGLRenderingContext.prototype,Uy.WebGL,e,n,r,o,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...Zy(t.WebGL2RenderingContext.prototype,Uy.WebGL2,e,n,r,o,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.restoreHandlers.push((()=>{o(),s(),i()}))}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.restoreHandlers.push((()=>{cancelAnimationFrame(n)}))}takeSnapshot(e,t,n,r,o,s,i,a){const c=1e3/t;let u;const l=e=>{if(e)return[e];const t=[],s=e=>{e.querySelectorAll("canvas").forEach((e=>{Dy(e,n,r,o,!0)||t.push(e)}))};for(const e of this.windows){const t=e.deref();let n;try{n=t&&t.document}catch{}n&&s(n)}for(const e of this.shadowDoms){const t=e.deref();t&&s(t)}return t},d=t=>{this.windows.length&&(this.lastSnapshotTime&&t-this.lastSnapshotTime<c?u=jy(d):(this.lastSnapshotTime=t,l(a).forEach((t=>{if(!this.mirror.hasNode(t))return;const n=this.mirror.getId(t);if(!this.snapshotInProgressMap.get(n)&&t.width&&t.height){if(this.snapshotInProgressMap.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===e?.getContextAttributes()?.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{this.worker?.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:i,maxCanvasSize:s},[e])})).catch((e=>{Hy((()=>{throw e}))()}))}})),e||(u=jy(d))))};return u=jy(d),u}startPendingCanvasMutationFlusher(){jy((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,jy(e)};jy(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),jy((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var ev;new Iy,function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(ev||(ev={}));const tv={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},nv=1280,rv=(e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,nv):nv,n?Math.min(n,nv):nv]};let o;const s=new Promise((e=>o=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new Qy({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return o(r),r},...tv[e]||tv.medium}},async snapshot(e){(await s).snapshot(e)}}};function ov(e={}){const t=Je();if(!function(){const e=Je();return!1!==e?.getOptions().enabled&&!!e?.getTransport()}()||!t)return{};const n=He(A());if(n.getTraceData)return n.getTraceData(e);const r=qe(),o=e.span||Fn(),s=o?xn(o):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return bn(t,r,n)}(r),i=gn(o?Wn(o):qn(t,r));return yn.test(s)?{"sentry-trace":s,baggage:i}:(oe.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function sv(e,t,n,r,o="auto.http.browser"){if(!e.fetchData)return;const{method:s,url:i}=e.fetchData,a=tn()&&t(i);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){an(e,t.response.status);const n=t.response?.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:on,message:"internal_error"});e.end()}(n,e),delete r[t]))}const c=!!Fn(),u=a&&c?Qu(function(e,t,n){const r=function(e,t){const n=e.indexOf("://")<=0&&0!==e.indexOf("//"),r=t??(n?jo:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;const t=new URL(e,r);return n?{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash}:t}catch{}}(e);return{name:r?`${t} ${Uo(r)}`:t,attributes:av(e,r,t,n)}}(i,s,o)):new Wu;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=function(e,t,n){const r=ov({span:n}),o=r["sentry-trace"],s=r.baggage;if(!o)return;const i=t.headers||(Y(e)?e.headers:void 0);if(i){if(function(e){return"undefined"!=typeof Headers&&G(e,Headers)}(i)){const e=new Headers(i);if(e.get("sentry-trace")||e.set("sentry-trace",o),s){const t=e.get("baggage");t?iv(t)||e.set("baggage",`${t},${s}`):e.set("baggage",s)}return e}if(Array.isArray(i)){const e=[...i];i.find((e=>"sentry-trace"===e[0]))||e.push(["sentry-trace",o]);const t=i.find((e=>"baggage"===e[0]&&iv(e[1])));return s&&!t&&e.push(["baggage",s]),e}{const e="sentry-trace"in i?i["sentry-trace"]:void 0,t="baggage"in i?i.baggage:void 0,n=t?Array.isArray(t)?[...t]:[t]:[],r=t&&(Array.isArray(t)?t.find((e=>iv(e))):iv(t));return s&&!r&&n.push(s),{...i,"sentry-trace":e??o,baggage:n.length>0?n.join(","):void 0}}}return{...r}}(t,n,tn()&&c?u:void 0);r&&(e.args[1]=n,n.headers=r)}const l=Je();if(l){const t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};l.emit("beforeOutgoingRequestSpan",u,t)}return u}function iv(e){return e.split(",").some((e=>e.trim().startsWith(pn)))}function av(e,t,n,r){const o={url:e,type:"fetch","http.method":n,[zt]:r,[Wt]:"http.client"};return t&&($o(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function cv(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||vs(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:cs()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function uv(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=uv(r[e],t[e],n-1));return r}const lv="_sentrySpan";function dv(e,t){t?as(e,lv,t):delete e[lv]}function pv(e){return e[lv]}function fv(){return cs()}function hv(){return cs().substring(16)}function mv(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}class gv{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:fv(),sampleRand:Math.random()}}clone(){const e=new gv;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,dv(e,pv(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&cv(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,n=t instanceof gv?t.getScopeData():xs(t)?e:void 0,{tags:r,extra:o,user:s,contexts:i,level:a,fingerprint:c=[],propagationContext:u}=n||{};return this._tags={...this._tags,...r},this._extra={...this._extra,...o},this._contexts={...this._contexts,...i},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,dv(this,void 0),this._attachments=[],this.setPropagationContext({traceId:fv(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:ys(),...e,message:e.message?mv(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:pv(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=uv(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t?.event_id||cs();if(!this._client)return Zo.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n?.event_id||cs();if(!this._client)return Zo.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t?.event_id||cs();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Zo.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}class _v{constructor(e,t){let n,r;n=e||new gv,r=t||new gv,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return r=n,Boolean(r?.then&&"function"==typeof r.then)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n);var r}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function yv(){const e=Go(Vo());return e.stack=e.stack||new _v(Jo("defaultCurrentScope",(()=>new gv)),Jo("defaultIsolationScope",(()=>new gv)))}function vv(e){return yv().withScope(e)}function bv(e,t){const n=yv();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function Sv(e){return yv().withScope((()=>e(yv().getIsolationScope())))}function wv(e){const t=Go(e);return t.acs?t.acs:{withIsolationScope:Sv,withScope:vv,withSetScope:bv,withSetIsolationScope:(e,t)=>Sv(t),getCurrentScope:()=>yv().getScope(),getIsolationScope:()=>yv().getIsolationScope()}}function kv(){return wv(Vo()).getCurrentScope()}function Ev(...e){const t=wv(Vo());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function xv(){return kv().getClient()}const Tv="sentry.source",Cv="sentry.sample_rate",Iv="sentry.previous_trace_sample_rate",Ov="sentry.op",Mv="sentry.origin",Rv="sentry.measurement_unit",Pv="sentry.measurement_value",Av="sentry.custom_span_name",Lv="sentry.exclusive_time",Dv=0,Nv=1;const Fv=1;let jv=!1;function $v(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a,links:c}=qv(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a,links:c}}function Uv(e){return e&&e.length>0?e.map((({context:{spanId:e,traceId:t,traceFlags:n,...r},attributes:o})=>({span_id:e,trace_id:t,sampled:n===Fv,attributes:o,...r}))):void 0}function Bv(e){return"number"==typeof e?Hv(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Hv(e.getTime()):vs()}function Hv(e){return e>9999999999?e/1e3:e}function qv(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:r,startTime:o,name:s,endTime:i,status:a,links:c}=e;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Bv(o),timestamp:Bv(i)||void 0,status:zv(a),op:r[Ov],origin:r[Mv],links:Uv(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Wv(e){const{traceFlags:t}=e.spanContext();return t===Fv}function zv(e){if(e&&e.code!==Dv)return e.code===Nv?"ok":e.message||"unknown_error"}const Vv="_sentryChildSpans",Gv="_sentryRootSpan";function Jv(e,t){const n=e[Gv]||e;as(t,Gv,n),e[Vv]?e[Vv].add(t):as(e,Vv,new Set([t]))}function Yv(e){return e[Gv]||e}function Kv(){const e=wv(Vo());return e.getActiveSpan?e.getActiveSpan():pv(kv())}function Xv(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||xv()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}function Zv(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}const Qv="production",eb="sentry-",tb=/^sentry-/;function nb(e){const t=function(e){if(!e||!Es(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce(((e,t)=>{const n=rb(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{});return rb(e)}(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(tb)){e[t.slice(eb.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function rb(e){return e.split(",").map((e=>e.split("=").map((e=>{try{return decodeURIComponent(e.trim())}catch{return}})))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const ob="_sentryScope",sb="_sentryIsolationScope";function ib(e){return{scope:e[ob],isolationScope:e[sb]}}const ab="_frozenDsc";function cb(e,t){as(e,ab,t)}function ub(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||Qv,release:n.release,public_key:r,trace_id:e};return t.emit("createDsc",o),o}function lb(e){const t=xv();if(!t)return{};const n=Yv(e),r=qv(n),o=r.data,s=n.spanContext().traceState,i=s?.get("sentry.sample_rate")??o[Cv]??o[Iv];function a(e){return"number"!=typeof i&&"string"!=typeof i||(e.sample_rate=`${i}`),e}const c=n[ab];if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&nb(u);if(l)return a(l);const d=ub(e.spanContext().traceId,t),p=o[Tv],f=r.description;return"url"!==p&&f&&(d.transaction=f),Xv()&&(d.sampled=String(Wv(n)),d.sample_rand=s?.get("sentry.sample_rand")??ib(n).scope?.getPropagationContext().sampleRand.toString()),a(d),t.emit("createDsc",d,n),d}class db{constructor(e={}){this._traceId=e.traceId||fv(),this._spanId=e.spanId||hv()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function pb(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function fb(e){return[{type:"span"},e]}function hb(e,t){const n=lb(e[0]),r=t?.getDsn(),o=t?.getOptions().tunnel,s={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!o&&r&&{dsn:pb(r)}},i=t?.getOptions().beforeSendSpan,a=i?e=>{const t=qv(e),n=i(t);return n||(jv||(Xo((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")})),jv=!0),t)}:qv,c=[];for(const t of e){const e=a(t);e&&c.push(fb(e))}return function(e,t=[]){return[e,t]}(s,c)}function mb(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},r=n[Rv],o=n[Pv];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})})),t}class gb{constructor(e={}){this._traceId=e.traceId||fv(),this._spanId=e.spanId||hv(),this._startTime=e.startTimestamp||vs(),this._links=e.links,this._attributes={},this.setAttributes({[Mv]:"manual",[Ov]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Fv:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=Bv(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(Tv,"custom"),this}end(e){this._endTime||(this._endTime=Bv(e),function(e){if(!qo)return;const{description:t="< unknown name >",op:n="< unknown op >"}=qv(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${Yv(e)===e?"root ":""}span "${t}" with ID ${r}`;Zo.log(o)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ov],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:zv(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Mv],profile_id:this._attributes["sentry.profile_id"],exclusive_time:this._attributes[Lv],measurements:mb(this._events),is_segment:this._isStandaloneSpan&&Yv(this)===this||void 0,segment_id:this._isStandaloneSpan?Yv(this).spanContext().spanId:void 0,links:Uv(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){qo&&Zo.log("[Tracing] Adding an event to span:",e);const r=_b(t)?t:n||vs(),o=_b(t)?{}:t||{},s={name:e,time:Bv(r),attributes:o};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=xv();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Yv(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=xv();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(hb([this],e)):(qo&&Zo.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(ib(this).scope||kv()).captureEvent(t)}}_convertSpanToTransaction(){if(!yb(qv(this)))return;this._name||(qo&&Zo.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=ib(this);if(!0!==this._sampled)return;const n=function(e){const t=new Set;return function e(n){if(!t.has(n)&&Wv(n)){t.add(n);const r=n[Vv]?Array.from(n[Vv]):[];for(const t of r)e(t)}}(e),Array.from(t)}(this).filter((e=>e!==this&&!function(e){return e instanceof gb&&e.isStandaloneSpan()}(e))).map((e=>qv(e))).filter(yb),r=this._attributes[Tv];delete this._attributes[Av],n.forEach((e=>{delete e.data[Av]}));const o={contexts:{trace:$v(this)},spans:n.length>1e3?n.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):n,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,dynamicSamplingContext:lb(this)},...r&&{transaction_info:{source:r}}},s=mb(this._events);return s&&Object.keys(s).length&&(qo&&Zo.log("[Measurements] Adding measurements to transaction event",JSON.stringify(s,void 0,2)),o.measurements=s),o}}function _b(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function yb(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}const vb="__SENTRY_SUPPRESS_TRACING__";function bb(e){const t=Eb();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=kb(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>Ev(e.scope,t):void 0!==o?e=>Sb(o,e):e=>e())((()=>{const t=kv(),o=Tb(t);return e.onlyIfParent&&!o?new db:wb({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))}function Sb(e,t){const n=Eb();return n.withActiveSpan?n.withActiveSpan(e,t):Ev((n=>(dv(n,e||void 0),t(n))))}function wb({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Xv()){const r=new db;if(n||!e){cb(r,{sampled:"false",sample_rate:"0",transaction:t.name,...lb(r)})}return r}const o=wv(Vo()).getIsolationScope();let s;if(e&&!n)s=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[vb]&&Wv(e),i=s?new gb({...n,parentSpanId:r,traceId:o,sampled:s}):new db({traceId:o});Jv(e,i);const a=xv();a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i));return i}(e,r,t),Jv(e,s);else if(e){const n=lb(e),{traceId:o,spanId:i}=e.spanContext(),a=Wv(e);s=xb({traceId:o,parentSpanId:i,...t},r,a),cb(s,n)}else{const{traceId:e,dsc:n,parentSpanId:i,sampled:a}={...o.getPropagationContext(),...r.getPropagationContext()};s=xb({traceId:e,parentSpanId:i,...t},r,a),n&&cb(s,n)}return function(e){if(!qo)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=qv(e),{spanId:o}=e.spanContext(),s=Wv(e),i=Yv(e),a=i===e,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:e,description:t}=qv(i);u.push(`root ID: ${i.spanContext().spanId}`),e&&u.push(`root op: ${e}`),t&&u.push(`root description: ${t}`)}Zo.log(`${c}\n  ${u.join("\n  ")}`)}(s),function(e,t,n){e&&(as(e,sb,n),as(e,ob,t))}(s,r,o),s}function kb(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=Bv(e.startTime),delete n.startTime,n}return t}function Eb(){return wv(Vo())}function xb(e,t,n){const r=xv(),o=r?.getOptions()||{},{name:s=""}=e,i={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[l,d,p]=t.getScopeData().sdkProcessingMetadata[vb]?[!1]:function(e,t,n){if(!Xv(e))return[!1];let r,o;"function"==typeof e.tracesSampler?(o=e.tracesSampler({...t,inheritOrSampleWith:e=>"number"==typeof t.parentSampleRate?t.parentSampleRate:"boolean"==typeof t.parentSampled?Number(t.parentSampled):e}),r=!0):void 0!==t.parentSampled?o=t.parentSampled:void 0!==e.tracesSampleRate&&(o=e.tracesSampleRate,r=!0);const s=Zv(o);if(void 0===s)return qo&&Zo.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!s)return qo&&Zo.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,s,r];const i=n<s;return i||qo&&Zo.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[i,s,r]}(o,{name:s,parentSampled:a,attributes:c,parentSampleRate:Zv(u.dsc?.sample_rate)},u.sampleRand),f=new gb({...e,attributes:{[Tv]:"custom",[Cv]:void 0!==d&&p?d:void 0,...c},sampled:l});return!l&&r&&(qo&&Zo.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",f),f}function Tb(e){const t=pv(e);if(!t)return;const n=xv();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Yv(t):t}function Cb(e){return"number"==typeof e&&isFinite(e)}function Ib(e,t,n,{...r}){const o=qv(e).start_timestamp;return o&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),Sb(e,(()=>{const e=bb({startTime:t,...r});return e&&e.end(n),e}))}function Ob(e){const t=xv();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:s}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),l=u?.getReplayId(),d=kv(),p=d.getUser(),f=void 0!==p?p.email||p.id||p.ip_address:void 0;let h;try{h=d.getScopeData().contexts.profile.profile_id}catch{}return bb({name:n,attributes:{release:i,environment:a,user:f||void 0,profile_id:h||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":us.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o},startTime:s,experimental:{standalone:!0}})}function Mb(){return us.addEventListener&&us.performance}function Rb(e){return e/1e3}function Pb(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}const Ab=new WeakMap,Lb=new Map,Db={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Nb(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c}={...Db,...t},u="function"==typeof s?s:e=>!0,l=e=>function(e,t){const n=ee();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(e){return!1}const s=r.origin===o;return t?ue(r.toString(),t)||s&&ue(r.pathname,t):s}{const n=!!e.match(/^\/(?!\/)/);return t?ue(e,t):n}}(e,a),d={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Lb.get(e.span_id);t&&(e.timestamp=t/1e3,Lb.delete(e.span_id))}})),e))),o&&function(e){const t="fetch-body-resolved";ko(t,e),Eo(t,(()=>Oo(Mo)))}((e=>{if(e.response){const t=Ab.get(e.response);t&&e.endTimestamp&&Lb.set(t,e.endTimestamp)}})),Io((e=>{const t=sv(e,u,l,d);if(e.response&&e.fetchData.__span&&Ab.set(e.response,e.fetchData.__span),t){const n=$b(e.fetchData.url),r=n?Bo(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r}),i&&Fb(t),c?.(t,{headers:e.headers})}}))),r&&Cs((e=>{const t=function(e,t,n,r){const o=e.xhr,s=o?.[Ts];if(!o||o.__sentry_own_request__||!s)return;const{url:i,method:a}=s,c=tn()&&t(i);if(e.endTimestamp&&c){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(an(t,s.status_code),t.end(),delete r[e]))}const u=$b(i),l=Bo(u||i),d=Ho(i),p=!!Fn(),f=c&&p?Qu({name:`${a} ${d}`,attributes:{url:i,type:"xhr","http.method":a,"http.url":u,"server.address":l?.host,[zt]:"auto.http.browser",[Wt]:"http.client",...l?.search&&{"http.query":l?.search},...l?.hash&&{"http.fragment":l?.hash}}}):new Wu;o.__sentry_xhr_span_id__=f.spanContext().spanId,r[o.__sentry_xhr_span_id__]=f,n(i)&&function(e,t){const{"sentry-trace":n,baggage:r}=ov({span:t});n&&function(e,t,n){const r=e.__sentry_xhr_v3__?.request_headers;if(r?.["sentry-trace"])return;try{if(e.setRequestHeader("sentry-trace",t),n){const t=r?.baggage;t&&t.split(",").some((e=>e.trim().startsWith("sentry-")))||e.setRequestHeader("baggage",n)}}catch(e){}}(e,n,r)}(o,tn()&&p?f:void 0);const h=Je();h&&h.emit("beforeOutgoingRequestSpan",f,e);return f}(e,u,l,d);if(t){let n;i&&Fb(t);try{n=new Headers(e.xhr.__sentry_xhr_v3__?.request_headers)}catch{}c?.(t,{headers:n})}}))}function Fb(e){const{url:t}=On(e).data;if(!t||"string"!=typeof t)return;const n=nh("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=Pb(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!Ce())return r;return[...r,["http.request.redirect_start",jb(e.redirectStart)],["http.request.fetch_start",jb(e.fetchStart)],["http.request.domain_lookup_start",jb(e.domainLookupStart)],["http.request.domain_lookup_end",jb(e.domainLookupEnd)],["http.request.connect_start",jb(e.connectStart)],["http.request.secure_connection_start",jb(e.secureConnectionStart)],["http.request.connection_end",jb(e.connectEnd)],["http.request.request_start",jb(e.requestStart)],["http.request.response_start",jb(e.responseStart)],["http.request.response_end",jb(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function jb(e=0){return((Ce()||performance.timeOrigin)+e)/1e3}function $b(e){try{return new URL(e,mo.location.origin).href}catch{return}}const Ub={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Bb="heartbeatFailed",Hb="idleTimeout",qb="finalTimeout",Wb="externalFinish";function zb(e,t={}){const n=new Map;let r,o=!1,s=Wb,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Ub.idleTimeout,finalTimeout:u=Ub.finalTimeout,childSpanTimeout:l=Ub.childSpanTimeout,beforeSpanEnd:d}=t,p=Je();if(!p||!tn()){const e=new Wu;return Bn(e,{sample_rate:"0",sampled:"false",...Wn(e)}),e}const f=qe(),h=Fn(),m=function(e){const t=Qu(e);return Pe(qe(),t),M&&oe.log("[Tracing] Started span is an idle span"),t}(e);function g(){r&&(clearTimeout(r),r=void 0)}function _(e){g(),r=setTimeout((()=>{!o&&0===n.size&&i&&(s=Hb,m.end(e))}),c)}function y(e){r=setTimeout((()=>{!o&&i&&(s=Bb,m.end(e))}),l)}function v(e){o=!0,n.clear(),a.forEach((e=>e())),Pe(f,h);const t=On(m),{start_timestamp:r}=t;if(!r)return;t.data[Vt]||m.setAttribute(Vt,s),oe.log(`[Tracing] Idle span "${t.op}" finished`);const i=Dn(m).filter((e=>e!==m));let l=0;i.forEach((t=>{t.isRecording()&&(t.setStatus({code:on,message:"cancelled"}),t.end(e),M&&oe.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=On(t),{timestamp:r=0,start_timestamp:o=0}=n,s=o<=e,i=r-o<=(u+c)/1e3;if(M){const e=JSON.stringify(t,void 0,2);s?i||oe.log("[Tracing] Discarding span since it finished after idle span final timeout",e):oe.log("[Tracing] Discarding span since it happened after idle span was finished",e)}i&&s||(!function(e,t){e[Pn]&&e[Pn].delete(t)}(m,t),l++)})),l>0&&m.setAttribute("sentry.idle_span_discarded_spans",l)}return m.end=new Proxy(m.end,{apply(e,t,n){if(d&&d(m),t instanceof Wu)return;const[r,...o]=n,s=Cn(r||xe()),i=Dn(m).filter((e=>e!==m));if(!i.length)return v(s),Reflect.apply(e,t,[s,...o]);const a=i.map((e=>On(e).timestamp)).filter((e=>!!e)),c=a.length?Math.max(...a):void 0,l=On(m).start_timestamp,p=Math.min(l?l+u/1e3:1/0,Math.max(l||-1/0,Math.min(s,c||1/0)));return v(p),Reflect.apply(e,t,[p,...o])}}),a.push(p.on("spanStart",(e=>{if(o||e===m||On(e).timestamp)return;var t;Dn(m).includes(e)&&(t=e.spanContext().spanId,g(),n.set(t,!0),y(xe()+l/1e3))}))),a.push(p.on("spanEnd",(e=>{var t;o||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&_(xe()+c/1e3))}))),a.push(p.on("idleSpanEnableAutoFinish",(e=>{e===m&&(i=!0,_(),n.size&&y())}))),t.disableAutoFinish||_(),setTimeout((()=>{o||(m.setStatus({code:on,message:"deadline_exceeded"}),s=qb,m.end())}),u),m}const Vb=zo,Gb=80;function Jb(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||Gb;for(;n&&s++<r&&(u=Yb(n,l),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function Yb(e,t){const n=e,r=[];if(!n?.tagName)return"";if(Vb.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t?.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o?.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&Es(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=n.getAttribute(e);t&&r.push(`[${e}="${t}"]`)}return r.join("")}function Kb(e){if(!Vb.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Xb(){let e,t,n=0;if(!function(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}())return;let r=!1;function o(){r||(r=!0,t&&function(e,t,n){Ci&&Zo.log(`Sending CLS span (${e})`);const r=Rb((Ss()||0)+(t?.startTime||0)),o=kv().getScopeData().transactionName,s=t?Jb(t.sources[0]?.node):"Layout shift",i={[Mv]:"auto.http.browser.cls",[Ov]:"ui.webvital.cls",[Lv]:t?.duration||0,"sentry.pageload.span_id":n},a=Ob({name:s,transaction:o,attributes:i,startTime:r});a&&(a.addEvent("cls",{[Rv]:"",[Pv]:e}),a.end(r))}(n,e,t),s())}const s=Zf((({metric:t})=>{const r=t.entries[t.entries.length-1];r&&(n=t.value,e=r)}),!0);ff((()=>{o()})),setTimeout((()=>{const e=xv();if(!e)return;const n=e.on("startNavigationSpan",(()=>{o(),n?.()})),r=Kv();if(r){const e=Yv(r);"pageload"===qv(e).op&&(t=e.spanContext().spanId)}}),0)}const Zb=2147483647;let Qb,eS,tS=0,nS={};function rS({recordClsStandaloneSpans:e}){const t=Mb();if(t&&Ss()){t.mark&&us.performance.mark("sentry-tracing-init");const n=eh((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Rb(Ss()),r=Rb(t.startTime);nS.fid={value:e.value,unit:"millisecond"},nS["mark.fid"]={value:n+r,unit:"second"}})),r=Qf((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(nS.lcp={value:e.value,unit:"millisecond"},Qb=t)}),!0),o=uh("ttfb",(({metric:e})=>{e.entries[e.entries.length-1]&&(nS.ttfb={value:e.value,unit:"millisecond"})}),ah,Kf),s=e?Xb():Zf((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(nS.cls={value:e.value,unit:""},eS=t)}),!0);return()=>{n(),r(),o(),s?.()}}return()=>{}}function oS(e,t){const n=Mb(),r=Ss();if(!n?.getEntries||!r)return;const o=Rb(r),s=n.getEntries(),{op:i,start_timestamp:a}=qv(e);if(s.slice(tS).forEach((t=>{const n=Rb(t.startTime),r=Rb(Math.max(0,t.duration));if(!("navigation"===i&&a&&o+n<a))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{sS(e,t,r,n)})),sS(e,t,"secureConnection",n,"TLS/SSL"),sS(e,t,"fetch",n,"cache"),sS(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+Rb(t.requestStart),o=n+Rb(t.responseEnd),s=n+Rb(t.responseStart);t.responseEnd&&(Ib(e,r,o,{op:"browser.request",name:t.name,attributes:{[Mv]:"auto.ui.browser.metrics"}}),Ib(e,s,o,{op:"browser.response",name:t.name,attributes:{[Mv]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,o);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o){const s=uf(!1),i=Rb(s?s.requestStart:0),a=o+Math.max(n,i),c=o+n,u=c+r,l={[Mv]:"auto.resource.browser.metrics"};a!==c&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=a);a<=u&&Ib(e,a,u,{name:t.name,op:t.entryType,attributes:l})}(e,t,n,r,o);const s=yf(),i=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&i&&(nS.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&i&&(nS.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,s){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const i=function(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}(n),a={[Mv]:"auto.resource.browser.metrics"};iS(a,t,"transferSize","http.response_transfer_size"),iS(a,t,"encodedBodySize","http.response_content_length"),iS(a,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;null!=c&&(a["http.response_delivery_type"]=c);const u=t.renderBlockingStatus;u&&(a["resource.render_blocking_status"]=u);i.protocol&&(a["url.scheme"]=i.protocol.split(":").pop());i.host&&(a["server.address"]=i.host);a["url.same_origin"]=n.includes(us.location.origin);const{name:l,version:d}=Pb(t.nextHopProtocol);a["network.protocol.name"]=l,a["network.protocol.version"]=d;const p=s+r,f=p+o;Ib(e,p,f,{name:n.replace(us.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}(e,t,t.name,n,r,o)}})),tS=Math.max(s.length-1,0),function(e){const t=us.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Cb(n.rtt)&&(nS["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Cb(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);Cb(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===i){!function(e){const t=uf(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(nS);const n=nS["mark.fid"];n&&nS.fid&&(Ib(e,n.value,n.value+Rb(nS.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Mv]:"auto.ui.browser.metrics"}}),delete nS["mark.fid"]),"fcp"in nS&&t.recordClsOnPageloadSpan||delete nS.cls,Object.entries(nS).forEach((([e,t])=>{!function(e,t,n,r=Kv()){const o=r&&Yv(r);o&&(qo&&Zo.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[Pv]:t,[Rv]:n}))}(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",lf()),function(e){Qb&&(Qb.element&&e.setAttribute("lcp.element",Jb(Qb.element)),Qb.id&&e.setAttribute("lcp.id",Qb.id),Qb.url&&e.setAttribute("lcp.url",Qb.url.trim().slice(0,200)),null!=Qb.loadTime&&e.setAttribute("lcp.loadTime",Qb.loadTime),null!=Qb.renderTime&&e.setAttribute("lcp.renderTime",Qb.renderTime),e.setAttribute("lcp.size",Qb.size));eS?.sources&&eS.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,Jb(t.node))))}(e)}Qb=void 0,eS=void 0,nS={}}function sS(e,t,n,r,o=n){const s=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),i=t[s],a=t[`${n}Start`];a&&i&&Ib(e,r+Rb(a),r+Rb(i),{op:`browser.${o}`,name:t.name,attributes:{[Mv]:"auto.ui.browser.metrics",..."redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{}}})}function iS(e,t,n,r){const o=t[n];null!=o&&o<Zb&&(e[r]=o)}const aS=[],cS=new Map;function uS(){if(Mb()&&Ss()){const e=th((({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&lS[t.name]));if(!t)return;const{interactionId:n}=t,r=lS[t.name],o=Rb(Ss()+t.startTime),s=Rb(e.value),i=Kv(),a=i?Yv(i):void 0,c=(null!=n?cS.get(n):void 0)||a,u=c?qv(c).description:kv().getScopeData().transactionName,l=Ob({name:Jb(t.target),transaction:u,attributes:{[Mv]:"auto.http.browser.inp",[Ov]:`ui.interaction.${r}`,[Lv]:t.duration},startTime:o});l&&(l.addEvent("inp",{[Rv]:"millisecond",[Pv]:e.value}),l.end(o+s))}));return()=>{e()}}return()=>{}}const lS={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const dS=3600,pS="sentry_previous_trace",fS="sentry.previous_trace";function hS(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r="session-storage"===t;let o=r?function(){try{const e=mo.sessionStorage?.getItem(pS);return JSON.parse(e)}catch(e){return}}():void 0;e.on("spanStart",(e=>{if(Nn(e)!==e)return;const t=qe().getPropagationContext();o=function(e,t,n){const r=On(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Ht])}catch{return 0}}const s={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return s;const i=e.spanContext;if(i.traceId===r.trace_id)return e;Date.now()/1e3-e.startTimestamp<=dS&&(bo&&oe.info(`Adding previous_trace ${i} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:i,attributes:{[en]:"previous_trace"}}),t.setAttribute(fS,`${i.traceId}-${i.spanId}-${mS(i)?1:0}`));return s}(o,e,t),r&&function(e){try{mo.sessionStorage.setItem(pS,JSON.stringify(e))}catch(e){bo&&oe.warn("Could not store previous trace in sessionStorage",e)}}(o)}));let s=!0;n&&e.on("beforeSampling",(e=>{if(!o)return;const t=qe(),n=t.getPropagationContext();s&&n.parentSpanId?s=!1:(t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(o.sampleRate),sampled:String(mS(o.spanContext))},sampleRand:o.sampleRand}),e.parentSampled=mS(o.spanContext),e.parentSampleRate=o.sampleRate,e.spanAttributes={...e.spanAttributes,[qt]:o.sampleRate})}))}function mS(e){return 1===e.traceFlags}const gS={...Ub,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...Db};let _S=!1;const yS=(e={})=>{_S&&re((()=>{console.warn("Multiple browserTracingIntegration instances are not supported.")})),_S=!0;const t=mo.document;Cl();const{enableInp:n,enableLongTask:r,enableLongAnimationFrame:o,_experiments:{enableInteractions:s,enableStandaloneClsSpans:i},beforeStartSpan:a,idleTimeout:c,finalTimeout:u,childSpanTimeout:l,markBackgroundSpan:d,traceFetch:p,traceXHR:f,trackFetchStreamPerformance:h,shouldCreateSpanForRequest:m,enableHTTPTimings:g,instrumentPageLoad:_,instrumentNavigation:y,linkPreviousTrace:v,consistentTraceSampling:b,onRequestSpanStart:S}={...gS,...e},w=rS({recordClsStandaloneSpans:i||!1});n&&uS(),o&&P.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{const t=Kv();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=Rb(Ss()+n.startTime),{start_timestamp:r,op:o}=qv(t);if("navigation"===o&&r&&e<r)continue;const s=Rb(n.duration),i={[Mv]:"auto.ui.browser.metrics"},a=n.scripts[0],{invoker:c,invokerType:u,sourceURL:l,sourceFunctionName:d,sourceCharPosition:p}=a;i["browser.script.invoker"]=c,i["browser.script.invoker_type"]=u,l&&(i["code.filepath"]=l),d&&(i["code.function"]=d),-1!==p&&(i["browser.script.source_char_position"]=p),Ib(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:i})}})).observe({type:"long-animation-frame",buffered:!0}):r&&nh("longtask",(({entries:e})=>{const t=Kv();if(!t)return;const{op:n,start_timestamp:r}=qv(t);for(const o of e){const e=Rb(Ss()+o.startTime),s=Rb(o.duration);"navigation"===n&&r&&e<r||Ib(t,e,e+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Mv]:"auto.ui.browser.metrics"}})}})),s&&nh("event",(({entries:e})=>{const t=Kv();if(t)for(const n of e)if("click"===n.name){const e=Rb(Ss()+n.startTime),r=Rb(n.duration),o={name:Jb(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[Mv]:"auto.ui.browser.metrics"}},s=Kb(n.target);s&&(o.attributes["ui.component_name"]=s),Ib(t,e,e+r,o)}}));const k={name:void 0,source:void 0};function E(e,n){const r="pageload"===n.op,o=a?a(n):n,s=o.attributes||{};n.name!==o.name&&(s[Bt]="custom",o.attributes=s),k.name=o.name,k.source=s[Bt];const d=zb(o,{idleTimeout:c,finalTimeout:u,childSpanTimeout:l,disableAutoFinish:r,beforeSpanEnd:t=>{w(),oS(t,{recordClsOnPageloadSpan:!i}),ES(e,void 0);const n=qe(),r=n.getPropagationContext();n.setPropagationContext({...r,traceId:d.spanContext().traceId,sampled:Mn(d),dsc:Wn(t)})}});function p(){t&&["interactive","complete"].includes(t.readyState)&&e.emit("idleSpanEnableAutoFinish",d)}ES(e,d),r&&t&&(t.addEventListener("readystatechange",(()=>{p()})),p())}return{name:"BrowserTracing",afterAllSetup(e){let t=ee();function r(){const t=kS(e);t&&!On(t).timestamp&&(bo&&oe.log(`[Tracing] Finishing current active span with op: ${On(t).op}`),t.setAttribute(Vt,"cancelled"),t.end())}if(e.on("startNavigationSpan",(t=>{Je()===e&&(r(),We().setPropagationContext({traceId:Le(),sampleRand:Math.random()}),qe().setPropagationContext({traceId:Le(),sampleRand:Math.random()}),E(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,n={})=>{if(Je()!==e)return;r();const o=vn(n.sentryTrace||SS("sentry-trace"),n.baggage||SS("baggage"));qe().setPropagationContext(o),E(e,{op:"pageload",...t})})),"off"!==v&&hS(e,{linkPreviousTrace:v,consistentTraceSampling:b}),mo.location){if(_){const t=Ce();vS(e,{name:mo.location.pathname,startTime:t?t/1e3:void 0,attributes:{[Bt]:"url",[zt]:"auto.pageload.browser"}})}y&&Ps((({to:n,from:r})=>{void 0!==r||-1===t?.indexOf(n)?r!==n&&(t=void 0,bS(e,{name:mo.location.pathname,attributes:{[Bt]:"url",[zt]:"auto.navigation.browser"}})):t=void 0}))}d&&(mo.document?mo.document.addEventListener("visibilitychange",(()=>{const e=Fn();if(!e)return;const t=Nn(e);if(mo.document.hidden&&t){const e="cancelled",{op:n,status:r}=On(t);bo&&oe.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:on,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):bo&&oe.warn("[Tracing] Could not set up background tab detection due to lack of global document")),s&&function(e,t,n,r,o){const s=mo.document;let i;const a=()=>{const s="ui.action.click",a=kS(e);if(a){const e=On(a).op;if(["navigation","pageload"].includes(e))return void(bo&&oe.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`))}i&&(i.setAttribute(Vt,"interactionInterrupted"),i.end(),i=void 0),o.name?i=zb({name:o.name,op:s,attributes:{[Bt]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):bo&&oe.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`)};s&&addEventListener("click",a,{once:!1,capture:!0})}(e,c,u,l,k),n&&function(){const e=({entries:e})=>{const t=Kv(),n=t&&Yv(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!cS.has(t)){if(aS.length>10){const e=aS.shift();cS.delete(e)}aS.push(t),cS.set(t,n)}}))};nh("event",e),nh("first-input",e)}(),Nb(e,{traceFetch:p,traceXHR:f,trackFetchStreamPerformance:h,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:g,onRequestSpanStart:S})}}};function vS(e,t,n){return e.emit("startPageLoadSpan",t,n),qe().setTransactionName(t.name),kS(e)}function bS(e,t){return e.emit("startNavigationSpan",t),qe().setTransactionName(t.name),kS(e)}function SS(e){const t=mo.document,n=t?.querySelector(`meta[name=${e}]`);return n?.getAttribute("content")||void 0}const wS="_sentry_idleSpan";function kS(e){return e[wS]}function ES(e,t){de(e,wS,t)}const xS=100,TS=5e3,CS=36e5;function IS(e){function t(...e){M&&oe.info("[Offline]:",...e)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const o=n.createStore(n);let s,i=TS;function a(e){s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const e=await o.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),u(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof s&&s.unref&&s.unref()}function c(){s||(a(i),i=Math.min(2*i,CS))}async function u(e,s=!1){if(!s&&Cr(e,["replay_event","replay_recording"]))return await o.push(e),a(xS),{};try{if(n.shouldSend&&!1===await n.shouldSend(e))throw new Error("Envelope not sent because `shouldSend` callback returned false");const t=await r.send(e);let o=xS;if(t)if(t.headers?.["retry-after"])o=Ei(t.headers["retry-after"]);else if(t.headers?.["x-sentry-rate-limits"])o=6e4;else if((t.statusCode||0)>=400)return t;return a(o),i=TS,t}catch(r){if(await function(e,t,r){return!Cr(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,r))}(e,r,i))return s?await o.unshift(e):await o.push(e),c(),t("Error sending. Event queued.",r),{};throw r}}return n.flushAtStartup&&c(),{send:u,flush:e=>(void 0===e&&(i=TS,a(xS)),r.flush(e))}}}function OS(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function MS(e){return OS(e.getAllKeys())}function RS(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=OS(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await Or(t);await function(e,t,n){return e((e=>MS(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),OS(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await Or(t);await function(e,t,n){return e((e=>MS(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),OS(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e((e=>MS(e).then((t=>{const n=t[0];if(null!=n)return OS(e.get(n)).then((t=>(e.delete(n),OS(e.transaction).then((()=>t)))))}))))}(n());if(e)return Mr(e)}catch(e){}}}}function PS(e=Pi){return function(e){return t=>{const n=e({...t,createStore:RS});return mo.addEventListener("online",(async e=>{await n.flush()})),n}}(IS(e))}const AS=1e6,LS=String(0),DS="main",NS=mo.navigator;let FS="",jS="",$S="",US=NS?.userAgent||"",BS="";const HS=NS?.language||NS?.languages?.[0]||"";const qS=NS?.userAgentData;var WS;function zS(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[LS]:{name:DS}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,i=Ce(),a="number"==typeof performance.timeOrigin?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach(((o,i)=>{if(void 0===o.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[i]={elapsed_since_start_ns:((o.timestamp+c-s)*AS).toFixed(0),stack_id:t,thread_id:LS});let a=e.stacks[o.stackId];const u=[];for(;a;){u.push(a.frameId);const t=e.frames[a.frameId];t&&void 0===r.frames[a.frameId]&&(r.frames[a.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),a=void 0===a.parentId?void 0:e.stacks[a.parentId]}const l={elapsed_since_start_ns:((o.timestamp+c-s)*AS).toFixed(0),stack_id:n,thread_id:LS};r.stacks[n]=u,r.samples[i]=l,n++})),r}(e):e}function VS(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e.contexts?.trace?.trace_id;return"string"==typeof t&&32!==t.length&&bo&&oe.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),s=zS(n),i=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:1e3*xe()),a="number"==typeof r.timestamp?1e3*r.timestamp:1e3*xe();return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||It,runtime:{name:"javascript",version:mo.navigator.userAgent},os:{name:FS,version:jS,build_number:US},device:{locale:HS,model:BS,manufacturer:US,architecture:$S,is_emulator:!1},debug_meta:{images:JS(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||_e(),trace_id:o,active_thread_id:LS,relative_start_ns:"0",relative_end_ns:(1e6*(a-i)).toFixed(0)}]}}function GS(e){return"pageload"===On(e).op}function JS(e){const t=Je(),n=t?.getOptions(),r=n?.stackParser;return r?function(e,t){const n=Ft(e);if(!n)return[];const r=[];for(const e of t)e&&n[e]&&r.push({type:"sourcemap",code_file:e,debug_id:n[e]});return r}(r,e):[]}"object"==typeof(WS=qS)&&null!==WS&&"getHighEntropyValues"in WS&&qS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(FS=e.platform||"",$S=e.architecture||"",BS=e.model||"",jS=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];US=`${t.brand} ${t.version}`}})).catch((e=>{}));let YS=!1;const KS=3e4;function XS(e){if(YS)return bo&&oe.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return bo&&oe.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=Je(),n=t?.getOptions();if(!n)return bo&&oe.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(bo&&oe.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(bo&&oe.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return bo&&oe.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return bo&&oe.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(bo&&oe.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function ZS(e,t,n,r){return function(e){return e.samples.length<2?(bo&&oe.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(bo&&oe.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?VS(e,t,n,r):null}const QS=new Map;function ew(e){const t=QS.get(e);return t&&QS.delete(e),t}function tw(e){let t;GS(e)&&(t=1e3*xe());const n=function(){const e=mo.Profiler;if("function"!=typeof e)return void(bo&&oe.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(KS/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){bo&&(oe.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),oe.log("[Profiling] Disabling profiling for current user session.")),YS=!0}}();if(!n)return;bo&&oe.log(`[Profiling] started profiling span: ${On(e).description}`);const r=_e();async function o(){if(e&&n)return n.stop().then((t=>{s&&(mo.clearTimeout(s),s=void 0),bo&&oe.log(`[Profiling] stopped profiling of span: ${On(e).description}`),t?function(e,t){if(QS.set(e,t),QS.size>30){const e=QS.keys().next().value;QS.delete(e)}}(r,t):bo&&oe.log(`[Profiling] profiler returned null profile for: ${On(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{bo&&oe.log("[Profiling] error while stopping profiler:",e)}))}qe().setContext("profile",{profile_id:r,start_timestamp:t});let s=mo.setTimeout((()=>{bo&&oe.log("[Profiling] max profile duration elapsed, stopping profiling for:",On(e).description),o()}),KS);const i=e.end.bind(e);e.end=function(){return e?(o().then((()=>{i()}),(()=>{i()})),e):i()}}const nw=()=>({name:"BrowserProfiling",setup(e){const t=Fn(),n=t&&Nn(t);n&&GS(n)&&XS(n)&&tw(n),e.on("spanStart",(e=>{e===Nn(e)&&XS(e)&&tw(e)})),e.on("beforeEnvelope",(e=>{if(!QS.size)return;const t=function(e){const t=[];return Tr(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r?.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e?.contexts,r=t?.profile?.profile_id,o=t?.profile?.start_timestamp;if("string"!=typeof r){bo&&oe.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){bo&&oe.log("[Profiling] cannot find profile for a span without a profile context");continue}t?.profile&&delete t.profile;const s=ew(r);if(!s){bo&&oe.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const i=ZS(r,o,s,e);i&&n.push(i)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))}});const rw=(e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{bo&&oe.log("Using Sidecar URL",t)},processEvent:e=>function(e){return Boolean("transaction"===e.type&&e.spans&&e.contexts&&e.contexts.trace&&"ui.action.click"===e.contexts.trace.op&&e.spans.some((({description:e})=>e?.includes("#sentry-spotlight"))))}(e)?null:e,afterAllSetup:e=>{!function(e,t){const n=Oi("fetch");let r=0;e.on("beforeEnvelope",(e=>{r>3?oe.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:Or(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then((e=>{e.status>=200&&e.status<400&&(r=0)}),(e=>{r++,oe.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)}))}))}(e,t)}}};const ow=100;function sw(e){const t=qe().getScopeData().contexts.flags,n=t?t.values:[];return n.length?(void 0===e.contexts&&(e.contexts={}),e.contexts.flags={values:[...n]},e):e}function iw(e,t,n=ow){const r=qe().getScopeData().contexts;r.flags||(r.flags={values:[]});!function(e,t,n,r){if("boolean"!=typeof n)return;if(e.length>r)return void(bo&&oe.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`));const o=e.findIndex((e=>e.flag===t));-1!==o&&e.splice(o,1);e.length===r&&e.shift();e.push({flag:t,result:n})}(r.flags.values,e,t,n)}const aw=()=>({name:"FeatureFlags",processEvent:(e,t,n)=>sw(e),addFeatureFlag(e,t){iw(e,t)}}),cw=()=>({name:"LaunchDarkly",processEvent:(e,t,n)=>sw(e)});function uw(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{iw(e,t.value)}}}const lw=()=>({name:"OpenFeature",processEvent:(e,t,n)=>sw(e)});class dw{after(e,t){iw(t.flagKey,t.value)}error(e,t,n){iw(e.flagKey,e.defaultValue)}}const pw=({featureFlagClientClass:e})=>({name:"Unleash",processEvent:(e,t,n)=>sw(e),setupOnce(){le(e.prototype,"isEnabled",fw)}});function fw(e){return function(...t){const n=t[0],r=e.apply(this,t);return"string"==typeof n&&"boolean"==typeof r?iw(n,r):bo&&oe.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const hw=({featureFlagClient:e})=>({name:"Statsig",processEvent:(e,t,n)=>sw(e),setup(){e.on("gate_evaluation",(e=>{iw(e.gate.name,e.gate.value)}))}});async function mw(){const e=Je();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await fetch("https://o447951.ingest.sentry.io/api/1337/envelope/?sentry_version=7&sentry_key=1337&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"})}catch{return"sentry-unreachable"}}function gw(e){return gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gw(e)}function _w(e){var t=vw();return function(){var n,r=Sw(e);if(t){var o=Sw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==gw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function yw(e){var t="function"==typeof Map?new Map:void 0;return yw=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(vw())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&bw(o,n.prototype),o}(e,arguments,Sw(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),bw(n,e)},yw(e)}function vw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(vw=function(){return!!e})()}function bw(e,t){return bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bw(e,t)}function Sw(e){return Sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Sw(e)}function ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ww(Object(n),!0).forEach((function(t){Ew(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ww(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ew(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=gw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gw(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tw(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function Cw(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}var Iw="https://e5b762cad76048429e641d42fc01c066@o498905.ingest.us.sentry.io/6641537",Ow="https://c68dd093391641eb9837855223645df5@o498905.ingest.us.sentry.io/5578299",Mw=!0,Rw=new WeakSet,Pw=function e(t){xw(this,e),Tw(this,Rw),this.environment=t,Mw="production"===this.environment||"staging"===this.environment,Cw(this,Rw,Aw).call(this)};function Aw(){if(Mw){var e=Iw;if("production"===this.environment)e=Ow;else e=Iw;Di({dsn:e,integrations:function(e){var t=e.filter((function(e){return"GlobalHandlers"!==e.name}));return t.push(Wi({filterKeys:["3f1b0c2a4d5e4f7a8c6e9b2d3e4f5a6b"],behaviour:"apply-tag-if-contains-third-party-frames"})),t},ignoreErrors:["TypeError","ReferenceError","NotFoundError","SyntaxError","InvalidStateError","NetworkError","Java object is gone"]})}}var Lw=function e(t){xw(this,e),this.type="error",this.level="error",this.category="error",this.data=kw(kw({},Object.keys(t).reduce((function(e,n){return"params"===n||(e[n.includes("Token")?n.replace("Token","Tkn"):n]=t[n]),e}),{})),{},{web:window.location}),this.message=""},Dw=function e(){xw(this,e)};Ew(Dw,"NO_REJECT_LINK","No reject link found on the page"),Ew(Dw,"FETCH_PRELOAD","Failed to fetch preloaded data"),Ew(Dw,"FAILED_TO_OPEN_IFRAME_POPUP","Failed to open iframe popup"),Ew(Dw,"FAILED_TO_REJECT_OFFER","Failed to reject offer"),Ew(Dw,"FAILED_TO_LOAD_IFRAME_POPUP","Failed to load iframe popup"),Ew(Dw,"FAILED_TO_FETCH_POPUP_CONTENT","Failed to fetch popup content"),Ew(Dw,"FAILED_TO_SKIP_POPUP","Failed to skip popup"),Ew(Dw,"FAILED_TO_CONFIRM_IFRAME_POPUP_OFFER","Failed to confirm popup offer"),Ew(Dw,"FAILED_TO_REJECT_IFRAME_POPUP_OFFER","Failed to reject popup offer"),Ew(Dw,"FAILED_TO_REDIRECT","Failed to redirect"),Ew(Dw,"TOKEN_MISSING","Token is missing"),Ew(Dw,"IFRAME_ELEMENT_NOT_FOUND","Iframe element not found"),Ew(Dw,"PAYMENT_FORM_NOT_FOUND","Payment form not found"),Ew(Dw,"PAYMENT_REJECT_BUTTON_NOT_FOUND","Payment reject button not found");var Nw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bw(e,t)}(n,e);var t=_w(n);function n(e,r){var o;return xw(this,n),(o=t.call(this,e)).name="ExternalOcuJS:Exception",o.error=r,o}return n}(yw(Error)),Fw=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(Mw&&void 0!==t){if(n&&Object.keys(n).length>0&&Do(n),r)sr("critical",!0),Zn(e);else Qn("".concat(e.name," - ").concat(e.message),e);console.error("Exception captured",e)}else console.error("Could not capture exception",e)};function jw(e){return jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jw(e)}function $w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}(e,t)||Uw(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uw(e,t){if(e){if("string"==typeof e)return Bw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bw(e,t):void 0}}function Bw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Hw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hw(Object(n),!0).forEach((function(t){zw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vw(r.key),r)}}function zw(e,t,n){return(t=Vw(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vw(e){var t=function(e,t){if("object"!=jw(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jw(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jw(t)?t:t+""}function Gw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zw(e,t)}function Yw(e){var t=Xw();return function(){var n,r=Qw(e);if(t){var o=Qw(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==jw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Kw(e)}(this,n)}}function Kw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xw=function(){return!!e})()}function Zw(e,t){return Zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zw(e,t)}function Qw(e){return Qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qw(e)}var ek=function(e){Jw(n,e);var t=Yw(n);function n(e,r,o,s,i){var c,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Gw(this,n),zw(Kw(c=t.call(this)),"shopUrl",""),zw(Kw(c),"xOcuToken",""),zw(Kw(c),"xOcuMToken",""),zw(Kw(c),"iso2Code",""),zw(Kw(c),"fHash",""),zw(Kw(c),"acceptedUrlObj",""),zw(Kw(c),"loader",null),zw(Kw(c),"iframeDocument",null),zw(Kw(c),"productResources",[]),zw(Kw(c),"redirectToTyCallback",null),zw(Kw(c),"popupLoadedCallback",null),c.shopUrl=e,c.xOcuToken=r,c.iso2Code=o,c.fHash=s,c.acceptedUrlObj=i,c.xOcuMToken=u,c.loader=new a,c.redirectToTyCallback=l,c.popupLoadedCallback=d,c.xOcuToken||c.xOcuMToken?c.buildPopUpResources():(Fw(new Nw(Dw.TOKEN_MISSING),new Lw(Kw(c)),!1),c.redirectToTyCallback("Required parameters are missing.")),c}return function(e,t,n){t&&Ww(e.prototype,t),n&&Ww(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"clearIframe",value:function(){this.iframeDocument=null;var e=document.querySelector("iframe.cp-exocu-frame");e&&e.remove()}},{key:"buildPopUpResources",value:function(){var e=this;this.clearIframe(),this.attachIframeContainer(),this.createIframe(),this.fetchPopUpContent().then((function(t){e.loadContent(JSON.parse(t.modal_html_iframe)),e.productResources=t.resources;var n=document.querySelector("iframe.cp-exocu-frame"),r=!1;n.onload=function(){r=!0,e.iframeDocument=n.contentDocument||n.contentWindow.document,e.iframeDocument?e.bindEvents(t):e.handleIframeError()},setTimeout((function(){if(!r){console.debug("Iframe not loaded within 5 seconds, checking document state...");var o=n.contentDocument||n.contentWindow.document;o&&"complete"===o.readyState?(e.iframeDocument=o,e.bindEvents(t)):e.handleIframeError()}}),5e3)})).catch((function(t){var n=new Lw(e);n.type="http",n.message=null==t?void 0:t.message,n.category=Dw.FAILED_TO_FETCH_POPUP_CONTENT,n.data=qw(qw({},n.data),{},{error:t,url:"".concat(e.shopUrl,"/ex-ocu/product-details")}),Fw(new Nw(Dw.FAILED_TO_FETCH_POPUP_CONTENT),n),e.redirectToTyCallback&&e.redirectToTyCallback(t.message)}))}},{key:"bindEvents",value:function(e){this.bindPaymentConfirmEvent(),e.skip_popup?this.handleSkipPopup():(this.loader.hide(),this.bindPaymentRejectedEvent(),this.openPopUp(),this.bindClickOutsideEvent(),this.bindClosePopupEvent(),this.bindVariantSelectors(),this.popupLoadedCallback&&this.popupLoadedCallback())}},{key:"createIframe",value:function(){var e=document.getElementById("cartpanda-modal-container"),t=document.createElement("iframe");t.style.width="100%",t.style.height="100%",t.style.display="none",t.style.overflowY="hidden",t.className+="cp-exocu-frame",t.setAttribute("frameBorder","0"),t.setAttribute("scrolling","no"),e.appendChild(t)}},{key:"loadContent",value:function(e){var t=document.querySelector("iframe.cp-exocu-frame");t.style.display="block",t.contentDocument.write(e),t.contentDocument.close()}},{key:"openPopUp",value:function(){document.getElementById("cartpanda-modal-container").style.display="block"}},{key:"closePopUp",value:function(){document.getElementById("cartpanda-modal-container").style.display="none"}},{key:"handleSkipPopup",value:function(){var e=this,t=this.iframeDocument.getElementById("cartpanda-payment-form"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var r=JSON.parse(n.responseText);if(200!==n.status){var o=new Lw(e);o.type="http",o.message=null==r?void 0:r.message,o.category=Dw.FAILED_TO_SKIP_POPUP,o.data=qw(qw({},o.data),{},{error:r,url:t.action}),Fw(new Nw(Dw.FAILED_TO_SKIP_POPUP),o),e.redirectToTyCallback("Form submission failed at handleSkipPopup.")}else fb_state.fb_from_checkout=0,fb_state.fb_declined_offer=0,e.handleLinkClickedResponse(r)}},n.open("POST",t.action);var r=new FormData(t);n.send(r)}},{key:"bindClosePopupEvent",value:function(){var e=this,t=this.iframeDocument.querySelector(".cartpanda-modal-close");!t||t.firstChild&&"✕"===t.firstChild.nodeValue||(t.prepend("✕"),t.onclick=function(t){e.closePopUp()})}},{key:"bindClickOutsideEvent",value:function(){var e=this;this.iframeDocument.addEventListener("click",(function(t){var n=e.iframeDocument.getElementById("cartpanda-payment-form");n&&!n.contains(t.target)&&e.closePopUp()}))}},{key:"bindPaymentConfirmEvent",value:function(){var e=this,t=this.iframeDocument.getElementById("cartpanda-payment-form");t||(Fw(new Nw(Dw.PAYMENT_FORM_NOT_FOUND),new Lw(this),!1),this.redirectToTyCallback("Payment form not found.")),t.action=this.acceptedUrlObj.href,t.onsubmit=function(t){t.preventDefault(),e.loader.show(),e.debounce(e,e.sendConfirmOffer,500)(t)}}},{key:"bindPaymentRejectedEvent",value:function(){var e=this;this.acceptedUrlObj.searchParams.set("accepted","no");var t=this.acceptedUrlObj,n=this.iframeDocument.getElementById("cartpanda-close-modal-btn");n||(Fw(new Nw(Dw.PAYMENT_REJECT_BUTTON_NOT_FOUND),new Lw(this),!1),this.redirectToTyCallback("Payment rejected button not found.")),n.dataset.link=t,n.onclick=function(t){t.preventDefault(),e.loader.show(),e.debounce(e,e.sendRejectedOffer,500)(t)}}},{key:"bindVariantSelectors",value:function(){var e=this;this.productResources&&this.productResources.variants.others.forEach((function(e){var t=[];e.product_variant_option_value.forEach((function(e){t.push("".concat(e.product_option_value_id,":").concat(e.product_option_id))})),e.search_key=t.join("-")}));var t=this.iframeDocument.getElementsByClassName("cartpanda-input");if(null!==t){var n=[];Array.from(t).forEach((function(t,r){"SELECT"===t.tagName&&(n[r]=t.value,t.addEventListener("change",(function(t){n[r]!=t.target.value&&(n[r]=t.target.value);var o=e.productResources.variants.others.find((function(e){if(e.search_key===n.join("-"))return e})),s=e.iframeDocument.getElementById("cartpanda-variant-unavailable"),i=e.iframeDocument.getElementById("cartpanda-payment-confirmation"),a=e.iframeDocument.querySelector(".cartpanda-price-wrapper");void 0!==o?(s.style.display="none",i.disabled=!1,i.style.cursor="pointer",i.style.backgroundColor="#2f51f6",i.style.borderColor="#2f51f6",a.innerHTML=o.display_price):(s.style.display="block",i.disabled=!0,i.style.cursor="not-allowed",i.style.backgroundColor="#8095ff",e.iframeDocument.getElementById("cartpanda-payment-confirmation").style.borderColor="#8095ff",a.innerHTML=0)})))}))}}},{key:"attachIframeContainer",value:function(){document.getElementById("cartpanda-modal-container")||(document.body.insertAdjacentHTML("beforeend",'<div id="cartpanda-modal-container" class="cartpanda-modal"></div>'),document.body.insertAdjacentHTML("beforeend","<style>#cartpanda-modal-container{ display: none; position: fixed; z-index: 99999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }</style>"))}},{key:"sendConfirmOffer",value:function(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var r=JSON.parse(n.responseText);if(200!==n.status){var o=new Lw(t);o.type="http",o.message=null==r?void 0:r.message,o.category=Dw.FAILED_TO_CONFIRM_IFRAME_POPUP_OFFER,o.data=qw(qw({},o.data),{},{error:r,url:e.target.action}),Fw(new Nw(Dw.FAILED_TO_CONFIRM_IFRAME_POPUP_OFFER),o),t.redirectToTyCallback("Form submission failed at sendConfirmOffer.")}else fb_state.fb_from_checkout=0,fb_state.fb_declined_offer=0,t.handleLinkClickedResponse(r)}},n.open("POST",e.target.action),n.send(this.getFormData(e))}},{key:"sendRejectedOffer",value:function(e){var t=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var r=JSON.parse(n.responseText);if(200!==n.status){var o=new Lw(t);o.type="http",o.message=null==r?void 0:r.message,o.category=Dw.FAILED_TO_REJECT_IFRAME_POPUP_OFFER,o.data=qw(qw({},o.data),{},{error:r,url:e.target.dataset.link}),Fw(new Nw(Dw.FAILED_TO_REJECT_IFRAME_POPUP_OFFER),o),t.redirectToTyCallback("Failed to reject offer at sendRejectedOffer.")}else fb_state.fb_from_checkout=0,fb_state.fb_declined_offer=1,t.handleLinkClickedResponse(r)}},n.open("POST",e.target.dataset.link),n.send()}},{key:"handleLinkClickedResponse",value:function(e){"ALREADY_PROCESSED"===e.message?console.debug("Offer already processed."):e.redirectUrl?this.handleRedirects(e.redirectUrl):(Fw(new Nw(Dw.FAILED_TO_REDIRECT),new Lw(this),!1),this.redirectToTyCallback("Redirect URL not found."))}},{key:"fetchPopUpContent",value:function(){var e=this;return new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e=JSON.parse(r.responseText);200!==r.status?n(e):t(e)}};var o=new URL("".concat(e.shopUrl,"/ex-ocu/product-details"));o.searchParams.append("iso2",e.iso2Code),o.searchParams.append("f_hash",e.fHash),o.searchParams.append("use_iframe",!0),e.xOcuMToken?o.searchParams.append("x_ocu_m_token",e.xOcuMToken):o.searchParams.append("x_ocu_token",e.xOcuToken),r.open("GET",o.href),r.send()}))}},{key:"getFormData",value:function(e){var t=new FormData(e.target);if(t.has("cartpanda_options_selected[]")){var n,r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Uw(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(t.entries());try{for(o.s();!(n=o.n()).done;){var s=$w(n.value,2),i=s[0],a=s[1];"cartpanda_options_selected[]"==i&&r.push(a)}}catch(e){o.e(e)}finally{o.f()}this.productResources.variants.others.find((function(n){n.search_key===r.join("-")&&(e.target.querySelector('input[name="cartpanda_product_variant_id"]').value=n.id,t.append("cartpanda_product_variant_id",n.id))})),t.delete("cartpanda_options_selected[]")}return t}},{key:"handleIframeError",value:function(){var e=new Lw(this);e.category=Dw.IFRAME_ELEMENT_NOT_FOUND,Fw(new Nw(Dw.IFRAME_ELEMENT_NOT_FOUND),e,!1),this.redirectToTyCallback("Iframe not found.")}}]),n}(m);function tk(e){return tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tk(e)}function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lk(r.key),r)}}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rk(e,t)}function ok(e){var t=ik();return function(){var n,r=ak(e);if(t){var o=ak(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==tk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sk(e)}(this,n)}}function sk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ik(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ik=function(){return!!e})()}function ak(e){return ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ak(e)}function ck(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function uk(e,t,n){return(t=lk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lk(e){var t=function(e,t){if("object"!=tk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tk(t)?t:t+""}function dk(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(t,e),n}var pk=new WeakSet,fk=new WeakSet,hk=new WeakSet,mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}(n,e);var t=ok(n);function n(e,r,o,s){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5?arguments[5]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ck(sk(i=t.call(this)),hk),ck(sk(i),fk),ck(sk(i),pk),uk(sk(i),"shopUrl",""),uk(sk(i),"xOcuToken",""),uk(sk(i),"xOcuMToken",""),uk(sk(i),"funnels",[]),uk(sk(i),"hasDeclinedOffer",0),i.shopUrl=e,i.xOcuMToken=r,i.xOcuToken=o,i.funnels=s,i.hasDeclinedOffer=a,i.afid=c,i}return function(e,t,n){t&&nk(e.prototype,t),n&&nk(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;dk(this,pk,gk).call(this).then((function(n){var r=n.pixels;"function"==typeof t&&t({fbFromCheckout:n.is_from_checkout,hasDeclinedOffer:n.has_declined_offer}),r.length>0&&(dk(e,fk,_k).call(e),r.forEach((function(t){Object.keys(t).forEach((function(n){var r=t[n];if(0==r.block){var o=r.initCheckoutData,s=o.productTitles,i=o.variantIds,a=o.totalItems,c=o.totalCartValue;void 0===c&&(c=o.totalPrice),c=e.parseToNumeric(c),e.xOcuMToken&&(void 0!==r.exocu_data.total_discounts_set&&""!=r.exocu_data.total_discounts_set&&(c-=e.parseToNumeric(r.exocu_data.total_discounts_set)),void 0!==r.exocu_data.total_discounts&&0!=r.exocu_data.total_discounts&&(c-=e.parseToNumeric(r.exocu_data.total_discounts)),1==r.include_shipping&&(c+=e.parseToNumeric(r.exocu_data.shipping_price)));var u={content_type:"product_group",content_ids:i.map(String),value:c,num_items:a,content_name:s,currency:r.exocu_data.currency,payment_method:r.exocu_data.payment_method,order_id:r.exocu_data.order_id};if(fbq("init",r.pixel_id,r.exocu_data.customer_info),1==r.has_view&&fbq("track","PageView",{},{eventID:r.exocu_data.event_ids.pageview}),1==r.has_purchase){e.xOcuMToken&&("cc"==r.exocu_data.payment_method&&fbq("trackSingleCustom",r.pixel_id,"Purchase CC",u,{eventID:r.exocu_data.event_ids.purchase_cc}),fbq("trackSingleCustom",r.pixel_id,"Purchase",u,{eventID:r.exocu_data.event_ids.purchase}));var l=r.exocu_data.purchased_item;if(l){var d={content_type:"product_group",content_ids:[l.content_id],value:e.parseToNumeric(o.totalPrice),num_items:l.quantity,content_name:l.product_title,currency:r.exocu_data.currency};fbq("trackSingleCustom",r.pixel_id,"".concat(l.marketing_funnel_name," Purchase"),d,{eventID:r.exocu_data.event_ids.random})}}dk(e,hk,yk).call(e)}}))})))}))}}]),n}(m);function gk(){var e=this;return new Promise((function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var e=JSON.parse(r.responseText);200!==r.status?n(e):t(e)}};var o="".concat(e.shopUrl,"/ex-ocu/pixels"),s=new URL(o);s.searchParams.set("x_ocu_m_token",e.xOcuMToken),s.searchParams.set("x_ocu_token",e.xOcuToken),s.searchParams.set("funnel_hashes",e.funnels.join(",")),s.searchParams.set("has_declined_offer",e.hasDeclinedOffer),e.afid&&s.searchParams.set("afid",e.afid),r.open("GET",s.href),r.send()}))}function _k(){!function(e,t,n,r,o,s,i){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(s=t.createElement(n)).async=!0,s.src="https://connect.facebook.net/en_US/fbevents.js",(i=t.getElementsByTagName(n)[0]).parentNode.insertBefore(s,i))}(window,document,"script")}function yk(){var e=new URL(window.location.href);e.searchParams.set("fbtrk_d",!0),window.history.replaceState({},"".concat(document.title,"-FBTracked"),e.toString())}function vk(e){return vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vk(e)}function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wk(r.key),r)}}function Sk(e,t,n){return(t=wk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wk(e){var t=function(e,t){if("object"!=vk(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vk(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vk(t)?t:t+""}var kk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Sk(this,"clickedLink",null),Sk(this,"clickedLinkHtml","")}return function(e,t,n){t&&bk(e.prototype,t),n&&bk(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"toggleLinks",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=document.getElementsByTagName("a");Array.from(n).forEach((function(n){t?(n.classList.add("cartpanda-disabled"),e.applyDisableCssStyle(n)):(n.classList.remove("cartpanda-disabled"),e.applyEnableCssStyle(n))})),!t&&document.contains(document.getElementById("cartpanda-ocu-external-css"))&&document.getElementById("cartpanda-ocu-external-css").remove()}},{key:"getTinySpinner",value:function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" width="30" height="30" style="shape-rendering: auto; display: inline!important;" xmlns:xlink="http://www.w3.org/1999/xlink"><g><circle stroke-dasharray="164.93361431346415 56.97787143782138" r="35" stroke-width="10" stroke="#7d8593" fill="none" cy="50" cx="50"><animateTransform keyTimes="0;1" values="0 50 50;360 50 50" dur="1s" repeatCount="indefinite" type="rotate" attributeName="transform"></animateTransform></circle><g></g></g>\x3c!-- [ldio] generated by https://loading.io --\x3e</svg>'}},{key:"showLinkSpinner",value:function(e){this.clickedLink=e,this.clickedLinkHtml=this.clickedLink.innerHTML,this.clickedLink.innerHTML=this.getTinySpinner()}},{key:"hideLinkSpinner",value:function(){this.clickedLink.innerHTML=this.clickedLinkHtml}},{key:"applyDisableCssStyle",value:function(e){e.style.pointerEvents="none",e.style.cursor="wait",e.style.opacity=.6}},{key:"applyEnableCssStyle",value:function(e){e.style.pointerEvents="auto",e.style.cursor="pointer",e.style.opacity=1}},{key:"disableAllLinks",value:function(){this.toggleLinks(!0)}},{key:"enableAllLinks",value:function(){this.toggleLinks(!1)}}]),e}();function Ek(e){return Ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ek(e)}function xk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xk(Object(n),!0).forEach((function(t){Lk(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ck(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dk(r.key),r)}}function Ik(e,t){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ik(e,t)}function Ok(e){var t=Rk();return function(){var n,r=Pk(e);if(t){var o=Pk(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==Ek(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mk(e)}(this,n)}}function Mk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rk=function(){return!!e})()}function Pk(e){return Pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pk(e)}function Ak(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function Lk(e,t,n){return(t=Dk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dk(e){var t=function(e,t){if("object"!=Ek(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ek(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ek(t)?t:t+""}function Nk(e,t,n){return function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}
/**!
 * Ocu External
 * Usage: new OcuExternal()
 * 
 * (c) 2024-2025 Cartpanda
 */(t,e),n}!function(e){var t=document.createElement("style");t.id="cartpanda-ocu-external-css",t.innerHTML="\n        a {\n            pointer-events: none;\n            cursor: default;\n            opacity: 0.5;\n        }\n    ",document.head.appendChild(t);var n=7.7,r=new WeakSet,o=new WeakSet,s=new WeakSet,i=new WeakSet,c=new WeakSet,u=new WeakSet,l=new WeakSet,d=new WeakSet,p=new WeakSet,f=new WeakSet,h=new WeakSet,g=new WeakSet,_=new WeakSet,y=new WeakSet,v=new WeakSet,b=new WeakSet,S=new WeakSet,w=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}(a,t);var n=Ok(a);function a(){var t,m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"production";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Ak(Mk(t=n.call(this,m)),S),Ak(Mk(t),b),Ak(Mk(t),v),Ak(Mk(t),y),Ak(Mk(t),_),Ak(Mk(t),g),Ak(Mk(t),h),Ak(Mk(t),f),Ak(Mk(t),p),Ak(Mk(t),d),Ak(Mk(t),l),Ak(Mk(t),u),Ak(Mk(t),c),Ak(Mk(t),i),Ak(Mk(t),s),Ak(Mk(t),o),Ak(Mk(t),r),Lk(Mk(t),"acceptedUrl",""),Lk(Mk(t),"rejectedUrl",""),Lk(Mk(t),"shopUrl",""),Lk(Mk(t),"xOcuToken",""),Lk(Mk(t),"xOcuMToken",""),Lk(Mk(t),"iso2Code",""),Lk(Mk(t),"productModal",null),Lk(Mk(t),"tyUrl",""),Lk(Mk(t),"stateToken",""),Lk(Mk(t),"hasRejectLink",!1),Lk(Mk(t),"params",{}),Lk(Mk(t),"funnels",[]),e.fb_state={fb_from_checkout:0,fb_declined_offer:0,offer_type:""},t.params=new Proxy(new URLSearchParams(window.location.search),{get:function(e,t){return e.get(t)}}),new Pw(t.hexToString(t.params.ev)),t.acceptedPathPattern=/ex-ocu\/next-offer\/[^?]+?\?accepted=yes(&[^=]+=[^&]*)*$/,t.rejectedPathPattern=/ex-ocu\/next-offer\/[^?]+?\?accepted=no(&[^=]+=[^&]*)*$/,t.linkControl=new kk,t.linkControl instanceof kk&&t.linkControl.disableAllLinks(),e.addEventListener("DOMContentLoaded",(function(){!t.linkControl instanceof kk&&(t.linkControl=new kk),t.linkControl.disableAllLinks()})),e.addEventListener("load",(function(){var e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/sweetalert2@11",document.body.appendChild(e),!t.linkControl instanceof kk&&(t.linkControl=new kk),Nk(Mk(t),s,x).call(Mk(t)),Nk(Mk(t),u,I).call(Mk(t))})),t.useIframePopUp=!0,Nk(Mk(t),r,k).call(Mk(t)),t}return function(e,t,n){t&&Ck(e.prototype,t),n&&Ck(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(a,[{key:"getFHash",value:function(){return new URL(this.acceptedUrl).pathname.split("/").pop()}},{key:"useIframe",value:function(){return this.useIframePopUp=!0,this}}]),a}(m);function k(){void 0===e.crypto?this.stateToken=Nk(this,o,E).call(this):(this.stateToken=crypto.randomUUID(),this.stateToken||(this.stateToken=Nk(this,o,E).call(this)))}function E(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function x(){var e=this;this.linkControl.disableAllLinks(),this.xOcuToken=this.params.x_ocu_token,this.iso2Code=this.params.iso2,this.shopUrl=this.hexToString(this.params.sp_url),this.xOcuMToken=this.params.x_ocu_m_token,this.linkControl.enableAllLinks(),Nk(this,b,$).call(this)||Nk(this,v,j).call(this).then((function(t){var n=t.loader_html,r=t.ty_url,o=t.offer_type;if(Nk(e,y,F).call(e,n),e.tyUrl=r,Nk(e,c,C).call(e),!e.hasRejectLink){e.loader.show();var s=new Lw(e);s.message="No reject link found on page.",s.category=Dw.NO_REJECT_LINK,Fw(new Nw(Dw.NO_REJECT_LINK),s),Nk(e,S,U).call(e,(function(){console.error("No reject link found.")}))}fb_state.offer_type=o})).catch((function(t){var n=new Lw(e);n.type="http",n.message=null==t?void 0:t.message,n.category=Dw.FETCH_PRELOAD,n.data=Tk(Tk({},n.data),{},{error:t}),Fw(new Nw(Dw.FETCH_PRELOAD),n)})),Nk(this,i,T).call(this),this.params.fbtrk_d||new mk(this.shopUrl,this.xOcuMToken,this.xOcuToken,this.funnels,1==this.params.has_declined_offer?1:0,this.params.afid).load((function(t){var n=t.fbFromCheckout,r=t.hasDeclinedOffer;if(e.tyUrl){var o=new URL(e.tyUrl);switch(o.searchParams.set("fb_from_checkout",n),o.searchParams.set("fb_declined_offer",r),fb_state.offer_type){case"up":o.searchParams.set("upsell",1);break;case"down":o.searchParams.set("downsell",1)}e.tyUrl=o.href}}))}function T(){var e=this,t=document.getElementsByTagName("a");Array.from(t).forEach((function(t){if(e.acceptedPathPattern.test(t.href)){var n=new URL(t.href).pathname.split("/");e.funnels.push(n.pop())}}))}function C(){var e=this,t=document.getElementsByTagName("a");Array.from(t).forEach((function(t){e.rejectedPathPattern.test(t.href)&&(e.hasRejectLink=!0)}))}function I(){var e=this,t=document.getElementsByTagName("a");Array.from(t).forEach((function(t){t.onclick=function(n){e.acceptedPathPattern.test(t.href)&&(void 0!==n&&n.preventDefault(),Nk(e,l,M).call(e,t),e.acceptedUrl=t.href,e.debounce(e,Nk(e,d,R),1e3)()),e.rejectedPathPattern.test(t.href)&&(void 0!==n&&n.preventDefault(),Nk(e,l,M).call(e,t),e.rejectedUrl=t.href,e.debounce(e,Nk(e,h,L),1e3)())}}))}function M(e){this.linkControl.disableAllLinks(),this.linkControl.showLinkSpinner(e);try{this.loader.show()}catch(e){console.error("Failed to show loader.",{error:e})}}function R(){var e=this,t=document.getElementById("cartpandaModal");if(document.contains(t)&&t.remove(),this.useIframePopUp)try{Nk(this,p,P).call(this)}catch(t){var n=new Lw(this);n.type="error",n.message=null==t?void 0:t.message,n.category=Dw.FAILED_TO_OPEN_IFRAME_POPUP,n.data=Tk(Tk({},n.data),{},{error:t}),Fw(new Nw(Dw.FAILED_TO_OPEN_IFRAME_POPUP),n),Nk(this,S,U).call(this,(function(){Nk(e,f,A).call(e),console.error("Failed to load iframe modal.",{error:t})}))}else Nk(this,f,A).call(this)}function P(){var e=this,t=new URL("".concat(this.acceptedUrl));t.searchParams.set("use_iframe",!0);var n=Nk(this,_,N).call(this,t);new ek(this.shopUrl,this.xOcuToken,this.iso2Code,this.getFHash(),n,this.xOcuMToken,(function(t){Nk(e,S,U).call(e,(function(){e.loader.hide(),alert(t)}))}),(function(){e.linkControl.enableAllLinks(),e.linkControl.hideLinkSpinner()}))}function A(){var e=this,t=new O(this.shopUrl,this.xOcuToken,this.iso2Code,this.getFHash(),this.xOcuMToken,(function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n){e.linkControl.enableAllLinks(),e.linkControl.hideLinkSpinner();var o=new URL("".concat(e.acceptedUrl));o=Nk(e,_,N).call(e,o);var s,i,a,c=document.getElementById("cartpanda-payment-form");if(c)if(c.action=null!==(s=null===(i=o)||void 0===i?void 0:i.href)&&void 0!==s?s:"#",r)c.submit();else e.loader.hide(),t.openModal(),o.searchParams.set("accepted","no"),document.getElementById("cartpanda-close-modal-btn").dataset.link=null===(a=o)||void 0===a?void 0:a.href}}))}function L(){var e=this,t=new URL("".concat(this.rejectedUrl)),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){var t=JSON.parse(n.responseText);if(200!==n.status){var r=new Lw(e);r.type="error",r.message=null==t?void 0:t.message,r.category=Dw.FAILED_TO_REJECT_OFFER,r.data=Tk(Tk({},r.data),{},{error:t}),Fw(new Nw(Dw.FAILED_TO_REJECT_OFFER),r),Nk(e,S,U).call(e,(function(){e.loader.hide(),alert("Failed to reject offer.")}))}else fb_state.fb_from_checkout=0,fb_state.fb_declined_offer=1,Nk(e,g,D).call(e,t)}},t.searchParams.set("use_iframe",!0),n.open("POST",Nk(this,_,N).call(this,t)),n.send()}function D(e){"ALREADY_PROCESSED"===e.message?console.debug("Offer already processed."):e.redirectUrl?this.handleRedirects(e.redirectUrl):Nk(this,S,U).call(this)}function N(e){return this.xOcuToken&&e.searchParams.set("x_ocu_token",this.xOcuToken),this.xOcuMToken&&e.searchParams.set("x_ocu_m_token",this.xOcuMToken),e.searchParams.set("iso2",this.iso2Code),e.searchParams.set("state_token",this.stateToken),e}function F(e){this.loader=(new a).initIframe(e)}function j(){var e=this;return new Promise((function(t,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){var e=JSON.parse(o.responseText);200!==o.status?r(e):t(e)}};var s="".concat(e.shopUrl,"/ex-ocu/preload"),i=new URL(s);i.searchParams.set("iso2",e.iso2Code),i.searchParams.set("x_ocu_m_token",e.xOcuMToken),i.searchParams.set("x_ocu_token",e.xOcuToken),i.searchParams.set("version",n),o.open("GET",i.href),o.send()}))}function $(){return document.contains(document.getElementById("cartpanda-loader-container"))}function U(e){var t=this;this.tyUrl?setTimeout((function(){var e=new URL(t.tyUrl);switch(e.searchParams.set("fb_from_checkout",0),fb_state.offer_type){case"up":e.searchParams.set("upsell",1);break;case"down":e.searchParams.set("downsell",1)}window.location.href=t.applyUserQueryStrings(e.href)}),1e3):e&&"function"==typeof e&&e()}e.OcuExternal=w}(window)})()})();